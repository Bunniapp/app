(self.webpackChunkinterface=self.webpackChunkinterface||[]).push([[213],{5972:(Ot,se,te)=>{"use strict";se.Xx=se._w=se.aP=se.KS=se.jQ=void 0;te(5465);const Be=te(6713);te(3403);function ie(j){const $=new Float64Array(16);if(j)for(let C=0;C<j.length;C++)$[C]=j[C];return $}se.jQ=64,se.KS=64,se.aP=32,new Uint8Array(32)[0]=9;const De=ie(),ae=ie([1]),we=(ie([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ie([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),pr=ie([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),$t=ie([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);ie([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function xe(j,$){for(let C=0;C<16;C++)j[C]=0|$[C]}function gr(j){let $=1;for(let C=0;C<16;C++){let d=j[C]+$+65535;$=Math.floor(d/65536),j[C]=d-65536*$}j[0]+=$-1+37*($-1)}function nr(j,$,C){const d=~(C-1);for(let S=0;S<16;S++){const de=d&(j[S]^$[S]);j[S]^=de,$[S]^=de}}function Kt(j,$){const C=ie(),d=ie();for(let S=0;S<16;S++)d[S]=$[S];gr(d),gr(d),gr(d);for(let S=0;S<2;S++){C[0]=d[0]-65517;for(let Ie=1;Ie<15;Ie++)C[Ie]=d[Ie]-65535-(C[Ie-1]>>16&1),C[Ie-1]&=65535;C[15]=d[15]-32767-(C[14]>>16&1);const de=C[15]>>16&1;C[14]&=65535,nr(d,C,1-de)}for(let S=0;S<16;S++)j[2*S]=255&d[S],j[2*S+1]=d[S]>>8}function xr(j){const $=new Uint8Array(32);return Kt($,j),1&$[0]}function it(j,$,C){for(let d=0;d<16;d++)j[d]=$[d]+C[d]}function ir(j,$,C){for(let d=0;d<16;d++)j[d]=$[d]-C[d]}function Pe(j,$,C){let d,S,de=0,Ie=0,We=0,gt=0,He=0,Oe=0,Lt=0,Jt=0,Qt=0,ht=0,Bt=0,At=0,yt=0,et=0,ct=0,st=0,tt=0,Yt=0,xt=0,vr=0,Ht=0,fr=0,Or=0,Fr=0,Rr=0,_r=0,Wr=0,bn=0,Wn=0,wn=0,xn=0,qt=C[0],Ct=C[1],Tt=C[2],Et=C[3],ke=C[4],Ut=C[5],sr=C[6],Xt=C[7],Vt=C[8],er=C[9],Zt=C[10],ot=C[11],vt=C[12],_t=C[13],mt=C[14],tr=C[15];d=$[0],de+=d*qt,Ie+=d*Ct,We+=d*Tt,gt+=d*Et,He+=d*ke,Oe+=d*Ut,Lt+=d*sr,Jt+=d*Xt,Qt+=d*Vt,ht+=d*er,Bt+=d*Zt,At+=d*ot,yt+=d*vt,et+=d*_t,ct+=d*mt,st+=d*tr,d=$[1],Ie+=d*qt,We+=d*Ct,gt+=d*Tt,He+=d*Et,Oe+=d*ke,Lt+=d*Ut,Jt+=d*sr,Qt+=d*Xt,ht+=d*Vt,Bt+=d*er,At+=d*Zt,yt+=d*ot,et+=d*vt,ct+=d*_t,st+=d*mt,tt+=d*tr,d=$[2],We+=d*qt,gt+=d*Ct,He+=d*Tt,Oe+=d*Et,Lt+=d*ke,Jt+=d*Ut,Qt+=d*sr,ht+=d*Xt,Bt+=d*Vt,At+=d*er,yt+=d*Zt,et+=d*ot,ct+=d*vt,st+=d*_t,tt+=d*mt,Yt+=d*tr,d=$[3],gt+=d*qt,He+=d*Ct,Oe+=d*Tt,Lt+=d*Et,Jt+=d*ke,Qt+=d*Ut,ht+=d*sr,Bt+=d*Xt,At+=d*Vt,yt+=d*er,et+=d*Zt,ct+=d*ot,st+=d*vt,tt+=d*_t,Yt+=d*mt,xt+=d*tr,d=$[4],He+=d*qt,Oe+=d*Ct,Lt+=d*Tt,Jt+=d*Et,Qt+=d*ke,ht+=d*Ut,Bt+=d*sr,At+=d*Xt,yt+=d*Vt,et+=d*er,ct+=d*Zt,st+=d*ot,tt+=d*vt,Yt+=d*_t,xt+=d*mt,vr+=d*tr,d=$[5],Oe+=d*qt,Lt+=d*Ct,Jt+=d*Tt,Qt+=d*Et,ht+=d*ke,Bt+=d*Ut,At+=d*sr,yt+=d*Xt,et+=d*Vt,ct+=d*er,st+=d*Zt,tt+=d*ot,Yt+=d*vt,xt+=d*_t,vr+=d*mt,Ht+=d*tr,d=$[6],Lt+=d*qt,Jt+=d*Ct,Qt+=d*Tt,ht+=d*Et,Bt+=d*ke,At+=d*Ut,yt+=d*sr,et+=d*Xt,ct+=d*Vt,st+=d*er,tt+=d*Zt,Yt+=d*ot,xt+=d*vt,vr+=d*_t,Ht+=d*mt,fr+=d*tr,d=$[7],Jt+=d*qt,Qt+=d*Ct,ht+=d*Tt,Bt+=d*Et,At+=d*ke,yt+=d*Ut,et+=d*sr,ct+=d*Xt,st+=d*Vt,tt+=d*er,Yt+=d*Zt,xt+=d*ot,vr+=d*vt,Ht+=d*_t,fr+=d*mt,Or+=d*tr,d=$[8],Qt+=d*qt,ht+=d*Ct,Bt+=d*Tt,At+=d*Et,yt+=d*ke,et+=d*Ut,ct+=d*sr,st+=d*Xt,tt+=d*Vt,Yt+=d*er,xt+=d*Zt,vr+=d*ot,Ht+=d*vt,fr+=d*_t,Or+=d*mt,Fr+=d*tr,d=$[9],ht+=d*qt,Bt+=d*Ct,At+=d*Tt,yt+=d*Et,et+=d*ke,ct+=d*Ut,st+=d*sr,tt+=d*Xt,Yt+=d*Vt,xt+=d*er,vr+=d*Zt,Ht+=d*ot,fr+=d*vt,Or+=d*_t,Fr+=d*mt,Rr+=d*tr,d=$[10],Bt+=d*qt,At+=d*Ct,yt+=d*Tt,et+=d*Et,ct+=d*ke,st+=d*Ut,tt+=d*sr,Yt+=d*Xt,xt+=d*Vt,vr+=d*er,Ht+=d*Zt,fr+=d*ot,Or+=d*vt,Fr+=d*_t,Rr+=d*mt,_r+=d*tr,d=$[11],At+=d*qt,yt+=d*Ct,et+=d*Tt,ct+=d*Et,st+=d*ke,tt+=d*Ut,Yt+=d*sr,xt+=d*Xt,vr+=d*Vt,Ht+=d*er,fr+=d*Zt,Or+=d*ot,Fr+=d*vt,Rr+=d*_t,_r+=d*mt,Wr+=d*tr,d=$[12],yt+=d*qt,et+=d*Ct,ct+=d*Tt,st+=d*Et,tt+=d*ke,Yt+=d*Ut,xt+=d*sr,vr+=d*Xt,Ht+=d*Vt,fr+=d*er,Or+=d*Zt,Fr+=d*ot,Rr+=d*vt,_r+=d*_t,Wr+=d*mt,bn+=d*tr,d=$[13],et+=d*qt,ct+=d*Ct,st+=d*Tt,tt+=d*Et,Yt+=d*ke,xt+=d*Ut,vr+=d*sr,Ht+=d*Xt,fr+=d*Vt,Or+=d*er,Fr+=d*Zt,Rr+=d*ot,_r+=d*vt,Wr+=d*_t,bn+=d*mt,Wn+=d*tr,d=$[14],ct+=d*qt,st+=d*Ct,tt+=d*Tt,Yt+=d*Et,xt+=d*ke,vr+=d*Ut,Ht+=d*sr,fr+=d*Xt,Or+=d*Vt,Fr+=d*er,Rr+=d*Zt,_r+=d*ot,Wr+=d*vt,bn+=d*_t,Wn+=d*mt,wn+=d*tr,d=$[15],st+=d*qt,tt+=d*Ct,Yt+=d*Tt,xt+=d*Et,vr+=d*ke,Ht+=d*Ut,fr+=d*sr,Or+=d*Xt,Fr+=d*Vt,Rr+=d*er,_r+=d*Zt,Wr+=d*ot,bn+=d*vt,Wn+=d*_t,wn+=d*mt,xn+=d*tr,de+=38*tt,Ie+=38*Yt,We+=38*xt,gt+=38*vr,He+=38*Ht,Oe+=38*fr,Lt+=38*Or,Jt+=38*Fr,Qt+=38*Rr,ht+=38*_r,Bt+=38*Wr,At+=38*bn,yt+=38*Wn,et+=38*wn,ct+=38*xn,S=1,d=de+S+65535,S=Math.floor(d/65536),de=d-65536*S,d=Ie+S+65535,S=Math.floor(d/65536),Ie=d-65536*S,d=We+S+65535,S=Math.floor(d/65536),We=d-65536*S,d=gt+S+65535,S=Math.floor(d/65536),gt=d-65536*S,d=He+S+65535,S=Math.floor(d/65536),He=d-65536*S,d=Oe+S+65535,S=Math.floor(d/65536),Oe=d-65536*S,d=Lt+S+65535,S=Math.floor(d/65536),Lt=d-65536*S,d=Jt+S+65535,S=Math.floor(d/65536),Jt=d-65536*S,d=Qt+S+65535,S=Math.floor(d/65536),Qt=d-65536*S,d=ht+S+65535,S=Math.floor(d/65536),ht=d-65536*S,d=Bt+S+65535,S=Math.floor(d/65536),Bt=d-65536*S,d=At+S+65535,S=Math.floor(d/65536),At=d-65536*S,d=yt+S+65535,S=Math.floor(d/65536),yt=d-65536*S,d=et+S+65535,S=Math.floor(d/65536),et=d-65536*S,d=ct+S+65535,S=Math.floor(d/65536),ct=d-65536*S,d=st+S+65535,S=Math.floor(d/65536),st=d-65536*S,de+=S-1+37*(S-1),S=1,d=de+S+65535,S=Math.floor(d/65536),de=d-65536*S,d=Ie+S+65535,S=Math.floor(d/65536),Ie=d-65536*S,d=We+S+65535,S=Math.floor(d/65536),We=d-65536*S,d=gt+S+65535,S=Math.floor(d/65536),gt=d-65536*S,d=He+S+65535,S=Math.floor(d/65536),He=d-65536*S,d=Oe+S+65535,S=Math.floor(d/65536),Oe=d-65536*S,d=Lt+S+65535,S=Math.floor(d/65536),Lt=d-65536*S,d=Jt+S+65535,S=Math.floor(d/65536),Jt=d-65536*S,d=Qt+S+65535,S=Math.floor(d/65536),Qt=d-65536*S,d=ht+S+65535,S=Math.floor(d/65536),ht=d-65536*S,d=Bt+S+65535,S=Math.floor(d/65536),Bt=d-65536*S,d=At+S+65535,S=Math.floor(d/65536),At=d-65536*S,d=yt+S+65535,S=Math.floor(d/65536),yt=d-65536*S,d=et+S+65535,S=Math.floor(d/65536),et=d-65536*S,d=ct+S+65535,S=Math.floor(d/65536),ct=d-65536*S,d=st+S+65535,S=Math.floor(d/65536),st=d-65536*S,de+=S-1+37*(S-1),j[0]=de,j[1]=Ie,j[2]=We,j[3]=gt,j[4]=He,j[5]=Oe,j[6]=Lt,j[7]=Jt,j[8]=Qt,j[9]=ht,j[10]=Bt,j[11]=At,j[12]=yt,j[13]=et,j[14]=ct,j[15]=st}function k(j,$){Pe(j,$,$)}function F(j,$){const C=ie(),d=ie(),S=ie(),de=ie(),Ie=ie(),We=ie(),gt=ie(),He=ie(),Oe=ie();ir(C,j[1],j[0]),ir(Oe,$[1],$[0]),Pe(C,C,Oe),it(d,j[0],j[1]),it(Oe,$[0],$[1]),Pe(d,d,Oe),Pe(S,j[3],$[3]),Pe(S,S,we),Pe(de,j[2],$[2]),it(de,de,de),ir(Ie,d,C),ir(We,de,S),it(gt,de,S),it(He,d,C),Pe(j[0],Ie,We),Pe(j[1],He,gt),Pe(j[2],gt,We),Pe(j[3],Ie,He)}function oe(j,$,C){for(let d=0;d<4;d++)nr(j[d],$[d],C)}function A(j,$){const C=ie(),d=ie(),S=ie();(function G(j,$){const C=ie();let d;for(d=0;d<16;d++)C[d]=$[d];for(d=253;d>=0;d--)k(C,C),2!==d&&4!==d&&Pe(C,C,$);for(d=0;d<16;d++)j[d]=C[d]})(S,$[2]),Pe(C,$[0],S),Pe(d,$[1],S),Kt(j,d),j[31]^=xr(C)<<7}function _e(j,$){const C=[ie(),ie(),ie(),ie()];xe(C[0],pr),xe(C[1],$t),xe(C[2],ae),Pe(C[3],pr,$t),function D(j,$,C){xe(j[0],De),xe(j[1],ae),xe(j[2],ae),xe(j[3],De);for(let d=255;d>=0;--d){const S=C[d/8|0]>>(7&d)&1;oe(j,$,S),F($,j),F(j,j),oe(j,$,S)}}(j,C,$)}se._w=function $e(j){if(j.length!==se.aP)throw new Error(`ed25519: seed must be ${se.aP} bytes`);const $=(0,Be.hash)(j);$[0]&=248,$[31]&=127,$[31]|=64;const C=new Uint8Array(32),d=[ie(),ie(),ie(),ie()];_e(d,$),A(C,d);const S=new Uint8Array(64);return S.set(j),S.set(C,32),{publicKey:C,secretKey:S}};const ee=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function re(j,$){let C,d,S,de;for(d=63;d>=32;--d){for(C=0,S=d-32,de=d-12;S<de;++S)$[S]+=C-16*$[d]*ee[S-(d-32)],C=Math.floor(($[S]+128)/256),$[S]-=256*C;$[S]+=C,$[d]=0}for(C=0,S=0;S<32;S++)$[S]+=C-($[31]>>4)*ee[S],C=$[S]>>8,$[S]&=255;for(S=0;S<32;S++)$[S]-=C*ee[S];for(d=0;d<32;d++)$[d+1]+=$[d]>>8,j[d]=255&$[d]}function Xe(j){const $=new Float64Array(64);for(let C=0;C<64;C++)$[C]=j[C];for(let C=0;C<64;C++)j[C]=0;re(j,$)}se.Xx=function pt(j,$){const C=new Float64Array(64),d=[ie(),ie(),ie(),ie()],S=(0,Be.hash)(j.subarray(0,32));S[0]&=248,S[31]&=127,S[31]|=64;const de=new Uint8Array(64);de.set(S.subarray(32),32);const Ie=new Be.SHA512;Ie.update(de.subarray(32)),Ie.update($);const We=Ie.digest();Ie.clean(),Xe(We),_e(d,We),A(de,d),Ie.reset(),Ie.update(de.subarray(0,32)),Ie.update(j.subarray(32)),Ie.update($);const gt=Ie.digest();Xe(gt);for(let He=0;He<32;He++)C[He]=We[He];for(let He=0;He<32;He++)for(let Oe=0;Oe<32;Oe++)C[He+Oe]+=gt[He]*S[Oe];return re(de.subarray(32),C),de}},6713:(Ot,se,te)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});var v=te(9546),Ze=te(3403);se.DIGEST_LENGTH=64,se.BLOCK_SIZE=128;var Be=function(){function De(){this.digestLength=se.DIGEST_LENGTH,this.blockSize=se.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return De.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},De.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},De.prototype.clean=function(){Ze.wipe(this._buffer),Ze.wipe(this._tempHi),Ze.wipe(this._tempLo),this.reset()},De.prototype.update=function(ae,Q){if(void 0===Q&&(Q=ae.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var we=0;if(this._bytesHashed+=Q,this._bufferLength>0){for(;this._bufferLength<se.BLOCK_SIZE&&Q>0;)this._buffer[this._bufferLength++]=ae[we++],Q--;this._bufferLength===this.blockSize&&(ie(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(Q>=this.blockSize&&(we=ie(this._tempHi,this._tempLo,this._stateHi,this._stateLo,ae,we,Q),Q%=this.blockSize);Q>0;)this._buffer[this._bufferLength++]=ae[we++],Q--;return this},De.prototype.finish=function(ae){if(!this._finished){var Q=this._bytesHashed,we=this._bufferLength,pr=Q/536870912|0,$t=Q<<3,Rt=Q%128<112?128:256;this._buffer[we]=128;for(var xe=we+1;xe<Rt-8;xe++)this._buffer[xe]=0;v.writeUint32BE(pr,this._buffer,Rt-8),v.writeUint32BE($t,this._buffer,Rt-4),ie(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Rt),this._finished=!0}for(xe=0;xe<this.digestLength/8;xe++)v.writeUint32BE(this._stateHi[xe],ae,8*xe),v.writeUint32BE(this._stateLo[xe],ae,8*xe+4);return this},De.prototype.digest=function(){var ae=new Uint8Array(this.digestLength);return this.finish(ae),ae},De.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},De.prototype.restoreState=function(ae){return this._stateHi.set(ae.stateHi),this._stateLo.set(ae.stateLo),this._bufferLength=ae.bufferLength,ae.buffer&&this._buffer.set(ae.buffer),this._bytesHashed=ae.bytesHashed,this._finished=!1,this},De.prototype.cleanSavedState=function(ae){Ze.wipe(ae.stateHi),Ze.wipe(ae.stateLo),ae.buffer&&Ze.wipe(ae.buffer),ae.bufferLength=0,ae.bytesHashed=0},De}();se.SHA512=Be;var lr=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function ie(De,ae,Q,we,pr,$t,Rt){for(var A,D,_e,$e,V,Y,ee,re,xe=Q[0],gr=Q[1],nr=Q[2],Kt=Q[3],Nt=Q[4],Dr=Q[5],xr=Q[6],Er=Q[7],it=we[0],ir=we[1],Pe=we[2],k=we[3],G=we[4],W=we[5],F=we[6],oe=we[7];Rt>=128;){for(var Xe=0;Xe<16;Xe++)De[Xe]=v.readUint32BE(pr,pt=8*Xe+$t),ae[Xe]=v.readUint32BE(pr,pt+4);for(Xe=0;Xe<80;Xe++){var d,Lt,di=gr,Ri=nr,yr=Kt,j=Nt,$=Dr,C=xr,de=ir,Ie=Pe,We=k,gt=G,He=W,Oe=F;if(V=65535&(D=oe),Y=D>>>16,ee=65535&(A=Er),re=A>>>16,V+=65535&(D=(G>>>14|Nt<<18)^(G>>>18|Nt<<14)^(Nt>>>9|G<<23)),Y+=D>>>16,ee+=65535&(A=(Nt>>>14|G<<18)^(Nt>>>18|G<<14)^(G>>>9|Nt<<23)),re+=A>>>16,V+=65535&(D=G&W^~G&F),Y+=D>>>16,ee+=65535&(A=Nt&Dr^~Nt&xr),re+=A>>>16,V+=65535&(D=lr[2*Xe+1]),Y+=D>>>16,ee+=65535&(A=lr[2*Xe]),re+=A>>>16,Y+=(D=ae[Xe%16])>>>16,ee+=65535&(A=De[Xe%16]),re+=A>>>16,ee+=(Y+=(V+=65535&D)>>>16)>>>16,V=65535&(D=$e=65535&V|Y<<16),Y=D>>>16,ee=65535&(A=_e=65535&ee|(re+=ee>>>16)<<16),re=A>>>16,V+=65535&(D=(it>>>28|xe<<4)^(xe>>>2|it<<30)^(xe>>>7|it<<25)),Y+=D>>>16,ee+=65535&(A=(xe>>>28|it<<4)^(it>>>2|xe<<30)^(it>>>7|xe<<25)),re+=A>>>16,Y+=(D=it&ir^it&Pe^ir&Pe)>>>16,ee+=65535&(A=xe&gr^xe&nr^gr&nr),re+=A>>>16,d=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,Lt=65535&V|Y<<16,V=65535&(D=We),Y=D>>>16,ee=65535&(A=yr),re=A>>>16,Y+=(D=$e)>>>16,ee+=65535&(A=_e),re+=A>>>16,gr=xe,nr=di,Kt=Ri,Nt=yr=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,Dr=j,xr=$,Er=C,xe=d,ir=it,Pe=de,k=Ie,G=We=65535&V|Y<<16,W=gt,F=He,oe=Oe,it=Lt,Xe%16==15)for(var pt=0;pt<16;pt++)V=65535&(D=ae[pt]),Y=D>>>16,ee=65535&(A=De[pt]),re=A>>>16,V+=65535&(D=ae[(pt+9)%16]),Y+=D>>>16,ee+=65535&(A=De[(pt+9)%16]),re+=A>>>16,V+=65535&(D=(($e=ae[(pt+1)%16])>>>1|(_e=De[(pt+1)%16])<<31)^($e>>>8|_e<<24)^($e>>>7|_e<<25)),Y+=D>>>16,ee+=65535&(A=(_e>>>1|$e<<31)^(_e>>>8|$e<<24)^_e>>>7),re+=A>>>16,Y+=(D=(($e=ae[(pt+14)%16])>>>19|(_e=De[(pt+14)%16])<<13)^(_e>>>29|$e<<3)^($e>>>6|_e<<26))>>>16,ee+=65535&(A=(_e>>>19|$e<<13)^($e>>>29|_e<<3)^_e>>>6),re+=A>>>16,De[pt]=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,ae[pt]=65535&V|Y<<16}V=65535&(D=it),Y=D>>>16,ee=65535&(A=xe),re=A>>>16,Y+=(D=we[0])>>>16,ee+=65535&(A=Q[0]),re+=A>>>16,Q[0]=xe=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,we[0]=it=65535&V|Y<<16,V=65535&(D=ir),Y=D>>>16,ee=65535&(A=gr),re=A>>>16,Y+=(D=we[1])>>>16,ee+=65535&(A=Q[1]),re+=A>>>16,Q[1]=gr=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,we[1]=ir=65535&V|Y<<16,V=65535&(D=Pe),Y=D>>>16,ee=65535&(A=nr),re=A>>>16,Y+=(D=we[2])>>>16,ee+=65535&(A=Q[2]),re+=A>>>16,Q[2]=nr=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,we[2]=Pe=65535&V|Y<<16,V=65535&(D=k),Y=D>>>16,ee=65535&(A=Kt),re=A>>>16,Y+=(D=we[3])>>>16,ee+=65535&(A=Q[3]),re+=A>>>16,Q[3]=Kt=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,we[3]=k=65535&V|Y<<16,V=65535&(D=G),Y=D>>>16,ee=65535&(A=Nt),re=A>>>16,Y+=(D=we[4])>>>16,ee+=65535&(A=Q[4]),re+=A>>>16,Q[4]=Nt=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,we[4]=G=65535&V|Y<<16,V=65535&(D=W),Y=D>>>16,ee=65535&(A=Dr),re=A>>>16,Y+=(D=we[5])>>>16,ee+=65535&(A=Q[5]),re+=A>>>16,Q[5]=Dr=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,we[5]=W=65535&V|Y<<16,V=65535&(D=F),Y=D>>>16,ee=65535&(A=xr),re=A>>>16,Y+=(D=we[6])>>>16,ee+=65535&(A=Q[6]),re+=A>>>16,Q[6]=xr=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,we[6]=F=65535&V|Y<<16,V=65535&(D=oe),Y=D>>>16,ee=65535&(A=Er),re=A>>>16,Y+=(D=we[7])>>>16,ee+=65535&(A=Q[7]),re+=A>>>16,Q[7]=Er=65535&(ee+=(Y+=(V+=65535&D)>>>16)>>>16)|(re+=ee>>>16)<<16,we[7]=oe=65535&V|Y<<16,$t+=128,Rt-=128}return $t}se.hash=function ze(De){var ae=new Be;ae.update(De);var Q=ae.digest();return ae.clean(),Q}},7213:(Ot,se,te)=>{"use strict";te.r(se),te.d(se,{EthereumProvider:()=>T_,OPTIONAL_EVENTS:()=>zl,OPTIONAL_METHODS:()=>Zl,REQUIRED_EVENTS:()=>no,REQUIRED_METHODS:()=>ro,default:()=>so});var v=te(5861),Ze=te(2016),Be=te.n(Ze),lr=te(9026),ie=te(1028),ze=te(5465),De=te(1033),ae=te(8467),Q=te(3544),we=function(a,t,r){if(r||2===arguments.length)for(var l,s=0,u=t.length;s<u;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return a.concat(l||Array.prototype.slice.call(t))},pr=function a(t,r,s){this.name=t,this.version=r,this.os=s,this.type="browser"},$t=function a(t){this.version=t,this.type="node",this.name="node",this.os=process.platform},Rt=function a(t,r,s,u){this.name=t,this.version=r,this.os=s,this.bot=u,this.type="bot-device"},xe=function a(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},gr=function a(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Kt=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Nt=3,Dr=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],xr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Pe(a){var t=function it(a){return""!==a&&Dr.reduce(function(t,r){var s=r[0];if(t)return t;var l=r[1].exec(a);return!!l&&[s,l]},!1)}(a);if(!t)return null;var r=t[0],s=t[1];if("searchbot"===r)return new xe;var u=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);u?u.length<Nt&&(u=we(we([],u,!0),function W(a){for(var t=[],r=0;r<a;r++)t.push("0");return t}(Nt-u.length),!0)):u=[];var l=u.join("."),f=function k(a){for(var t=0,r=xr.length;t<r;t++){var s=xr[t],u=s[0];if(s[1].exec(a))return u}return null}(a),g=Kt.exec(a);return g&&g[1]?new Rt(r,l,f,g[1]):new pr(r,l,f)}var F=te(5409),oe=te(439),A=te(6534),D=te(133),_e=te(4443);const $e=":";function d(a,t){return a.includes(":")?[a]:t.chains||[]}const He="base10",Oe="base16",Lt="base64pad",Jt="utf8";function st(){const a=(0,ze.randomBytes)(32);return(0,Q.BB)(a,Oe)}function xt(a){const t=(0,De.vp)((0,Q.mL)(a,Jt));return(0,Q.BB)(t,Oe)}function Ht(a){return Number((0,Q.BB)(a,He))}function Rr(a){const t=(0,Q.mL)(a,Lt),r=t.slice(0,1);if(1===Ht(r)){const g=33,w=g+12,m=t.slice(1,g),E=t.slice(g,w);return{type:r,sealed:t.slice(w),iv:E,senderPublicKey:m}}const l=t.slice(1,13);return{type:r,sealed:t.slice(13),iv:l}}function Wr(a){const t=a?.type||0;if(1===t){if(typeof a?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof a?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:a?.senderPublicKey,receiverPublicKey:a?.receiverPublicKey}}function bn(a){return 1===a.type&&"string"==typeof a.senderPublicKey&&"string"==typeof a.receiverPublicKey}var Wn=Object.defineProperty,wn=Object.getOwnPropertySymbols,xn=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,Ct=(a,t,r)=>t in a?Wn(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,Tt=(a,t)=>{for(var r in t||(t={}))xn.call(t,r)&&Ct(a,r,t[r]);if(wn)for(var r of wn(t))qt.call(t,r)&&Ct(a,r,t[r]);return a};const Et="ReactNative",ke={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Zt="js";function ot(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function vt(){return!(0,oe.getDocument)()&&!!(0,oe.getNavigator)()&&navigator.product===Et}function _t(){return!ot()&&!!(0,oe.getNavigator)()&&!!(0,oe.getDocument)()}function mt(){return vt()?ke.reactNative:ot()?ke.node:_t()?ke.browser:ke.unknown}function na(a,t,r){const s=function ta(){if(mt()===ke.reactNative&&typeof global<"u"&&typeof(null==global?void 0:global.Platform)<"u"){const{OS:r,Version:s}=global.Platform;return[r,s].join("-")}const a=function Er(a){return a?Pe(a):typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product?new gr:typeof navigator<"u"?Pe(navigator.userAgent):function G(){return typeof process<"u"&&process.version?new $t(process.version.slice(1)):null}()}();if(null===a)return"unknown";const t=a.os?a.os.replace(" ","").toLowerCase():"unknown";return"browser"===a.type?[t,a.name,a.version].join("-"):[t,a.version].join("-")}(),u=function ra(){var a;const t=mt();return t===ke.browser?[t,(null==(a=(0,oe.getLocation)())?void 0:a.host)||"unknown"].join(":"):t}();return[[a,t].join("-"),[Zt,r].join("-"),s,u].join("/")}function An(a,t){return a.filter(r=>t.includes(r)).length===a.length}function pi(a){return Object.fromEntries(a.entries())}function Ms(a){return new Map(Object.entries(a))}function Jn(a=F.FIVE_MINUTES,t){const r=(0,F.toMiliseconds)(a||F.FIVE_MINUTES);let s,u,l;return{resolve:f=>{l&&s&&(clearTimeout(l),s(f))},reject:f=>{l&&u&&(clearTimeout(l),u(f))},done:()=>new Promise((f,g)=>{l=setTimeout(()=>{g(new Error(t))},r),s=f,u=g})}}function gi(a,t,r){return new Promise(function(){var s=(0,v.Z)(function*(u,l){const f=setTimeout(()=>l(new Error(r)),t);try{u(yield a)}catch(g){l(g)}clearTimeout(f)});return function(u,l){return s.apply(this,arguments)}}())}function js(a,t){if("string"==typeof t&&t.startsWith(`${a}:`))return t;if("topic"===a.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===a.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${a}`)}function $s(a){const[t,r]=a.split(":"),s={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)s.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);s.id=Number(r)}return s}function or(a,t){return(0,F.fromMiliseconds)((t||Date.now())+(0,F.toMiliseconds)(a))}function un(a){return Date.now()>=(0,F.toMiliseconds)(a)}function It(a,t){return`${a}${t?`:${t}`:""}`}function Gr(a=[],t=[]){return[...new Set([...a,...t])]}function es(){return(es=(0,v.Z)(function*({id:a,topic:t,wcDeepLink:r}){try{if(!r)return;let u=("string"==typeof r?JSON.parse(r):r)?.href;if("string"!=typeof u)return;u.endsWith("/")&&(u=u.slice(0,-1));const l=`${u}/wc?requestId=${a}&sessionTopic=${t}`,f=mt();f===ke.browser?l.startsWith("https://")?window.open(l,"_blank","noreferrer noopener"):window.open(l,"_self","noreferrer noopener"):f===ke.reactNative&&typeof(null==global?void 0:global.Linking)<"u"&&(yield global.Linking.openURL(l))}catch(s){console.error(s)}})).apply(this,arguments)}function Ai(){return(Ai=(0,v.Z)(function*(a,t){try{return(yield a.getItem(t))||(_t()?localStorage.getItem(t):void 0)}catch(r){console.error(r)}})).apply(this,arguments)}function ts(a){return a?.relay||{protocol:"irn"}}function yi(a){const t=_e.iO[a];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${a}`);return t}var Ci=Object.defineProperty,Qn=Object.defineProperties,ha=Object.getOwnPropertyDescriptors,Ls=Object.getOwnPropertySymbols,En=Object.prototype.hasOwnProperty,da=Object.prototype.propertyIsEnumerable,qs=(a,t,r)=>t in a?Ci(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;function ya(a,t="-"){const r={},s="relay"+t;return Object.keys(a).forEach(u=>{if(u.startsWith(s)){const l=u.replace(s,"");r[l]=a[u]}}),r}function In(a){const t=(a=(a=a.includes("wc://")?a.replace("wc://",""):a).includes("wc:")?a.replace("wc:",""):a).indexOf(":"),r=-1!==a.indexOf("?")?a.indexOf("?"):void 0,s=a.substring(0,t),u=a.substring(t+1,r).split("@"),l=typeof r<"u"?a.substring(r):"",f=D.parse(l);return{protocol:s,topic:Us(u[0]),version:parseInt(u[1],10),symKey:f.symKey,relay:ya(f),expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function Us(a){return a.startsWith("//")?a.substring(2):a}function Xn(a){const t=[];return a.forEach(r=>{const[s,u]=r.split(":");t.push(`${s}:${u}`)}),t}function Qe(a){return a.includes(":")}function me(a){return Qe(a)?a.split(":")[0]:a}const rr={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ar={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function B(a,t){const{message:r,code:s}=ar[a];return{message:t?`${r} ${t}`:r,code:s}}function Ce(a,t){const{message:r,code:s}=rr[a];return{message:t?`${r} ${t}`:r,code:s}}function zt(a,t){return!!Array.isArray(a)&&(!(typeof t<"u"&&a.length)||a.every(t))}function Dt(a){return Object.getPrototypeOf(a)===Object.prototype&&Object.keys(a).length}function at(a){return typeof a>"u"}function Ge(a,t){return!(!t||!at(a))||"string"==typeof a&&!!a.trim().length}function Jr(a,t){return!(!t||!at(a))||"number"==typeof a&&!isNaN(a)}function Qr(a){return!(!Ge(a,!1)||!a.includes(":"))&&2===a.split(":").length}function Pu(a){let t=!0;return zt(a)?a.length&&(t=a.every(r=>Ge(r,!1))):t=!1,t}function Ou(a,t){let r=null;return Object.values(a).forEach(s=>{if(r)return;const u=function Cd(a,t){let r=null;return Pu(a?.methods)?Pu(a?.events)||(r=Ce("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Ce("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(s,`${t}, namespace`);u&&(r=u)}),r}function Bs(a,t){let r=null;if(a&&Dt(a)){const s=Ou(a,t);s&&(r=s);const u=function Ad(a,t){let r=null;return Object.values(a).forEach(s=>{if(r)return;const u=function Nd(a,t){let r=null;return zt(a)?a.forEach(s=>{r||function Ks(a){if(Ge(a,!1)&&a.includes(":")){const t=a.split(":");if(3===t.length)return!!t[2]&&Qr(t[0]+":"+t[1])}return!1}(s)||(r=Ce("UNSUPPORTED_ACCOUNTS",`${t}, account ${s} should be a string and conform to "namespace:chainId:address" format`))}):r=Ce("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(s?.accounts,`${t} namespace`);u&&(r=u)}),r}(a,t);u&&(r=u)}else r=B("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Ru(a){return Ge(a.protocol,!0)}function Mr(a){return typeof a<"u"&&null!==typeof a}function Nu(a,t){return!(!Qr(t)||!function wa(a){const t=[];return Object.values(a).forEach(r=>{t.push(...Xn(r.accounts))}),t}(a).includes(t))}function xa(a,t,r){let s=null;const u=function Zd(a){const t={};return Object.keys(a).forEach(r=>{var s;r.includes(":")?t[r]=a[r]:null==(s=a[r].chains)||s.forEach(u=>{t[u]={methods:a[r].methods,events:a[r].events}})}),t}(a),l=function zd(a){const t={};return Object.keys(a).forEach(r=>{r.includes(":")?t[r]=a[r]:Xn(a[r].accounts)?.forEach(u=>{t[u]={accounts:a[r].accounts.filter(l=>l.includes(`${u}:`)),methods:a[r].methods,events:a[r].events}})}),t}(t),f=Object.keys(u),g=Object.keys(l),w=Au(Object.keys(a)),m=Au(Object.keys(t)),E=w.filter(N=>!m.includes(N));return E.length&&(s=B("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${E.toString()}\n      Received: ${Object.keys(t).toString()}`)),An(f,g)||(s=B("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${f.toString()}\n      Approved: ${g.toString()}`)),Object.keys(t).forEach(N=>{if(!N.includes(":")||s)return;const M=Xn(t[N].accounts);M.includes(N)||(s=B("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${N}\n        Required: ${N}\n        Approved: ${M.toString()}`))}),f.forEach(N=>{s||(An(u[N].methods,l[N].methods)?An(u[N].events,l[N].events)||(s=B("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${N}`)):s=B("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${N}`))}),s}function Au(a){return[...new Set(a.map(t=>t.includes(":")?t.split(":")[0]:t))]}function Cu(){const a=mt();return new Promise(t=>{switch(a){case ke.browser:t(function Kd(){return _t()&&navigator?.onLine}());break;case ke.reactNative:t(function Bd(){return Ea.apply(this,arguments)}());break;default:t(!0)}})}function Ea(){return(Ea=(0,v.Z)(function*(){return!(vt()&&typeof global<"u"&&null!=global&&global.NetInfo)||(yield null==global?void 0:global.NetInfo.fetch())?.isConnected})).apply(this,arguments)}const Ia={};class Hs{static get(t){return Ia[t]}static set(t,r){Ia[t]=r}static delete(t){delete Ia[t]}}const Jd=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Qd=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Yd=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Xd(a,t){if(!("__proto__"===a||"constructor"===a&&t&&"object"==typeof t&&"prototype"in t))return t;!function ep(a){console.warn(`[destr] Dropping "${a}" key to prevent prototype pollution.`)}(a)}function is(a,t={}){if("string"!=typeof a)return a;const r=a.trim();if('"'===a[0]&&a.endsWith('"')&&!a.includes("\\"))return r.slice(1,-1);if(r.length<=9){const s=r.toLowerCase();if("true"===s)return!0;if("false"===s)return!1;if("undefined"===s)return;if("null"===s)return null;if("nan"===s)return Number.NaN;if("infinity"===s)return Number.POSITIVE_INFINITY;if("-infinity"===s)return Number.NEGATIVE_INFINITY}if(!Yd.test(a)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return a}try{if(Jd.test(a)||Qd.test(a)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(a,Xd)}return JSON.parse(a)}catch(s){if(t.strict)throw s;return a}}function hr(a,...t){try{return function tp(a){return a&&"function"==typeof a.then?a:Promise.resolve(a)}(a(...t))}catch(r){return Promise.reject(r)}}function Vs(a){if(function rp(a){const t=typeof a;return null===a||"object"!==t&&"function"!==t}(a))return String(a);if(function np(a){const t=Object.getPrototypeOf(a);return!t||t.isPrototypeOf(Object)}(a)||Array.isArray(a))return JSON.stringify(a);if("function"==typeof a.toJSON)return Vs(a.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Tu(){if(void 0===typeof Buffer)throw new TypeError("[unstorage] Buffer is not supported!")}const Sa="base64:";function jr(a){return a?a.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function ap(...a){return jr(a.join(":"))}function ss(a){return(a=jr(a))?a+":":""}const up=()=>{const a=new Map;return{name:"memory",options:{},hasItem:t=>a.has(t),getItem:t=>a.get(t)??null,getItemRaw:t=>a.get(t)??null,setItem(t,r){a.set(t,r)},setItemRaw(t,r){a.set(t,r)},removeItem(t){a.delete(t)},getKeys:()=>Array.from(a.keys()),clear(){a.clear()},dispose(){a.clear()}}};function Du(a,t,r){return a.watch?a.watch((s,u)=>t(s,r+u)):()=>{}}function Fu(a){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,v.Z)(function*(a){"function"==typeof a.dispose&&(yield hr(a.dispose))})).apply(this,arguments)}function $r(a){return new Promise((t,r)=>{a.oncomplete=a.onsuccess=()=>t(a.result),a.onabort=a.onerror=()=>r(a.error)})}function Mu(a,t){const r=indexedDB.open(a);r.onupgradeneeded=()=>r.result.createObjectStore(t);const s=$r(r);return(u,l)=>s.then(f=>l(f.transaction(t,u).objectStore(t)))}let Na;function fn(){return Na||(Na=Mu("keyval-store","keyval")),Na}function ju(a,t=fn()){return t("readonly",r=>$r(r.get(a)))}var Tn=te(7630),yp=(a={})=>{const t=a.base&&a.base.length>0?`${a.base}:`:"",r=u=>t+u;let s;return a.dbName&&a.storeName&&(s=Mu(a.dbName,a.storeName)),{name:"idb-keyval",options:a,hasItem:u=>(0,v.Z)(function*(){return!(typeof(yield ju(r(u),s))>"u")})(),getItem:u=>(0,v.Z)(function*(){return(yield ju(r(u),s))??null})(),setItem:(u,l)=>function fp(a,t,r=fn()){return r("readwrite",s=>(s.put(t,a),$r(s.transaction)))}(r(u),l,s),removeItem:u=>function hp(a,t=fn()){return t("readwrite",r=>(r.delete(a),$r(r.transaction)))}(r(u),s),getKeys:()=>function pp(a=fn()){return a("readonly",t=>{if(t.getAllKeys)return $r(t.getAllKeys());const r=[];return function Aa(a,t){return a.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},$r(a.transaction)}(t,s=>r.push(s.key)).then(()=>r)})}(s),clear:()=>function dp(a=fn()){return a("readwrite",t=>(t.clear(),$r(t.transaction)))}(s)}};class mp{constructor(){this.indexedDb=function lp(a={}){const t={mounts:{"":a.driver||up()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=m=>{for(const E of t.mountpoints)if(m.startsWith(E))return{base:E,relativeKey:m.slice(E.length),driver:t.mounts[E]};return{base:"",relativeKey:m,driver:t.mounts[""]}},s=(m,E)=>t.mountpoints.filter(N=>N.startsWith(m)||E&&m.startsWith(N)).map(N=>({relativeBase:m.length>N.length?m.slice(N.length):void 0,mountpoint:N,driver:t.mounts[N]})),u=(m,E)=>{if(t.watching){E=jr(E);for(const N of t.watchListeners)N(m,E)}},l=function(){var m=(0,v.Z)(function*(){if(!t.watching){t.watching=!0;for(const E in t.mounts)t.unwatch[E]=yield Du(t.mounts[E],u,E)}});return function(){return m.apply(this,arguments)}}(),f=function(){var m=(0,v.Z)(function*(){if(t.watching){for(const E in t.unwatch)yield t.unwatch[E]();t.unwatch={},t.watching=!1}});return function(){return m.apply(this,arguments)}}(),g=(m,E,N)=>{const M=new Map,J=U=>{let le=M.get(U.base);return le||(le={driver:U.driver,base:U.base,items:[]},M.set(U.base,le)),le};for(const U of m){const le="string"==typeof U,pe=jr(le?U:U.key),Te=le?void 0:U.value,Ft=le||!U.options?E:{...E,...U.options},Ke=r(pe);J(Ke).items.push({key:pe,value:Te,relativeKey:Ke.relativeKey,options:Ft})}return Promise.all([...M.values()].map(U=>N(U))).then(U=>U.flat())},w={hasItem(m,E={}){m=jr(m);const{relativeKey:N,driver:M}=r(m);return hr(M.hasItem,N,E)},getItem(m,E={}){m=jr(m);const{relativeKey:N,driver:M}=r(m);return hr(M.getItem,N,E).then(J=>is(J))},getItems:(m,E)=>g(m,E,N=>N.driver.getItems?hr(N.driver.getItems,N.items.map(M=>({key:M.relativeKey,options:M.options})),E).then(M=>M.map(J=>({key:ap(N.base,J.key),value:is(J.value)}))):Promise.all(N.items.map(M=>hr(N.driver.getItem,M.relativeKey,M.options).then(J=>({key:M.key,value:is(J)}))))),getItemRaw(m,E={}){m=jr(m);const{relativeKey:N,driver:M}=r(m);return M.getItemRaw?hr(M.getItemRaw,N,E):hr(M.getItem,N,E).then(J=>function sp(a){return"string"==typeof a&&a.startsWith(Sa)?(Tu(),Buffer.from(a.slice(7),"base64")):a}(J))},setItem:(m,E,N={})=>(0,v.Z)(function*(){if(void 0===E)return w.removeItem(m);m=jr(m);const{relativeKey:M,driver:J}=r(m);J.setItem&&(yield hr(J.setItem,M,Vs(E),N),J.watch||u("update",m))})(),setItems:(m,E)=>(0,v.Z)(function*(){yield g(m,E,function(){var N=(0,v.Z)(function*(M){if(M.driver.setItems)return hr(M.driver.setItems,M.items.map(J=>({key:J.relativeKey,value:Vs(J.value),options:J.options})),E);M.driver.setItem&&(yield Promise.all(M.items.map(J=>hr(M.driver.setItem,J.relativeKey,Vs(J.value),J.options))))});return function(M){return N.apply(this,arguments)}}())})(),setItemRaw:(m,E,N={})=>(0,v.Z)(function*(){if(void 0===E)return w.removeItem(m,N);m=jr(m);const{relativeKey:M,driver:J}=r(m);if(J.setItemRaw)yield hr(J.setItemRaw,M,E,N);else{if(!J.setItem)return;yield hr(J.setItem,M,function ip(a){if("string"==typeof a)return a;Tu();const t=Buffer.from(a).toString("base64");return Sa+t}(E),N)}J.watch||u("update",m)})(),removeItem:(m,E={})=>(0,v.Z)(function*(){"boolean"==typeof E&&(E={removeMeta:E}),m=jr(m);const{relativeKey:N,driver:M}=r(m);M.removeItem&&(yield hr(M.removeItem,N,E),(E.removeMeta||E.removeMata)&&(yield hr(M.removeItem,N+"$",E)),M.watch||u("remove",m))})(),getMeta:(m,E={})=>(0,v.Z)(function*(){"boolean"==typeof E&&(E={nativeOnly:E}),m=jr(m);const{relativeKey:N,driver:M}=r(m),J=Object.create(null);if(M.getMeta&&Object.assign(J,yield hr(M.getMeta,N,E)),!E.nativeOnly){const U=yield hr(M.getItem,N+"$",E).then(le=>is(le));U&&"object"==typeof U&&("string"==typeof U.atime&&(U.atime=new Date(U.atime)),"string"==typeof U.mtime&&(U.mtime=new Date(U.mtime)),Object.assign(J,U))}return J})(),setMeta(m,E,N={}){return this.setItem(m+"$",E,N)},removeMeta(m,E={}){return this.removeItem(m+"$",E)},getKeys:(m,E={})=>(0,v.Z)(function*(){m=ss(m);const N=s(m,!0);let M=[];const J=[];for(const U of N){const pe=(yield hr(U.driver.getKeys,U.relativeBase,E)).map(Te=>U.mountpoint+jr(Te)).filter(Te=>!M.some(Ft=>Te.startsWith(Ft)));J.push(...pe),M=[U.mountpoint,...M.filter(Te=>!Te.startsWith(U.mountpoint))]}return J.filter(m?U=>U.startsWith(m)&&!U.endsWith("$"):U=>!U.endsWith("$"))})(),clear:(m,E={})=>(0,v.Z)(function*(){m=ss(m),yield Promise.all(s(m,!1).map(function(){var N=(0,v.Z)(function*(M){if(M.driver.clear)return hr(M.driver.clear,M.relativeBase,E);if(M.driver.removeItem){const J=yield M.driver.getKeys(M.relativeBase||"",E);return Promise.all(J.map(U=>M.driver.removeItem(U,E)))}});return function(M){return N.apply(this,arguments)}}()))})(),dispose:()=>(0,v.Z)(function*(){yield Promise.all(Object.values(t.mounts).map(m=>Fu(m)))})(),watch:m=>(0,v.Z)(function*(){return yield l(),t.watchListeners.push(m),(0,v.Z)(function*(){t.watchListeners=t.watchListeners.filter(E=>E!==m),0===t.watchListeners.length&&(yield f())})})(),unwatch:()=>(0,v.Z)(function*(){t.watchListeners=[],yield f()})(),mount(m,E){if((m=ss(m))&&t.mounts[m])throw new Error(`already mounted at ${m}`);return m&&(t.mountpoints.push(m),t.mountpoints.sort((N,M)=>M.length-N.length)),t.mounts[m]=E,t.watching&&Promise.resolve(Du(E,u,m)).then(N=>{t.unwatch[m]=N}).catch(console.error),w},unmount:(m,E=!0)=>(0,v.Z)(function*(){(m=ss(m))&&t.mounts[m]&&(t.watching&&m in t.unwatch&&(t.unwatch[m](),delete t.unwatch[m]),E&&(yield Fu(t.mounts[m])),t.mountpoints=t.mountpoints.filter(N=>N!==m),delete t.mounts[m])})(),getMount(m=""){m=jr(m)+":";const E=r(m);return{driver:E.driver,base:E.base}},getMounts:(m="",E={})=>(m=jr(m),s(m,E.parents).map(M=>({driver:M.driver,base:M.mountpoint})))};return w}({driver:yp({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}getKeys(){var t=this;return(0,v.Z)(function*(){return t.indexedDb.getKeys()})()}getEntries(){var t=this;return(0,v.Z)(function*(){return(yield t.indexedDb.getItems(yield t.indexedDb.getKeys())).map(r=>[r.key,r.value])})()}getItem(t){var r=this;return(0,v.Z)(function*(){const s=yield r.indexedDb.getItem(t);if(null!==s)return s})()}setItem(t,r){var s=this;return(0,v.Z)(function*(){yield s.indexedDb.setItem(t,(0,Tn.u)(r))})()}removeItem(t){var r=this;return(0,v.Z)(function*(){yield r.indexedDb.removeItem(t)})()}}var Ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ws={exports:{}};function bp(a){var t;return[a[0],(0,Tn.D)(null!=(t=a[1])?t:"")]}!function(){let a;function t(){}a=t,a.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},a.prototype.setItem=function(r,s){this[r]=String(s)},a.prototype.removeItem=function(r){delete this[r]},a.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},a.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},a.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),Ws.exports=typeof Ca<"u"&&Ca.localStorage?Ca.localStorage:typeof window<"u"&&window.localStorage?window.localStorage:new t}();class wp{constructor(){this.localStorage=Ws.exports}getKeys(){var t=this;return(0,v.Z)(function*(){return Object.keys(t.localStorage)})()}getEntries(){var t=this;return(0,v.Z)(function*(){return Object.entries(t.localStorage).map(bp)})()}getItem(t){var r=this;return(0,v.Z)(function*(){const s=r.localStorage.getItem(t);if(null!==s)return(0,Tn.D)(s)})()}setItem(t,r){var s=this;return(0,v.Z)(function*(){s.localStorage.setItem(t,(0,Tn.u)(r))})()}removeItem(t){var r=this;return(0,v.Z)(function*(){r.localStorage.removeItem(t)})()}}const Ep=function(){var a=(0,v.Z)(function*(t,r,s){const u="wc_storage_version",l=yield r.getItem(u);if(l&&l>=1)return void s(r);const f=yield t.getKeys();if(!f.length)return void s(r);const g=[];for(;f.length;){const w=f.shift();if(!w)continue;const m=w.toLowerCase();if(m.includes("wc@")||m.includes("walletconnect")||m.includes("wc_")||m.includes("wallet_connect")){const E=yield t.getItem(w);yield r.setItem(w,E),g.push(w)}}yield r.setItem(u,1),s(r),Ip(t,g)});return function(r,s,u){return a.apply(this,arguments)}}(),Ip=function(){var a=(0,v.Z)(function*(t,r){r.length&&r.forEach(function(){var s=(0,v.Z)(function*(u){yield t.removeItem(u)});return function(u){return s.apply(this,arguments)}}())});return function(r,s){return a.apply(this,arguments)}}();class Sp{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const t=new wp;this.storage=t;try{const r=new mp;Ep(t,r,this.setInitialized)}catch{this.initialized=!0}}getKeys(){var t=this;return(0,v.Z)(function*(){return yield t.initialize(),t.storage.getKeys()})()}getEntries(){var t=this;return(0,v.Z)(function*(){return yield t.initialize(),t.storage.getEntries()})()}getItem(t){var r=this;return(0,v.Z)(function*(){return yield r.initialize(),r.storage.getItem(t)})()}setItem(t,r){var s=this;return(0,v.Z)(function*(){return yield s.initialize(),s.storage.setItem(t,r)})()}removeItem(t){var r=this;return(0,v.Z)(function*(){return yield r.initialize(),r.storage.removeItem(t)})()}initialize(){var t=this;return(0,v.Z)(function*(){t.initialized||(yield new Promise(r=>{const s=setInterval(()=>{t.initialized&&(clearInterval(s),r())},20)}))})()}}var os=te(986),Le=te(7714),Mi=te(2108);class Pp extends Mi.q{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Op extends Mi.q{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}}class Rp{constructor(t,r){this.logger=t,this.core=r}}class Np extends Mi.q{constructor(t,r){super(),this.relayer=t,this.logger=r}}class Ap extends Mi.q{constructor(t){super()}}class Cp{constructor(t,r,s,u){this.core=t,this.logger=r,this.name=s}}class Tp extends Mi.q{constructor(t,r){super(),this.relayer=t,this.logger=r}}class Dp extends Mi.q{constructor(t,r){super(),this.core=t,this.logger=r}}class Fp{constructor(t,r){this.projectId=t,this.logger=r}}class Mp{constructor(t,r){this.projectId=t,this.logger=r}}class jp{constructor(t){this.opts=t,this.protocol="wc",this.version=2}}class $p{constructor(t){this.client=t}}var Lu=te(5972);const Uu="base64url",Up="utf8",zp=":",kp="did",Kp="key",Zu="base58btc",Bp="z",Hp="K36";var Wp=te(1376),Ta=te(878),Da=te(2269);function Js(a){return(0,Ta.B)((0,Da.m)((0,Tn.u)(a),Up),Uu)}function zu(a){const t=(0,Da.m)(Hp,Zu),r=Bp+(0,Ta.B)((0,Wp.z)([t,a]),Zu);return[kp,Kp,r].join(zp)}function Gp(a){return(0,Ta.B)(a,Uu)}function ku(a=(0,ze.randomBytes)(32)){return Lu._w(a)}function Fa(){return(Fa=(0,v.Z)(function*(a,t,r,s,u=(0,F.fromMiliseconds)(Date.now())){const l={alg:"EdDSA",typ:"JWT"},w={iss:zu(s.publicKey),sub:a,aud:t,iat:u,exp:u+r},m=function Qp(a){return(0,Da.m)([Js(a.header),Js(a.payload)].join("."),"utf8")}({header:l,payload:w});return function Yp(a){return[Js(a.header),Js(a.payload),Gp(a.signature)].join(".")}({header:l,payload:w,signature:Lu.Xx(s.secretKey,m)})})).apply(this,arguments)}te(2768);var be=te(6446);class Dn extends be.IJsonRpcProvider{constructor(t){super(t),this.events=new Ze.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}connect(t=this.connection){var r=this;return(0,v.Z)(function*(){yield r.open(t)})()}disconnect(){var t=this;return(0,v.Z)(function*(){yield t.close()})()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}request(t,r){var s=this;return(0,v.Z)(function*(){return s.requestStrict((0,be.formatJsonRpcRequest)(t.method,t.params||[],t.id||(0,be.getBigIntRpcId)().toString()),r)})()}requestStrict(t,r){var s=this;return(0,v.Z)(function*(){return new Promise(function(){var u=(0,v.Z)(function*(l,f){if(!s.connection.connected)try{yield s.open()}catch(g){f(g)}s.events.on(`${t.id}`,g=>{(0,be.isJsonRpcError)(g)?f(g.error):l(g.result)});try{yield s.connection.send(t,r)}catch(g){f(g)}});return function(l,f){return u.apply(this,arguments)}}())})()}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),(0,be.isJsonRpcResponse)(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&3e3===t.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}open(t=this.connection){var r=this;return(0,v.Z)(function*(){r.connection===t&&r.connection.connected||(r.connection.connected&&r.close(),"string"==typeof t&&(yield r.connection.open(t),t=r.connection),r.connection=r.setConnection(t),yield r.connection.open(),r.registerEventListeners(),r.events.emit("connect"))})()}close(){var t=this;return(0,v.Z)(function*(){yield t.connection.close()})()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Ku=a=>a.split("?")[0],rg=typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:te(3569);class ng{constructor(t){if(this.url=t,this.events=new Ze.EventEmitter,this.registering=!1,!(0,be.isWsUrl)(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}open(t=this.url){var r=this;return(0,v.Z)(function*(){yield r.register(t)})()}close(){var t=this;return(0,v.Z)(function*(){return new Promise((r,s)=>{typeof t.socket>"u"?s(new Error("Connection already closed")):(t.socket.onclose=u=>{t.onClose(u),r()},t.socket.close())})})()}send(t){var r=this;return(0,v.Z)(function*(){typeof r.socket>"u"&&(r.socket=yield r.register());try{r.socket.send((0,Tn.u)(t))}catch(s){r.onError(t.id,s)}})()}register(t=this.url){if(!(0,be.isWsUrl)(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,u)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),u(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return u(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,s)=>{const u=new URLSearchParams(t).get("origin"),l=(0,be.isReactNative)()?{headers:{origin:u}}:{rejectUnauthorized:!(0,be.isLocalhostUrl)(t)},f=new rg(t,[],l);typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?f.onerror=g=>{s(this.emitError(g.error))}:f.on("error",g=>{s(this.emitError(g))}),f.onopen=()=>{this.onOpen(f),r(f)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r="string"==typeof t.data?(0,Tn.D)(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const s=this.parseError(r),u=s.message||s.toString(),l=(0,be.formatJsonRpcError)(t,u);this.events.emit("payload",l)}parseError(t,r=this.url){return(0,be.parseConnectionError)(t,Ku(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(t){const r=this.parseError(new Error(t?.message||`WebSocket connection failed for host: ${Ku(this.url)}`));return this.events.emit("register_error",r),r}}var ig=te(2650),sg=te.n(ig),og=te(9557),ag=te.n(og),lg=function cg(a,t){if(a.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var u=0;u<a.length;u++){var l=a.charAt(u),f=l.charCodeAt(0);if(255!==r[f])throw new TypeError(l+" is ambiguous");r[f]=u}var g=a.length,w=a.charAt(0),m=Math.log(g)/Math.log(256),E=Math.log(256)/Math.log(g);function M(U){if("string"!=typeof U)throw new TypeError("Expected String");if(0===U.length)return new Uint8Array;var le=0;if(" "!==U[le]){for(var pe=0,Te=0;U[le]===w;)pe++,le++;for(var Ft=(U.length-le)*m+1>>>0,Ke=new Uint8Array(Ft);U[le];){var rt=r[U.charCodeAt(le)];if(255===rt)return;for(var Ve=0,ut=Ft-1;(0!==rt||Ve<Te)&&-1!==ut;ut--,Ve++)Ke[ut]=(rt+=g*Ke[ut]>>>0)%256>>>0,rt=rt/256>>>0;if(0!==rt)throw new Error("Non-zero carry");Te=Ve,le++}if(" "!==U[le]){for(var lt=Ft-Te;lt!==Ft&&0===Ke[lt];)lt++;for(var Mt=new Uint8Array(pe+(Ft-lt)),dn=pe;lt!==Ft;)Mt[dn++]=Ke[lt++];return Mt}}}return{encode:function N(U){if(U instanceof Uint8Array||(ArrayBuffer.isView(U)?U=new Uint8Array(U.buffer,U.byteOffset,U.byteLength):Array.isArray(U)&&(U=Uint8Array.from(U))),!(U instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===U.length)return"";for(var le=0,pe=0,Te=0,Ft=U.length;Te!==Ft&&0===U[Te];)Te++,le++;for(var Ke=(Ft-Te)*E+1>>>0,rt=new Uint8Array(Ke);Te!==Ft;){for(var Ve=U[Te],ut=0,lt=Ke-1;(0!==Ve||ut<pe)&&-1!==lt;lt--,ut++)rt[lt]=(Ve+=256*rt[lt]>>>0)%g>>>0,Ve=Ve/g>>>0;if(0!==Ve)throw new Error("Non-zero carry");pe=ut,Te++}for(var Mt=Ke-pe;Mt!==Ke&&0===rt[Mt];)Mt++;for(var dn=w.repeat(le);Mt<Ke;++Mt)dn+=a.charAt(rt[Mt]);return dn},decodeUnsafe:M,decode:function J(U){var le=M(U);if(le)return le;throw new Error(`Non-${t} character`)}}};const Hu=a=>{if(a instanceof Uint8Array&&"Uint8Array"===a.constructor.name)return a;if(a instanceof ArrayBuffer)return new Uint8Array(a);if(ArrayBuffer.isView(a))return new Uint8Array(a.buffer,a.byteOffset,a.byteLength);throw new Error("Unknown type, must be binary type")};class dg{constructor(t,r,s){this.name=t,this.prefix=r,this.baseEncode=s}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class pg{constructor(t,r,s){if(this.name=t,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return Vu(this,t)}}class gg{constructor(t){this.decoders=t}or(t){return Vu(this,t)}decode(t){const s=this.decoders[t[0]];if(s)return s.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Vu=(a,t)=>new gg({...a.decoders||{[a.prefix]:a},...t.decoders||{[t.prefix]:t}});class yg{constructor(t,r,s,u){this.name=t,this.prefix=r,this.baseEncode=s,this.baseDecode=u,this.encoder=new dg(t,r,s),this.decoder=new pg(t,r,u)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Qs=({name:a,prefix:t,encode:r,decode:s})=>new yg(a,t,r,s),as=({prefix:a,name:t,alphabet:r})=>{const{encode:s,decode:u}=lg(r,t);return Qs({prefix:a,name:t,encode:s,decode:l=>Hu(u(l))})},mr=({name:a,prefix:t,bitsPerChar:r,alphabet:s})=>Qs({prefix:t,name:a,encode:u=>((a,t,r)=>{const s="="===t[t.length-1],u=(1<<r)-1;let l="",f=0,g=0;for(let w=0;w<a.length;++w)for(g=g<<8|a[w],f+=8;f>r;)f-=r,l+=t[u&g>>f];if(f&&(l+=t[u&g<<r-f]),s)for(;l.length*r&7;)l+="=";return l})(u,s,r),decode:u=>((a,t,r,s)=>{const u={};for(let E=0;E<t.length;++E)u[t[E]]=E;let l=a.length;for(;"="===a[l-1];)--l;const f=new Uint8Array(l*r/8|0);let g=0,w=0,m=0;for(let E=0;E<l;++E){const N=u[a[E]];if(void 0===N)throw new SyntaxError(`Non-${s} character`);w=w<<r|N,g+=r,g>=8&&(g-=8,f[m++]=255&w>>g)}if(g>=r||255&w<<8-g)throw new SyntaxError("Unexpected end of data");return f})(u,s,r,a)}),mg=Qs({prefix:"\0",name:"identity",encode:a=>(a=>(new TextDecoder).decode(a))(a),decode:a=>(a=>(new TextEncoder).encode(a))(a)});var bg=Object.freeze({__proto__:null,identity:mg});const wg=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var xg=Object.freeze({__proto__:null,base2:wg});const Eg=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ig=Object.freeze({__proto__:null,base8:Eg});const Sg=as({prefix:"9",name:"base10",alphabet:"0123456789"});var Pg=Object.freeze({__proto__:null,base10:Sg});const Og=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Rg=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ng=Object.freeze({__proto__:null,base16:Og,base16upper:Rg});const Ag=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Cg=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Tg=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Dg=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Fg=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Mg=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),jg=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),$g=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Lg=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var qg=Object.freeze({__proto__:null,base32:Ag,base32upper:Cg,base32pad:Tg,base32padupper:Dg,base32hex:Fg,base32hexupper:Mg,base32hexpad:jg,base32hexpadupper:$g,base32z:Lg});const Ug=as({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Zg=as({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zg=Object.freeze({__proto__:null,base36:Ug,base36upper:Zg});const kg=as({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Kg=as({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Bg=Object.freeze({__proto__:null,base58btc:kg,base58flickr:Kg});const Hg=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Vg=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wg=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Gg=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Jg=Object.freeze({__proto__:null,base64:Hg,base64pad:Vg,base64url:Wg,base64urlpad:Gg});const Wu=Array.from("\u{1f680}\u{1fa90}\u2604\u{1f6f0}\u{1f30c}\u{1f311}\u{1f312}\u{1f313}\u{1f314}\u{1f315}\u{1f316}\u{1f317}\u{1f318}\u{1f30d}\u{1f30f}\u{1f30e}\u{1f409}\u2600\u{1f4bb}\u{1f5a5}\u{1f4be}\u{1f4bf}\u{1f602}\u2764\u{1f60d}\u{1f923}\u{1f60a}\u{1f64f}\u{1f495}\u{1f62d}\u{1f618}\u{1f44d}\u{1f605}\u{1f44f}\u{1f601}\u{1f525}\u{1f970}\u{1f494}\u{1f496}\u{1f499}\u{1f622}\u{1f914}\u{1f606}\u{1f644}\u{1f4aa}\u{1f609}\u263a\u{1f44c}\u{1f917}\u{1f49c}\u{1f614}\u{1f60e}\u{1f607}\u{1f339}\u{1f926}\u{1f389}\u{1f49e}\u270c\u2728\u{1f937}\u{1f631}\u{1f60c}\u{1f338}\u{1f64c}\u{1f60b}\u{1f497}\u{1f49a}\u{1f60f}\u{1f49b}\u{1f642}\u{1f493}\u{1f929}\u{1f604}\u{1f600}\u{1f5a4}\u{1f603}\u{1f4af}\u{1f648}\u{1f447}\u{1f3b6}\u{1f612}\u{1f92d}\u2763\u{1f61c}\u{1f48b}\u{1f440}\u{1f62a}\u{1f611}\u{1f4a5}\u{1f64b}\u{1f61e}\u{1f629}\u{1f621}\u{1f92a}\u{1f44a}\u{1f973}\u{1f625}\u{1f924}\u{1f449}\u{1f483}\u{1f633}\u270b\u{1f61a}\u{1f61d}\u{1f634}\u{1f31f}\u{1f62c}\u{1f643}\u{1f340}\u{1f337}\u{1f63b}\u{1f613}\u2b50\u2705\u{1f97a}\u{1f308}\u{1f608}\u{1f918}\u{1f4a6}\u2714\u{1f623}\u{1f3c3}\u{1f490}\u2639\u{1f38a}\u{1f498}\u{1f620}\u261d\u{1f615}\u{1f33a}\u{1f382}\u{1f33b}\u{1f610}\u{1f595}\u{1f49d}\u{1f64a}\u{1f639}\u{1f5e3}\u{1f4ab}\u{1f480}\u{1f451}\u{1f3b5}\u{1f91e}\u{1f61b}\u{1f534}\u{1f624}\u{1f33c}\u{1f62b}\u26bd\u{1f919}\u2615\u{1f3c6}\u{1f92b}\u{1f448}\u{1f62e}\u{1f646}\u{1f37b}\u{1f343}\u{1f436}\u{1f481}\u{1f632}\u{1f33f}\u{1f9e1}\u{1f381}\u26a1\u{1f31e}\u{1f388}\u274c\u270a\u{1f44b}\u{1f630}\u{1f928}\u{1f636}\u{1f91d}\u{1f6b6}\u{1f4b0}\u{1f353}\u{1f4a2}\u{1f91f}\u{1f641}\u{1f6a8}\u{1f4a8}\u{1f92c}\u2708\u{1f380}\u{1f37a}\u{1f913}\u{1f619}\u{1f49f}\u{1f331}\u{1f616}\u{1f476}\u{1f974}\u25b6\u27a1\u2753\u{1f48e}\u{1f4b8}\u2b07\u{1f628}\u{1f31a}\u{1f98b}\u{1f637}\u{1f57a}\u26a0\u{1f645}\u{1f61f}\u{1f635}\u{1f44e}\u{1f932}\u{1f920}\u{1f927}\u{1f4cc}\u{1f535}\u{1f485}\u{1f9d0}\u{1f43e}\u{1f352}\u{1f617}\u{1f911}\u{1f30a}\u{1f92f}\u{1f437}\u260e\u{1f4a7}\u{1f62f}\u{1f486}\u{1f446}\u{1f3a4}\u{1f647}\u{1f351}\u2744\u{1f334}\u{1f4a3}\u{1f438}\u{1f48c}\u{1f4cd}\u{1f940}\u{1f922}\u{1f445}\u{1f4a1}\u{1f4a9}\u{1f450}\u{1f4f8}\u{1f47b}\u{1f910}\u{1f92e}\u{1f3bc}\u{1f975}\u{1f6a9}\u{1f34e}\u{1f34a}\u{1f47c}\u{1f48d}\u{1f4e3}\u{1f942}"),Qg=Wu.reduce((a,t,r)=>(a[r]=t,a),[]),Yg=Wu.reduce((a,t,r)=>(a[t.codePointAt(0)]=r,a),[]),ty=Qs({prefix:"\u{1f680}",name:"base256emoji",encode:function Xg(a){return a.reduce((t,r)=>t+Qg[r],"")},decode:function ey(a){const t=[];for(const r of a){const s=Yg[r.codePointAt(0)];if(void 0===s)throw new Error(`Non-base256emoji character: ${r}`);t.push(s)}return new Uint8Array(t)}});var ry=Object.freeze({__proto__:null,base256emoji:ty}),Gu=128,sy=-128,oy=Math.pow(2,31),cy=128,Qu=127,uy=Math.pow(2,7),ly=Math.pow(2,14),fy=Math.pow(2,21),hy=Math.pow(2,28),dy=Math.pow(2,35),py=Math.pow(2,42),gy=Math.pow(2,49),yy=Math.pow(2,56),vy=Math.pow(2,63),my={encode:function Ju(a,t,r){t=t||[];for(var s=r=r||0;a>=oy;)t[r++]=255&a|Gu,a/=128;for(;a&sy;)t[r++]=255&a|Gu,a>>>=7;return t[r]=0|a,Ju.bytes=r-s+1,t},decode:function ja(a,s){var f,r=0,u=0,l=s=s||0,g=a.length;do{if(l>=g)throw ja.bytes=0,new RangeError("Could not decode varint");f=a[l++],r+=u<28?(f&Qu)<<u:(f&Qu)*Math.pow(2,u),u+=7}while(f>=cy);return ja.bytes=l-s,r},encodingLength:function(a){return a<uy?1:a<ly?2:a<fy?3:a<hy?4:a<dy?5:a<py?6:a<gy?7:a<yy?8:a<vy?9:10}},Yu=my;const Xu=(a,t,r=0)=>(Yu.encode(a,t,r),t),el=a=>Yu.encodingLength(a),$a=(a,t)=>{const r=t.byteLength,s=el(a),u=s+el(r),l=new Uint8Array(u+r);return Xu(a,l,0),Xu(r,l,s),l.set(t,u),new by(a,r,t,l)};class by{constructor(t,r,s,u){this.code=t,this.size=r,this.digest=s,this.bytes=u}}const tl=({name:a,code:t,encode:r})=>new wy(a,t,r);class wy{constructor(t,r,s){this.name=t,this.code=r,this.encode=s}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?$a(this.code,r):r.then(s=>$a(this.code,s))}throw Error("Unknown type, must be binary type")}}const rl=a=>function(){var t=(0,v.Z)(function*(r){return new Uint8Array(yield crypto.subtle.digest(a,r))});return function(r){return t.apply(this,arguments)}}(),xy=tl({name:"sha2-256",code:18,encode:rl("SHA-256")}),Ey=tl({name:"sha2-512",code:19,encode:rl("SHA-512")});Object.freeze({__proto__:null,sha256:xy,sha512:Ey});const il=Hu;Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:il,digest:a=>$a(0,il(a))}}),new TextEncoder,new TextDecoder;const sl={...bg,...xg,...Ig,...Pg,...Ng,...qg,...zg,...Bg,...Jg,...ry};function ol(a){return null!=globalThis.Buffer?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):a}function al(a,t,r,s){return{name:a,prefix:t,encoder:{name:a,prefix:t,encode:r},decoder:{decode:s}}}const cl=al("utf8","u",a=>"u"+new TextDecoder("utf8").decode(a),a=>(new TextEncoder).encode(a.substring(1))),La=al("ascii","a",a=>{let t="a";for(let r=0;r<a.length;r++)t+=String.fromCharCode(a[r]);return t},a=>{const t=function Oy(a=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?ol(globalThis.Buffer.allocUnsafe(a)):new Uint8Array(a)}((a=a.substring(1)).length);for(let r=0;r<a.length;r++)t[r]=a.charCodeAt(r);return t}),Ry={utf8:cl,"utf-8":cl,hex:sl.base16,latin1:La,ascii:La,binary:La,...sl},ei="wc@2:core:",Ty={database:":memory:"},ll="client_ed25519_seed",Fy=F.ONE_DAY,qy=F.SIX_HOURS,hl="wss://relay.walletconnect.com",dl="wss://relay.walletconnect.org",Ky=F.ONE_SECOND,hn_created="subscription_created",hn_deleted="subscription_deleted",Qy=1e3*F.FIVE_SECONDS,cs={wc_pairingDelete:{req:{ttl:F.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:F.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:F.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:F.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:F.ONE_DAY,prompt:!1,tag:0},res:{ttl:F.ONE_DAY,prompt:!1,tag:0}}},Yr_expired="expirer_expired",Ua="verify-api",ji="https://verify.walletconnect.com",Za="https://verify.walletconnect.org",iv=[ji,Za];class av{constructor(t,r){var s=this;this.core=t,this.logger=r,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=ei,this.init=(0,v.Z)(function*(){if(!s.initialized){const u=yield s.getKeyChain();typeof u<"u"&&(s.keychain=u),s.initialized=!0}}),this.has=u=>(this.isInitialized(),this.keychain.has(u)),this.set=function(){var u=(0,v.Z)(function*(l,f){s.isInitialized(),s.keychain.set(l,f),yield s.persist()});return function(l,f){return u.apply(this,arguments)}}(),this.get=u=>{this.isInitialized();const l=this.keychain.get(u);if(typeof l>"u"){const{message:f}=B("NO_MATCHING_KEY",`${this.name}: ${u}`);throw new Error(f)}return l},this.del=function(){var u=(0,v.Z)(function*(l){s.isInitialized(),s.keychain.delete(l),yield s.persist()});return function(l){return u.apply(this,arguments)}}(),this.core=t,this.logger=(0,Le.Ep)(r,this.name)}get context(){return(0,Le.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setKeyChain(t){var r=this;return(0,v.Z)(function*(){yield r.core.storage.setItem(r.storageKey,pi(t))})()}getKeyChain(){var t=this;return(0,v.Z)(function*(){const r=yield t.core.storage.getItem(t.storageKey);return typeof r<"u"?Ms(r):void 0})()}persist(){var t=this;return(0,v.Z)(function*(){yield t.setKeyChain(t.keychain)})()}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}}class cv{constructor(t,r,s){var u=this;this.core=t,this.logger=r,this.name="crypto",this.initialized=!1,this.init=(0,v.Z)(function*(){u.initialized||(yield u.keychain.init(),u.initialized=!0)}),this.hasKeys=l=>(this.isInitialized(),this.keychain.has(l)),this.getClientId=(0,v.Z)(function*(){return u.isInitialized(),zu(ku(yield u.getClientSeed()).publicKey)}),this.generateKeyPair=()=>{this.isInitialized();const l=function ct(){const a=ae.Au();return{privateKey:(0,Q.BB)(a.secretKey,Oe),publicKey:(0,Q.BB)(a.publicKey,Oe)}}();return this.setPrivateKey(l.publicKey,l.privateKey)},this.signJWT=function(){var l=(0,v.Z)(function*(f){u.isInitialized();const w=ku(yield u.getClientSeed()),m=st();return yield function Xp(a,t,r,s){return Fa.apply(this,arguments)}(m,f,Fy,w)});return function(f){return l.apply(this,arguments)}}(),this.generateSharedKey=(l,f,g)=>{this.isInitialized();const m=function tt(a,t){const r=ae.gi((0,Q.mL)(a,Oe),(0,Q.mL)(t,Oe),!0),s=new ie.t(De.mE,r).expand(32);return(0,Q.BB)(s,Oe)}(this.getPrivateKey(l),f);return this.setSymKey(m,g)},this.setSymKey=function(){var l=(0,v.Z)(function*(f,g){u.isInitialized();const w=g||function Yt(a){const t=(0,De.vp)((0,Q.mL)(a,Oe));return(0,Q.BB)(t,Oe)}(f);return yield u.keychain.set(w,f),w});return function(f,g){return l.apply(this,arguments)}}(),this.deleteKeyPair=function(){var l=(0,v.Z)(function*(f){u.isInitialized(),yield u.keychain.del(f)});return function(f){return l.apply(this,arguments)}}(),this.deleteSymKey=function(){var l=(0,v.Z)(function*(f){u.isInitialized(),yield u.keychain.del(f)});return function(f){return l.apply(this,arguments)}}(),this.encode=function(){var l=(0,v.Z)(function*(f,g,w){u.isInitialized();const m=Wr(w),E=(0,Tn.u)(g);if(bn(m)){const U=m.senderPublicKey,le=m.receiverPublicKey;f=yield u.generateSharedKey(U,le)}const N=u.getSymKey(f),{type:M,senderPublicKey:J}=m;return function fr(a){const t=function vr(a){return(0,Q.mL)(`${a}`,He)}(typeof a.type<"u"?a.type:0);if(1===Ht(t)&&typeof a.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof a.senderPublicKey<"u"?(0,Q.mL)(a.senderPublicKey,Oe):void 0,s=typeof a.iv<"u"?(0,Q.mL)(a.iv,Oe):(0,ze.randomBytes)(12);return function Fr(a){if(1===Ht(a.type)){if(typeof a.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return(0,Q.BB)((0,Q.zo)([a.type,a.senderPublicKey,a.iv,a.sealed]),Lt)}return(0,Q.BB)((0,Q.zo)([a.type,a.iv,a.sealed]),Lt)}({type:t,sealed:new lr.OK((0,Q.mL)(a.symKey,Oe)).seal(s,(0,Q.mL)(a.message,Jt)),iv:s,senderPublicKey:r})}({type:M,symKey:N,message:E,senderPublicKey:J})});return function(f,g,w){return l.apply(this,arguments)}}(),this.decode=function(){var l=(0,v.Z)(function*(f,g,w){u.isInitialized();const m=function _r(a,t){const r=Rr(a);return Wr({type:Ht(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?(0,Q.BB)(r.senderPublicKey,Oe):void 0,receiverPublicKey:t?.receiverPublicKey})}(g,w);if(bn(m)){const E=m.receiverPublicKey,N=m.senderPublicKey;f=yield u.generateSharedKey(E,N)}try{const N=function Or(a){const t=new lr.OK((0,Q.mL)(a.symKey,Oe)),{sealed:r,iv:s}=Rr(a.encoded),u=t.open(s,r);if(null===u)throw new Error("Failed to decrypt");return(0,Q.BB)(u,Jt)}({symKey:u.getSymKey(f),encoded:g});return(0,Tn.D)(N)}catch(E){u.logger.error(`Failed to decode message from topic: '${f}', clientId: '${yield u.getClientId()}'`),u.logger.error(E)}});return function(f,g,w){return l.apply(this,arguments)}}(),this.getPayloadType=l=>Ht(Rr(l).type),this.getPayloadSenderPublicKey=l=>{const f=Rr(l);return f.senderPublicKey?(0,Q.BB)(f.senderPublicKey,Oe):void 0},this.core=t,this.logger=(0,Le.Ep)(r,this.name),this.keychain=s||new av(this.core,this.logger)}get context(){return(0,Le.Fd)(this.logger)}setPrivateKey(t,r){var s=this;return(0,v.Z)(function*(){return yield s.keychain.set(t,r),t})()}getPrivateKey(t){return this.keychain.get(t)}getClientSeed(){var t=this;return(0,v.Z)(function*(){let r="";try{r=t.keychain.get(ll)}catch{r=st(),yield t.keychain.set(ll,r)}return function Ny(a,t="utf8"){const r=Ry[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${a}`):ol(globalThis.Buffer.from(a,"utf-8"))}(r,"base16")})()}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}}class uv extends Rp{constructor(t,r){var s;super(t,r),s=this,this.logger=t,this.core=r,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=ei,this.init=(0,v.Z)(function*(){if(!s.initialized){s.logger.trace("Initialized");try{const u=yield s.getRelayerMessages();typeof u<"u"&&(s.messages=u),s.logger.debug(`Successfully Restored records for ${s.name}`),s.logger.trace({type:"method",method:"restore",size:s.messages.size})}catch(u){s.logger.debug(`Failed to Restore records for ${s.name}`),s.logger.error(u)}finally{s.initialized=!0}}}),this.set=function(){var u=(0,v.Z)(function*(l,f){s.isInitialized();const g=xt(f);let w=s.messages.get(l);return typeof w>"u"&&(w={}),typeof w[g]<"u"||(w[g]=f,s.messages.set(l,w),yield s.persist()),g});return function(l,f){return u.apply(this,arguments)}}(),this.get=u=>{this.isInitialized();let l=this.messages.get(u);return typeof l>"u"&&(l={}),l},this.has=(u,l)=>(this.isInitialized(),typeof this.get(u)[xt(l)]<"u"),this.del=function(){var u=(0,v.Z)(function*(l){s.isInitialized(),s.messages.delete(l),yield s.persist()});return function(l){return u.apply(this,arguments)}}(),this.logger=(0,Le.Ep)(t,this.name),this.core=r}get context(){return(0,Le.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}setRelayerMessages(t){var r=this;return(0,v.Z)(function*(){yield r.core.storage.setItem(r.storageKey,pi(t))})()}getRelayerMessages(){var t=this;return(0,v.Z)(function*(){const r=yield t.core.storage.getItem(t.storageKey);return typeof r<"u"?Ms(r):void 0})()}persist(){var t=this;return(0,v.Z)(function*(){yield t.setRelayerMessages(t.messages)})()}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}}class lv extends Np{constructor(t,r){var s;super(t,r),s=this,this.relayer=t,this.logger=r,this.events=new Ze.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,F.toMiliseconds)(2*F.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=function(){var u=(0,v.Z)(function*(l,f,g){var w;s.logger.debug("Publishing Payload"),s.logger.trace({type:"method",method:"publish",params:{topic:l,message:f,opts:g}});try{const m=g?.ttl||qy,E=ts(g),N=g?.prompt||!1,M=g?.tag||0,J=g?.id||(0,be.getBigIntRpcId)().toString(),U={topic:l,message:f,opts:{ttl:m,relay:E,prompt:N,tag:M,id:J}},le=setTimeout(()=>s.queue.set(J,U),s.publishTimeout);try{yield yield gi(s.rpcPublish(l,f,m,E,N,M,J),s.publishTimeout,`Failed to publish payload, please try again. id:${J} tag:${M}`),s.removeRequestFromQueue(J),s.relayer.events.emit("relayer_publish",U)}catch(pe){if(s.logger.debug("Publishing Payload stalled"),s.needsTransportRestart=!0,null!=(w=g?.internal)&&w.throwOnFailedPublish)throw s.removeRequestFromQueue(J),pe;return}finally{clearTimeout(le)}s.logger.debug("Successfully Published Payload"),s.logger.trace({type:"method",method:"publish",params:{topic:l,message:f,opts:g}})}catch(m){throw s.logger.debug("Failed to Publish Payload"),s.logger.error(m),m}});return function(l,f,g){return u.apply(this,arguments)}}(),this.on=(u,l)=>{this.events.on(u,l)},this.once=(u,l)=>{this.events.once(u,l)},this.off=(u,l)=>{this.events.off(u,l)},this.removeListener=(u,l)=>{this.events.removeListener(u,l)},this.relayer=t,this.logger=(0,Le.Ep)(r,this.name),this.registerEventListeners()}get context(){return(0,Le.Fd)(this.logger)}rpcPublish(t,r,s,u,l,f,g){var w,m,E,N;const M={method:yi(u.protocol).publish,params:{topic:t,message:r,ttl:s,prompt:l,tag:f},id:g};return at(null==(w=M.params)?void 0:w.prompt)&&(null==(m=M.params)||delete m.prompt),at(null==(E=M.params)?void 0:E.tag)&&(null==(N=M.params)||delete N.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:M}),this.relayer.request(M)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){var t=this;this.queue.forEach(function(){var r=(0,v.Z)(function*(s){const{topic:u,message:l,opts:f}=s;yield t.publish(u,l,f)});return function(s){return r.apply(this,arguments)}}())}registerEventListeners(){this.relayer.core.heartbeat.on(os.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit("relayer_connection_stalled");this.checkQueue()}),this.relayer.on("relayer_message_ack",t=>{this.removeRequestFromQueue(t.id.toString())})}}class fv{constructor(){this.map=new Map,this.set=(t,r)=>{const s=this.get(t);this.exists(t,r)||this.map.set(t,[...s,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u")return void this.map.delete(t);if(!this.map.has(t))return;const s=this.get(t);if(!this.exists(t,r))return;const u=s.filter(l=>l!==r);u.length?this.map.set(t,u):this.map.delete(t)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var hv=Object.defineProperty,dv=Object.defineProperties,pv=Object.getOwnPropertyDescriptors,pl=Object.getOwnPropertySymbols,gv=Object.prototype.hasOwnProperty,yv=Object.prototype.propertyIsEnumerable,gl=(a,t,r)=>t in a?hv(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,ls=(a,t)=>{for(var r in t||(t={}))gv.call(t,r)&&gl(a,r,t[r]);if(pl)for(var r of pl(t))yv.call(t,r)&&gl(a,r,t[r]);return a},za=(a,t)=>dv(a,pv(t));class vv extends Tp{constructor(t,r){var s;super(t,r),s=this,this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new fv,this.events=new Ze.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ei,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=(0,v.Z)(function*(){s.initialized||(s.logger.trace("Initialized"),s.registerEventListeners(),s.clientId=yield s.relayer.core.crypto.getClientId())}),this.subscribe=function(){var u=(0,v.Z)(function*(l,f){yield s.restartToComplete(),s.isInitialized(),s.logger.debug("Subscribing Topic"),s.logger.trace({type:"method",method:"subscribe",params:{topic:l,opts:f}});try{const g=ts(f),w={topic:l,relay:g};s.pending.set(l,w);const m=yield s.rpcSubscribe(l,g);return s.onSubscribe(m,w),s.logger.debug("Successfully Subscribed Topic"),s.logger.trace({type:"method",method:"subscribe",params:{topic:l,opts:f}}),m}catch(g){throw s.logger.debug("Failed to Subscribe Topic"),s.logger.error(g),g}});return function(l,f){return u.apply(this,arguments)}}(),this.unsubscribe=function(){var u=(0,v.Z)(function*(l,f){yield s.restartToComplete(),s.isInitialized(),typeof f?.id<"u"?yield s.unsubscribeById(l,f.id,f):yield s.unsubscribeByTopic(l,f)});return function(l,f){return u.apply(this,arguments)}}(),this.isSubscribed=function(){var u=(0,v.Z)(function*(l){if(s.topics.includes(l))return!0;const f=`${s.pendingSubscriptionWatchLabel}_${l}`;return yield new Promise((g,w)=>{const m=new F.Watch;m.start(f);const E=setInterval(()=>{!s.pending.has(l)&&s.topics.includes(l)&&(clearInterval(E),m.stop(f),g(!0)),m.elapsed(f)>=Qy&&(clearInterval(E),m.stop(f),w(new Error("Subscription resolution timeout")))},s.pollingInterval)}).catch(()=>!1)});return function(l){return u.apply(this,arguments)}}(),this.on=(u,l)=>{this.events.on(u,l)},this.once=(u,l)=>{this.events.once(u,l)},this.off=(u,l)=>{this.events.off(u,l)},this.removeListener=(u,l)=>{this.events.removeListener(u,l)},this.restart=(0,v.Z)(function*(){s.restartInProgress=!0,yield s.restore(),yield s.reset(),s.restartInProgress=!1}),this.relayer=t,this.logger=(0,Le.Ep)(r,this.name),this.clientId=""}get context(){return(0,Le.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let s=!1;try{s=this.getSubscription(t).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}unsubscribeByTopic(t,r){var s=this;return(0,v.Z)(function*(){const u=s.topicMap.get(t);yield Promise.all(u.map(function(){var l=(0,v.Z)(function*(f){return yield s.unsubscribeById(t,f,r)});return function(f){return l.apply(this,arguments)}}()))})()}unsubscribeById(t,r,s){var u=this;return(0,v.Z)(function*(){u.logger.debug("Unsubscribing Topic"),u.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}});try{const l=ts(s);yield u.rpcUnsubscribe(t,r,l);const f=Ce("USER_DISCONNECTED",`${u.name}, ${t}`);yield u.onUnsubscribe(t,r,f),u.logger.debug("Successfully Unsubscribed Topic"),u.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:s}})}catch(l){throw u.logger.debug("Failed to Unsubscribe Topic"),u.logger.error(l),l}})()}rpcSubscribe(t,r){var s=this;return(0,v.Z)(function*(){const u={method:yi(r.protocol).subscribe,params:{topic:t}};s.logger.debug("Outgoing Relay Payload"),s.logger.trace({type:"payload",direction:"outgoing",request:u});try{yield yield gi(s.relayer.request(u),s.subscribeTimeout)}catch{s.logger.debug("Outgoing Relay Subscribe Payload stalled"),s.relayer.events.emit("relayer_connection_stalled")}return xt(t+s.clientId)})()}rpcBatchSubscribe(t){var r=this;return(0,v.Z)(function*(){if(!t.length)return;const u={method:yi(t[0].relay.protocol).batchSubscribe,params:{topics:t.map(l=>l.topic)}};r.logger.debug("Outgoing Relay Payload"),r.logger.trace({type:"payload",direction:"outgoing",request:u});try{return yield yield gi(r.relayer.request(u),r.subscribeTimeout)}catch{r.logger.debug("Outgoing Relay Payload stalled"),r.relayer.events.emit("relayer_connection_stalled")}})()}rpcUnsubscribe(t,r,s){const u={method:yi(s.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:u}),this.relayer.request(u)}onSubscribe(t,r){this.setSubscription(t,za(ls({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,ls({},r)),this.pending.delete(r.topic)})}onUnsubscribe(t,r,s){var u=this;return(0,v.Z)(function*(){u.events.removeAllListeners(r),u.hasSubscription(r,t)&&u.deleteSubscription(r,s),yield u.relayer.messages.del(t)})()}setRelayerSubscriptions(t){var r=this;return(0,v.Z)(function*(){yield r.relayer.core.storage.setItem(r.storageKey,t)})()}getRelayerSubscriptions(){var t=this;return(0,v.Z)(function*(){return yield t.relayer.core.storage.getItem(t.storageKey)})()}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,ls({},r)),this.topicMap.set(r.topic,t),this.events.emit(hn_created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:s}=B("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const s=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(s.topic,t),this.events.emit(hn_deleted,za(ls({},s),{reason:r}))}persist(){var t=this;return(0,v.Z)(function*(){yield t.setRelayerSubscriptions(t.values),t.events.emit("subscription_sync")})()}reset(){var t=this;return(0,v.Z)(function*(){if(t.cached.length){const r=Math.ceil(t.cached.length/t.batchSubscribeTopicsLimit);for(let s=0;s<r;s++){const u=t.cached.splice(0,t.batchSubscribeTopicsLimit);yield t.batchSubscribe(u)}}t.events.emit("subscription_resubscribed")})()}restore(){var t=this;return(0,v.Z)(function*(){try{const r=yield t.getRelayerSubscriptions();if(typeof r>"u"||!r.length)return;if(t.subscriptions.size){const{message:s}=B("RESTORE_WILL_OVERRIDE",t.name);throw t.logger.error(s),t.logger.error(`${t.name}: ${JSON.stringify(t.values)}`),new Error(s)}t.cached=r,t.logger.debug(`Successfully Restored subscriptions for ${t.name}`),t.logger.trace({type:"method",method:"restore",subscriptions:t.values})}catch(r){t.logger.debug(`Failed to Restore subscriptions for ${t.name}`),t.logger.error(r)}})()}batchSubscribe(t){var r=this;return(0,v.Z)(function*(){if(!t.length)return;const s=yield r.rpcBatchSubscribe(t);zt(s)&&r.onBatchSubscribe(s.map((u,l)=>za(ls({},t[l]),{id:u})))})()}onConnect(){var t=this;return(0,v.Z)(function*(){t.restartInProgress||(yield t.restart(),t.onEnable())})()}onDisconnect(){this.onDisable()}checkPending(){var t=this;return(0,v.Z)(function*(){if(!t.initialized||t.relayer.transportExplicitlyClosed)return;const r=[];t.pending.forEach(s=>{r.push(s)}),yield t.batchSubscribe(r)})()}registerEventListeners(){var t=this;this.relayer.core.heartbeat.on(os.HEARTBEAT_EVENTS.pulse,(0,v.Z)(function*(){yield t.checkPending()})),this.relayer.on("relayer_connect",(0,v.Z)(function*(){yield t.onConnect()})),this.relayer.on("relayer_disconnect",()=>{this.onDisconnect()}),this.events.on(hn_created,function(){var r=(0,v.Z)(function*(s){const u=hn_created;t.logger.info(`Emitting ${u}`),t.logger.debug({type:"event",event:u,data:s}),yield t.persist()});return function(s){return r.apply(this,arguments)}}()),this.events.on(hn_deleted,function(){var r=(0,v.Z)(function*(s){const u=hn_deleted;t.logger.info(`Emitting ${u}`),t.logger.debug({type:"event",event:u,data:s}),yield t.persist()});return function(s){return r.apply(this,arguments)}}())}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}restartToComplete(){var t=this;return(0,v.Z)(function*(){t.restartInProgress&&(yield new Promise(r=>{const s=setInterval(()=>{t.restartInProgress||(clearInterval(s),r())},t.pollingInterval)}))})()}}var _v=Object.defineProperty,yl=Object.getOwnPropertySymbols,mv=Object.prototype.hasOwnProperty,bv=Object.prototype.propertyIsEnumerable,vl=(a,t,r)=>t in a?_v(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;class xv extends Ap{constructor(t){var r;super(t),r=this,this.protocol="wc",this.version=2,this.events=new Ze.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=function(){var s=(0,v.Z)(function*(u){r.logger.debug("Publishing Request Payload");const l=u.id;try{yield r.toEstablishConnection();const f=r.provider.request(u);return r.requestsInFlight.set(l,{promise:f,request:u}),yield f}catch(f){throw r.logger.debug("Failed to Publish Request"),r.logger.error(f),f}finally{r.requestsInFlight.delete(l)}});return function(u){return s.apply(this,arguments)}}(),this.onPayloadHandler=s=>{this.onProviderPayload(s)},this.onConnectHandler=()=>{this.events.emit("relayer_connect")},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=s=>{this.logger.error(s),this.events.emit("relayer_error",s),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on("payload",this.onPayloadHandler),this.provider.on("connect",this.onConnectHandler),this.provider.on("disconnect",this.onDisconnectHandler),this.provider.on("error",this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&"string"!=typeof t.logger?(0,Le.Ep)(t.logger,this.name):(0,Le.gw)((0,Le.jI)({level:t.logger||"error"})),this.messages=new uv(this.logger,t.core),this.subscriber=new vv(this,this.logger),this.publisher=new lv(this,this.logger),this.relayUrl=t?.relayUrl||hl,this.projectId=t.projectId,this.bundleId=function tr(){var a;try{return vt()&&typeof global<"u"&&typeof(null==global?void 0:global.Application)<"u"?null==(a=global.Application)?void 0:a.applicationId:void 0}catch{return}}(),this.provider={}}init(){var t=this;return(0,v.Z)(function*(){t.logger.trace("Initialized"),t.registerEventListeners(),yield t.createProvider(),yield Promise.all([t.messages.init(),t.subscriber.init()]);try{yield t.transportOpen()}catch{t.logger.warn(`Connection via ${t.relayUrl} failed, attempting to connect via failover domain ${dl}...`),yield t.restartTransport(dl)}t.initialized=!0,setTimeout((0,v.Z)(function*(){0===t.subscriber.topics.length&&(t.logger.info("No topics subscribed to after init, closing transport"),yield t.transportClose(),t.transportExplicitlyClosed=!1)}),1e4)})()}get context(){return(0,Le.Fd)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}publish(t,r,s){var u=this;return(0,v.Z)(function*(){u.isInitialized(),yield u.publisher.publish(t,r,s),yield u.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})})()}subscribe(t,r){var s=this;return(0,v.Z)(function*(){var u;s.isInitialized();let f,l=(null==(u=s.subscriber.topicMap.get(t))?void 0:u[0])||"";if(l)return l;const g=w=>{w.topic===t&&(s.subscriber.off(hn_created,g),f())};return yield Promise.all([new Promise(w=>{f=w,s.subscriber.on(hn_created,g)}),new Promise(function(){var w=(0,v.Z)(function*(m){l=yield s.subscriber.subscribe(t,r),m()});return function(m){return w.apply(this,arguments)}}())]),l})()}unsubscribe(t,r){var s=this;return(0,v.Z)(function*(){s.isInitialized(),yield s.subscriber.unsubscribe(t,r)})()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}transportClose(){var t=this;return(0,v.Z)(function*(){t.requestsInFlight.size>0&&(t.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),t.requestsInFlight.forEach(function(){var r=(0,v.Z)(function*(s){yield s.promise});return function(s){return r.apply(this,arguments)}}())),t.transportExplicitlyClosed=!0,t.hasExperiencedNetworkDisruption&&t.connected?yield gi(t.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>t.onProviderDisconnect()):t.connected&&(yield t.provider.disconnect())})()}transportOpen(t){var r=this;return(0,v.Z)(function*(){if(r.transportExplicitlyClosed=!1,yield r.confirmOnlineStateOrThrow(),!r.connectionAttemptInProgress){t&&t!==r.relayUrl&&(r.relayUrl=t,yield r.transportClose(),yield r.createProvider()),r.connectionAttemptInProgress=!0;try{yield Promise.all([new Promise(s=>{if(!r.initialized)return s();r.subscriber.once("subscription_resubscribed",()=>{s()})}),new Promise(function(){var s=(0,v.Z)(function*(u,l){try{yield gi(r.provider.connect(),1e4,`Socket stalled when trying to connect to ${r.relayUrl}`)}catch(f){return void l(f)}u()});return function(u,l){return s.apply(this,arguments)}}())])}catch(s){if(r.logger.error(s),!r.isConnectionStalled(s.message))throw s;r.provider.events.emit("disconnect")}finally{r.connectionAttemptInProgress=!1,r.hasExperiencedNetworkDisruption=!1}}})()}restartTransport(t){var r=this;return(0,v.Z)(function*(){yield r.confirmOnlineStateOrThrow(),!r.connectionAttemptInProgress&&(r.relayUrl=t||r.relayUrl,yield r.transportClose(),yield r.createProvider(),yield r.transportOpen())})()}confirmOnlineStateOrThrow(){return(0,v.Z)(function*(){if(!(yield Cu()))throw new Error("No internet connection detected. Please restart your network and try again.")})()}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}createProvider(){var t=this;return(0,v.Z)(function*(){t.provider.connection&&t.unregisterProviderListeners();const r=yield t.core.crypto.signJWT(t.relayUrl);t.provider=new Dn(new ng(function ia({protocol:a,version:t,relayUrl:r,sdkVersion:s,auth:u,projectId:l,useOnCloseEvent:f,bundleId:g}){const w=r.split("?"),m=na(a,t,s),N=function ea(a,t){let r=D.parse(a);return r=Tt(Tt({},r),t),D.stringify(r)}(w[1]||"",{auth:u,ua:m,projectId:l,useOnCloseEvent:f||void 0,origin:g||void 0});return w[0]+"?"+N}({sdkVersion:"2.11.2",protocol:t.protocol,version:t.version,relayUrl:t.relayUrl,projectId:t.projectId,auth:r,useOnCloseEvent:!0,bundleId:t.bundleId}))),t.registerProviderListeners()})()}recordMessageEvent(t){var r=this;return(0,v.Z)(function*(){const{topic:s,message:u}=t;yield r.messages.set(s,u)})()}shouldIgnoreMessageEvent(t){var r=this;return(0,v.Z)(function*(){const{topic:s,message:u}=t;if(!u||0===u.length)return r.logger.debug(`Ignoring invalid/empty message: ${u}`),!0;if(!(yield r.subscriber.isSubscribed(s)))return r.logger.debug(`Ignoring message for non-subscribed topic ${s}`),!0;const l=r.messages.has(s,u);return l&&r.logger.debug(`Ignoring duplicate message: ${u}`),l})()}onProviderPayload(t){var r=this;return(0,v.Z)(function*(){if(r.logger.debug("Incoming Relay Payload"),r.logger.trace({type:"payload",direction:"incoming",payload:t}),(0,be.isJsonRpcRequest)(t)){if(!t.method.endsWith("_subscription"))return;const s=t.params,{topic:u,message:l,publishedAt:f}=s.data,g={topic:u,message:l,publishedAt:f};r.logger.debug("Emitting Relayer Payload"),r.logger.trace(((a,t)=>{for(var r in t||(t={}))mv.call(t,r)&&vl(a,r,t[r]);if(yl)for(var r of yl(t))bv.call(t,r)&&vl(a,r,t[r]);return a})({type:"event",event:s.id},g)),r.events.emit(s.id,g),yield r.acknowledgePayload(t),yield r.onMessageEvent(g)}else(0,be.isJsonRpcResponse)(t)&&r.events.emit("relayer_message_ack",t)})()}onMessageEvent(t){var r=this;return(0,v.Z)(function*(){(yield r.shouldIgnoreMessageEvent(t))||(r.events.emit("relayer_message",t),yield r.recordMessageEvent(t))})()}acknowledgePayload(t){var r=this;return(0,v.Z)(function*(){const s=(0,be.formatJsonRpcResult)(t.id,!0);yield r.provider.connection.send(s)})()}unregisterProviderListeners(){this.provider.off("payload",this.onPayloadHandler),this.provider.off("connect",this.onConnectHandler),this.provider.off("disconnect",this.onDisconnectHandler),this.provider.off("error",this.onProviderErrorHandler)}registerEventListeners(){var t=this;return(0,v.Z)(function*(){t.events.on("relayer_connection_stalled",()=>{t.restartTransport().catch(s=>t.logger.error(s))});let r=yield Cu();!function Vd(a){switch(mt()){case ke.browser:!function Wd(a){!vt()&&_t()&&(window.addEventListener("online",()=>a(!0)),window.addEventListener("offline",()=>a(!1)))}(a);break;case ke.reactNative:!function Gd(a){vt()&&typeof global<"u"&&null!=global&&global.NetInfo&&global?.NetInfo.addEventListener(t=>a(t?.isConnected))}(a)}}(function(){var s=(0,v.Z)(function*(u){t.initialized&&r!==u&&(r=u,u?yield t.restartTransport().catch(l=>t.logger.error(l)):(t.hasExperiencedNetworkDisruption=!0,yield t.transportClose().catch(l=>t.logger.error(l))))});return function(u){return s.apply(this,arguments)}}())})()}onProviderDisconnect(){this.events.emit("relayer_disconnect"),this.attemptToReconnect()}attemptToReconnect(){var t=this;this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout((0,v.Z)(function*(){yield t.restartTransport().catch(r=>t.logger.error(r))}),(0,F.toMiliseconds)(Ky)))}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}toEstablishConnection(){var t=this;return(0,v.Z)(function*(){if(yield t.confirmOnlineStateOrThrow(),!t.connected){if(t.connectionAttemptInProgress)return yield new Promise(r=>{const s=setInterval(()=>{t.connected&&(clearInterval(s),r())},t.connectionStatusPollingInterval)});yield t.restartTransport()}})()}}var Ev=Object.defineProperty,_l=Object.getOwnPropertySymbols,Iv=Object.prototype.hasOwnProperty,Sv=Object.prototype.propertyIsEnumerable,ml=(a,t,r)=>t in a?Ev(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,bl=(a,t)=>{for(var r in t||(t={}))Iv.call(t,r)&&ml(a,r,t[r]);if(_l)for(var r of _l(t))Sv.call(t,r)&&ml(a,r,t[r]);return a};class Ys extends Cp{constructor(t,r,s,u=ei,l=void 0){var f;super(t,r,s,u),f=this,this.core=t,this.logger=r,this.name=s,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=ei,this.init=(0,v.Z)(function*(){f.initialized||(f.logger.trace("Initialized"),yield f.restore(),f.cached.forEach(g=>{f.getKey&&null!==g&&!at(g)?f.map.set(f.getKey(g),g):function Fi(a){var t;return null==(t=a?.proposer)?void 0:t.publicKey}(g)?f.map.set(g.id,g):function Sd(a){return a?.topic}(g)&&f.map.set(g.topic,g)}),f.cached=[],f.initialized=!0)}),this.set=function(){var g=(0,v.Z)(function*(w,m){f.isInitialized(),f.map.has(w)?yield f.update(w,m):(f.logger.debug("Setting value"),f.logger.trace({type:"method",method:"set",key:w,value:m}),f.map.set(w,m),yield f.persist())});return function(w,m){return g.apply(this,arguments)}}(),this.get=g=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:g}),this.getData(g)),this.getAll=g=>(this.isInitialized(),g?this.values.filter(w=>Object.keys(g).every(m=>sg()(w[m],g[m]))):this.values),this.update=function(){var g=(0,v.Z)(function*(w,m){f.isInitialized(),f.logger.debug("Updating value"),f.logger.trace({type:"method",method:"update",key:w,update:m});const E=bl(bl({},f.getData(w)),m);f.map.set(w,E),yield f.persist()});return function(w,m){return g.apply(this,arguments)}}(),this.delete=function(){var g=(0,v.Z)(function*(w,m){f.isInitialized(),f.map.has(w)&&(f.logger.debug("Deleting value"),f.logger.trace({type:"method",method:"delete",key:w,reason:m}),f.map.delete(w),yield f.persist())});return function(w,m){return g.apply(this,arguments)}}(),this.logger=(0,Le.Ep)(r,this.name),this.storagePrefix=u,this.getKey=l}get context(){return(0,Le.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}setDataStore(t){var r=this;return(0,v.Z)(function*(){yield r.core.storage.setItem(r.storageKey,t)})()}getDataStore(){var t=this;return(0,v.Z)(function*(){return yield t.core.storage.getItem(t.storageKey)})()}getData(t){const r=this.map.get(t);if(!r){const{message:s}=B("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}persist(){var t=this;return(0,v.Z)(function*(){yield t.setDataStore(t.values)})()}restore(){var t=this;return(0,v.Z)(function*(){try{const r=yield t.getDataStore();if(typeof r>"u"||!r.length)return;if(t.map.size){const{message:s}=B("RESTORE_WILL_OVERRIDE",t.name);throw t.logger.error(s),new Error(s)}t.cached=r,t.logger.debug(`Successfully Restored value for ${t.name}`),t.logger.trace({type:"method",method:"restore",value:t.values})}catch(r){t.logger.debug(`Failed to Restore value for ${t.name}`),t.logger.error(r)}})()}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Pv{constructor(t,r){var s=this;this.core=t,this.logger=r,this.name="pairing",this.version="0.3",this.events=new(Be()),this.initialized=!1,this.storagePrefix=ei,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=(0,v.Z)(function*(){s.initialized||(yield s.pairings.init(),yield s.cleanup(),s.registerRelayerEvents(),s.registerExpirerEvents(),s.initialized=!0,s.logger.trace("Initialized"))}),this.register=({methods:u})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...u])]},this.create=(0,v.Z)(function*(){s.isInitialized();const u=st(),l=yield s.core.crypto.setSymKey(u),f=or(F.FIVE_MINUTES),g={protocol:"irn"},w={topic:l,expiry:f,relay:g,active:!1},m=function Ti(a){return`${a.protocol}:${a.topic}@${a.version}?`+D.stringify(((a,t)=>Qn(a,ha(t)))(((a,t)=>{for(var r in t||(t={}))En.call(t,r)&&qs(a,r,t[r]);if(Ls)for(var r of Ls(t))da.call(t,r)&&qs(a,r,t[r]);return a})({symKey:a.symKey},function va(a,t="-"){const s={};return Object.keys(a).forEach(u=>{a[u]&&(s["relay"+t+u]=a[u])}),s}(a.relay)),{expiryTimestamp:a.expiryTimestamp}))}({protocol:s.core.protocol,version:s.core.version,topic:l,symKey:u,relay:g,expiryTimestamp:f});return yield s.pairings.set(l,w),yield s.core.relayer.subscribe(l),s.core.expirer.set(l,f),{topic:l,uri:m}}),this.pair=function(){var u=(0,v.Z)(function*(l){s.isInitialized(),s.isValidPair(l);const{topic:f,symKey:g,relay:w,expiryTimestamp:m}=In(l.uri);let E;if(s.pairings.keys.includes(f)&&(E=s.pairings.get(f),E.active))throw new Error(`Pairing already exists: ${f}. Please try again with a new connection URI.`);const N=m||or(F.FIVE_MINUTES),M={topic:f,relay:w,expiry:N,active:!1};return yield s.pairings.set(f,M),s.core.expirer.set(f,N),l.activatePairing&&(yield s.activate({topic:f})),s.events.emit("pairing_create",M),s.core.crypto.keychain.has(f)||(yield s.core.crypto.setSymKey(g,f),yield s.core.relayer.subscribe(f,{relay:w})),M});return function(l){return u.apply(this,arguments)}}(),this.activate=function(){var u=(0,v.Z)(function*({topic:l}){s.isInitialized();const f=or(F.THIRTY_DAYS);yield s.pairings.update(l,{active:!0,expiry:f}),s.core.expirer.set(l,f)});return function(l){return u.apply(this,arguments)}}(),this.ping=function(){var u=(0,v.Z)(function*(l){s.isInitialized(),yield s.isValidPing(l);const{topic:f}=l;if(s.pairings.keys.includes(f)){const g=yield s.sendRequest(f,"wc_pairingPing",{}),{done:w,resolve:m,reject:E}=Jn();s.events.once(It("pairing_ping",g),({error:N})=>{N?E(N):m()}),yield w()}});return function(l){return u.apply(this,arguments)}}(),this.updateExpiry=function(){var u=(0,v.Z)(function*({topic:l,expiry:f}){s.isInitialized(),yield s.pairings.update(l,{expiry:f})});return function(l){return u.apply(this,arguments)}}(),this.updateMetadata=function(){var u=(0,v.Z)(function*({topic:l,metadata:f}){s.isInitialized(),yield s.pairings.update(l,{peerMetadata:f})});return function(l){return u.apply(this,arguments)}}(),this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=function(){var u=(0,v.Z)(function*(l){s.isInitialized(),yield s.isValidDisconnect(l);const{topic:f}=l;s.pairings.keys.includes(f)&&(yield s.sendRequest(f,"wc_pairingDelete",Ce("USER_DISCONNECTED")),yield s.deletePairing(f))});return function(l){return u.apply(this,arguments)}}(),this.sendRequest=function(){var u=(0,v.Z)(function*(l,f,g){const w=(0,be.formatJsonRpcRequest)(f,g),m=yield s.core.crypto.encode(l,w),E=cs[f].req;return s.core.history.set(l,w),s.core.relayer.publish(l,m,E),w.id});return function(l,f,g){return u.apply(this,arguments)}}(),this.sendResult=function(){var u=(0,v.Z)(function*(l,f,g){const w=(0,be.formatJsonRpcResult)(l,g),m=yield s.core.crypto.encode(f,w),E=yield s.core.history.get(f,l),N=cs[E.request.method].res;yield s.core.relayer.publish(f,m,N),yield s.core.history.resolve(w)});return function(l,f,g){return u.apply(this,arguments)}}(),this.sendError=function(){var u=(0,v.Z)(function*(l,f,g){const w=(0,be.formatJsonRpcError)(l,g),m=yield s.core.crypto.encode(f,w),E=yield s.core.history.get(f,l),N=cs[E.request.method]?cs[E.request.method].res:cs.unregistered_method.res;yield s.core.relayer.publish(f,m,N),yield s.core.history.resolve(w)});return function(l,f,g){return u.apply(this,arguments)}}(),this.deletePairing=function(){var u=(0,v.Z)(function*(l,f){yield s.core.relayer.unsubscribe(l),yield Promise.all([s.pairings.delete(l,Ce("USER_DISCONNECTED")),s.core.crypto.deleteSymKey(l),f?Promise.resolve():s.core.expirer.del(l)])});return function(l,f){return u.apply(this,arguments)}}(),this.cleanup=(0,v.Z)(function*(){const u=s.pairings.getAll().filter(l=>un(l.expiry));yield Promise.all(u.map(l=>s.deletePairing(l.topic)))}),this.onRelayEventRequest=u=>{const{topic:l,payload:f}=u;switch(f.method){case"wc_pairingPing":return this.onPairingPingRequest(l,f);case"wc_pairingDelete":return this.onPairingDeleteRequest(l,f);default:return this.onUnknownRpcMethodRequest(l,f)}},this.onRelayEventResponse=function(){var u=(0,v.Z)(function*(l){const{topic:f,payload:g}=l,w=(yield s.core.history.get(f,g.id)).request.method;return"wc_pairingPing"===w?s.onPairingPingResponse(f,g):s.onUnknownRpcMethodResponse(w)});return function(l){return u.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var u=(0,v.Z)(function*(l,f){const{id:g}=f;try{s.isValidPing({topic:l}),yield s.sendResult(g,l,!0),s.events.emit("pairing_ping",{id:g,topic:l})}catch(w){yield s.sendError(g,l,w),s.logger.error(w)}});return function(l,f){return u.apply(this,arguments)}}(),this.onPairingPingResponse=(u,l)=>{const{id:f}=l;setTimeout(()=>{(0,be.isJsonRpcResult)(l)?this.events.emit(It("pairing_ping",f),{}):(0,be.isJsonRpcError)(l)&&this.events.emit(It("pairing_ping",f),{error:l.error})},500)},this.onPairingDeleteRequest=function(){var u=(0,v.Z)(function*(l,f){const{id:g}=f;try{s.isValidDisconnect({topic:l}),yield s.deletePairing(l),s.events.emit("pairing_delete",{id:g,topic:l})}catch(w){yield s.sendError(g,l,w),s.logger.error(w)}});return function(l,f){return u.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var u=(0,v.Z)(function*(l,f){const{id:g,method:w}=f;try{if(s.registeredMethods.includes(w))return;const m=Ce("WC_METHOD_UNSUPPORTED",w);yield s.sendError(g,l,m),s.logger.error(m)}catch(m){yield s.sendError(g,l,m),s.logger.error(m)}});return function(l,f){return u.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=u=>{this.registeredMethods.includes(u)||this.logger.error(Ce("WC_METHOD_UNSUPPORTED",u))},this.isValidPair=u=>{var l;if(!Mr(u)){const{message:g}=B("MISSING_OR_INVALID",`pair() params: ${u}`);throw new Error(g)}if(!function Di(a){if(Ge(a,!1))try{return typeof new URL(a)<"u"}catch{return!1}return!1}(u.uri)){const{message:g}=B("MISSING_OR_INVALID",`pair() uri: ${u.uri}`);throw new Error(g)}const f=In(u.uri);if(null==(l=f?.relay)||!l.protocol){const{message:g}=B("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(g)}if(null==f||!f.symKey){const{message:g}=B("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(g)}if(null!=f&&f.expiryTimestamp&&(0,F.toMiliseconds)(f?.expiryTimestamp)<Date.now()){const{message:g}=B("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(g)}},this.isValidPing=function(){var u=(0,v.Z)(function*(l){if(!Mr(l)){const{message:g}=B("MISSING_OR_INVALID",`ping() params: ${l}`);throw new Error(g)}const{topic:f}=l;yield s.isValidPairingTopic(f)});return function(l){return u.apply(this,arguments)}}(),this.isValidDisconnect=function(){var u=(0,v.Z)(function*(l){if(!Mr(l)){const{message:g}=B("MISSING_OR_INVALID",`disconnect() params: ${l}`);throw new Error(g)}const{topic:f}=l;yield s.isValidPairingTopic(f)});return function(l){return u.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var u=(0,v.Z)(function*(l){if(!Ge(l,!1)){const{message:f}=B("MISSING_OR_INVALID",`pairing topic should be a string: ${l}`);throw new Error(f)}if(!s.pairings.keys.includes(l)){const{message:f}=B("NO_MATCHING_KEY",`pairing topic doesn't exist: ${l}`);throw new Error(f)}if(un(s.pairings.get(l).expiry)){yield s.deletePairing(l);const{message:f}=B("EXPIRED",`pairing topic: ${l}`);throw new Error(f)}});return function(l){return u.apply(this,arguments)}}(),this.core=t,this.logger=(0,Le.Ep)(r,this.name),this.pairings=new Ys(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,Le.Fd)(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){var t=this;this.core.relayer.on("relayer_message",function(){var r=(0,v.Z)(function*(s){const{topic:u,message:l}=s;if(!t.pairings.keys.includes(u)||t.ignoredPayloadTypes.includes(t.core.crypto.getPayloadType(l)))return;const f=yield t.core.crypto.decode(u,l);try{(0,be.isJsonRpcRequest)(f)?(t.core.history.set(u,f),t.onRelayEventRequest({topic:u,payload:f})):(0,be.isJsonRpcResponse)(f)&&(yield t.core.history.resolve(f),yield t.onRelayEventResponse({topic:u,payload:f}),t.core.history.delete(u,f.id))}catch(g){t.logger.error(g)}});return function(s){return r.apply(this,arguments)}}())}registerExpirerEvents(){var t=this;this.core.expirer.on(Yr_expired,function(){var r=(0,v.Z)(function*(s){const{topic:u}=$s(s.target);u&&t.pairings.keys.includes(u)&&(yield t.deletePairing(u,!0),t.events.emit("pairing_expire",{topic:u}))});return function(s){return r.apply(this,arguments)}}())}}class Ov extends Op{constructor(t,r){var s;super(t,r),s=this,this.core=t,this.logger=r,this.records=new Map,this.events=new Ze.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=ei,this.init=(0,v.Z)(function*(){s.initialized||(s.logger.trace("Initialized"),yield s.restore(),s.cached.forEach(u=>s.records.set(u.id,u)),s.cached=[],s.registerEventListeners(),s.initialized=!0)}),this.set=(u,l,f)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:u,request:l,chainId:f}),this.records.has(l.id))return;const g={id:l.id,topic:u,request:{method:l.method,params:l.params||null},chainId:f,expiry:or(F.THIRTY_DAYS)};this.records.set(g.id,g),this.events.emit("history_created",g)},this.resolve=function(){var u=(0,v.Z)(function*(l){if(s.isInitialized(),s.logger.debug("Updating JSON-RPC response history record"),s.logger.trace({type:"method",method:"update",response:l}),!s.records.has(l.id))return;const f=yield s.getRecord(l.id);typeof f.response>"u"&&(f.response=(0,be.isJsonRpcError)(l)?{error:l.error}:{result:l.result},s.records.set(f.id,f),s.events.emit("history_updated",f))});return function(l){return u.apply(this,arguments)}}(),this.get=function(){var u=(0,v.Z)(function*(l,f){return s.isInitialized(),s.logger.debug("Getting record"),s.logger.trace({type:"method",method:"get",topic:l,id:f}),yield s.getRecord(f)});return function(l,f){return u.apply(this,arguments)}}(),this.delete=(u,l)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:l}),this.values.forEach(f=>{if(f.topic===u){if(typeof l<"u"&&f.id!==l)return;this.records.delete(f.id),this.events.emit("history_deleted",f)}})},this.exists=function(){var u=(0,v.Z)(function*(l,f){return s.isInitialized(),!!s.records.has(f)&&(yield s.getRecord(f)).topic===l});return function(l,f){return u.apply(this,arguments)}}(),this.on=(u,l)=>{this.events.on(u,l)},this.once=(u,l)=>{this.events.once(u,l)},this.off=(u,l)=>{this.events.off(u,l)},this.removeListener=(u,l)=>{this.events.removeListener(u,l)},this.logger=(0,Le.Ep)(r,this.name)}get context(){return(0,Le.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:(0,be.formatJsonRpcRequest)(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(s)}),t}setJsonRpcRecords(t){var r=this;return(0,v.Z)(function*(){yield r.core.storage.setItem(r.storageKey,t)})()}getJsonRpcRecords(){var t=this;return(0,v.Z)(function*(){return yield t.core.storage.getItem(t.storageKey)})()}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:s}=B("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(s)}return r}persist(){var t=this;return(0,v.Z)(function*(){yield t.setJsonRpcRecords(t.values),t.events.emit("history_sync")})()}restore(){var t=this;return(0,v.Z)(function*(){try{const r=yield t.getJsonRpcRecords();if(typeof r>"u"||!r.length)return;if(t.records.size){const{message:s}=B("RESTORE_WILL_OVERRIDE",t.name);throw t.logger.error(s),new Error(s)}t.cached=r,t.logger.debug(`Successfully Restored records for ${t.name}`),t.logger.trace({type:"method",method:"restore",records:t.values})}catch(r){t.logger.debug(`Failed to Restore records for ${t.name}`),t.logger.error(r)}})()}registerEventListeners(){this.events.on("history_created",t=>{const r="history_created";this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on("history_updated",t=>{const r="history_updated";this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on("history_deleted",t=>{const r="history_deleted";this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.core.heartbeat.on(os.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(t=>{(0,F.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.delete(t.topic,t.id))})}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Rv extends Dp{constructor(t,r){var s;super(t,r),s=this,this.core=t,this.logger=r,this.expirations=new Map,this.events=new Ze.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=ei,this.init=(0,v.Z)(function*(){s.initialized||(s.logger.trace("Initialized"),yield s.restore(),s.cached.forEach(u=>s.expirations.set(u.target,u)),s.cached=[],s.registerEventListeners(),s.initialized=!0)}),this.has=u=>{try{const l=this.formatTarget(u);return typeof this.getExpiration(l)<"u"}catch{return!1}},this.set=(u,l)=>{this.isInitialized();const f=this.formatTarget(u),g={target:f,expiry:l};this.expirations.set(f,g),this.checkExpiry(f,g),this.events.emit("expirer_created",{target:f,expiration:g})},this.get=u=>{this.isInitialized();const l=this.formatTarget(u);return this.getExpiration(l)},this.del=u=>{if(this.isInitialized(),this.has(u)){const l=this.formatTarget(u),f=this.getExpiration(l);this.expirations.delete(l),this.events.emit("expirer_deleted",{target:l,expiration:f})}},this.on=(u,l)=>{this.events.on(u,l)},this.once=(u,l)=>{this.events.once(u,l)},this.off=(u,l)=>{this.events.off(u,l)},this.removeListener=(u,l)=>{this.events.removeListener(u,l)},this.logger=(0,Le.Ep)(r,this.name)}get context(){return(0,Le.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if("string"==typeof t)return function ca(a){return js("topic",a)}(t);if("number"==typeof t)return function Ni(a){return js("id",a)}(t);const{message:r}=B("UNKNOWN_TYPE","Target type: "+typeof t);throw new Error(r)}setExpirations(t){var r=this;return(0,v.Z)(function*(){yield r.core.storage.setItem(r.storageKey,t)})()}getExpirations(){var t=this;return(0,v.Z)(function*(){return yield t.core.storage.getItem(t.storageKey)})()}persist(){var t=this;return(0,v.Z)(function*(){yield t.setExpirations(t.values),t.events.emit("expirer_sync")})()}restore(){var t=this;return(0,v.Z)(function*(){try{const r=yield t.getExpirations();if(typeof r>"u"||!r.length)return;if(t.expirations.size){const{message:s}=B("RESTORE_WILL_OVERRIDE",t.name);throw t.logger.error(s),new Error(s)}t.cached=r,t.logger.debug(`Successfully Restored expirations for ${t.name}`),t.logger.trace({type:"method",method:"restore",expirations:t.values})}catch(r){t.logger.debug(`Failed to Restore expirations for ${t.name}`),t.logger.error(r)}})()}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:s}=B("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(t,r){const{expiry:s}=r;(0,F.toMiliseconds)(s)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Yr_expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(os.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on("expirer_created",t=>{const r="expirer_created";this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Yr_expired,t=>{const r=Yr_expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on("expirer_deleted",t=>{const r="expirer_deleted";this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=B("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Nv extends Fp{constructor(t,r){var s;super(t,r),s=this,this.projectId=t,this.logger=r,this.name=Ua,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=function(){var u=(0,v.Z)(function*(l){if(s.verifyDisabled||vt()||!_t())return;const f=s.getVerifyUrl(l?.verifyUrl);s.verifyUrl!==f&&s.removeIframe(),s.verifyUrl=f;try{yield s.createIframe()}catch(g){s.logger.info(`Verify iframe failed to load: ${s.verifyUrl}`),s.logger.info(g)}if(!s.initialized){s.removeIframe(),s.verifyUrl=Za;try{yield s.createIframe()}catch(g){s.logger.info(`Verify iframe failed to load: ${s.verifyUrl}`),s.logger.info(g),s.verifyDisabled=!0}}});return function(l){return u.apply(this,arguments)}}(),this.register=function(){var u=(0,v.Z)(function*(l){s.initialized?s.sendPost(l.attestationId):(s.addToQueue(l.attestationId),yield s.init())});return function(l){return u.apply(this,arguments)}}(),this.resolve=function(){var u=(0,v.Z)(function*(l){if(s.isDevEnv)return"";const f=s.getVerifyUrl(l?.verifyUrl);let g;try{g=yield s.fetchAttestation(l.attestationId,f)}catch(w){s.logger.info(`failed to resolve attestation: ${l.attestationId} from url: ${f}`),s.logger.info(w),g=yield s.fetchAttestation(l.attestationId,Za)}return g});return function(l){return u.apply(this,arguments)}}(),this.fetchAttestation=function(){var u=(0,v.Z)(function*(l,f){s.logger.info(`resolving attestation: ${l} from url: ${f}`);const g=s.startAbortTimer(2*F.ONE_SECOND),w=yield fetch(`${f}/attestation/${l}`,{signal:s.abortController.signal});return clearTimeout(g),200===w.status?yield w.json():void 0});return function(l,f){return u.apply(this,arguments)}}(),this.addToQueue=u=>{this.queue.push(u)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(u=>this.sendPost(u)),this.queue=[])},this.sendPost=u=>{var l;try{if(!this.iframe)return;null==(l=this.iframe.contentWindow)||l.postMessage(u,"*"),this.logger.info(`postMessage sent: ${u} ${this.verifyUrl}`)}catch{}},this.createIframe=(0,v.Z)(function*(){let u;const l=f=>{"verify_ready"===f.data&&(s.initialized=!0,s.processQueue(),window.removeEventListener("message",l),u())};yield Promise.race([new Promise(f=>{if(document.getElementById(Ua))return f();window.addEventListener("message",l);const g=document.createElement("iframe");g.id=Ua,g.src=`${s.verifyUrl}/${s.projectId}`,g.style.display="none",document.body.append(g),s.iframe=g,u=f}),new Promise((f,g)=>setTimeout(()=>{window.removeEventListener("message",l),g("verify iframe load timeout")},(0,F.toMiliseconds)(F.FIVE_SECONDS)))])}),this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=u=>{let l=u||ji;return iv.includes(l)||(this.logger.info(`verify url: ${l}, not included in trusted list, assigning default: ${ji}`),l=ji),l},this.logger=(0,Le.Ep)(r,this.name),this.verifyUrl=ji,this.abortController=new AbortController,this.isDevEnv=ot()&&process.env.IS_VITEST}get context(){return(0,Le.Fd)(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,F.toMiliseconds)(t))}}class Av extends Mp{constructor(t,r){var s;super(t,r),s=this,this.projectId=t,this.logger=r,this.context="echo",this.registerDeviceToken=function(){var u=(0,v.Z)(function*(l){const{clientId:f,token:g,notificationType:w,enableEncrypted:m=!1}=l,E=`https://echo.walletconnect.com/${s.projectId}/clients`;yield ag()(E,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:f,type:w,token:g,always_raw:m})})});return function(l){return u.apply(this,arguments)}}(),this.logger=(0,Le.Ep)(r,this.context)}}var Cv=Object.defineProperty,wl=Object.getOwnPropertySymbols,Tv=Object.prototype.hasOwnProperty,Dv=Object.prototype.propertyIsEnumerable,xl=(a,t,r)=>t in a?Cv(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,El=(a,t)=>{for(var r in t||(t={}))Tv.call(t,r)&&xl(a,r,t[r]);if(wl)for(var r of wl(t))Dv.call(t,r)&&xl(a,r,t[r]);return a};class ka extends Pp{constructor(t){super(t),this.protocol="wc",this.version=2,this.name="core",this.events=new Ze.EventEmitter,this.initialized=!1,this.on=(s,u)=>this.events.on(s,u),this.once=(s,u)=>this.events.once(s,u),this.off=(s,u)=>this.events.off(s,u),this.removeListener=(s,u)=>this.events.removeListener(s,u),this.projectId=t?.projectId,this.relayUrl=t?.relayUrl||hl,this.customStoragePrefix=null!=t&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const r=typeof t?.logger<"u"&&"string"!=typeof t?.logger?t.logger:(0,Le.gw)((0,Le.jI)({level:t?.logger||"error"}));this.logger=(0,Le.Ep)(r,this.name),this.heartbeat=new os.HeartBeat,this.crypto=new cv(this,this.logger,t?.keychain),this.history=new Ov(this,this.logger),this.expirer=new Rv(this,this.logger),this.storage=null!=t&&t.storage?t.storage:new Sp(El(El({},Ty),t?.storageOptions)),this.relayer=new xv({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Pv(this,this.logger),this.verify=new Nv(this.projectId||"",this.logger),this.echoClient=new Av(this.projectId||"",this.logger)}static init(t){return(0,v.Z)(function*(){const r=new ka(t);yield r.initialize();const s=yield r.crypto.getClientId();return yield r.storage.setItem("WALLETCONNECT_CLIENT_ID",s),r})()}get context(){return(0,Le.Fd)(this.logger)}start(){var t=this;return(0,v.Z)(function*(){t.initialized||(yield t.initialize())})()}initialize(){var t=this;return(0,v.Z)(function*(){t.logger.trace("Initialized");try{yield t.crypto.init(),yield t.history.init(),yield t.expirer.init(),yield t.relayer.init(),yield t.heartbeat.init(),yield t.pairing.init(),t.initialized=!0,t.logger.info("Core Initialization Success")}catch(r){throw t.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,r),t.logger.error(r.message),r}})()}}const Fv=ka,Ka="wc@2:client:",Ol="WALLETCONNECT_DEEPLINK_CHOICE",Rl="Proposal expired",Xs=F.SEVEN_DAYS,Mn={wc_sessionPropose:{req:{ttl:F.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:F.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:F.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:F.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:F.ONE_DAY,prompt:!1,tag:1104},res:{ttl:F.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:F.ONE_DAY,prompt:!1,tag:1106},res:{ttl:F.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:F.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:F.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:F.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:F.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:F.ONE_DAY,prompt:!1,tag:1112},res:{ttl:F.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:F.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:F.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ha={min:F.FIVE_MINUTES,max:F.SEVEN_DAYS},qv=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Uv=Object.defineProperty,Zv=Object.defineProperties,zv=Object.getOwnPropertyDescriptors,Nl=Object.getOwnPropertySymbols,kv=Object.prototype.hasOwnProperty,Kv=Object.prototype.propertyIsEnumerable,Al=(a,t,r)=>t in a?Uv(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,Nr=(a,t)=>{for(var r in t||(t={}))kv.call(t,r)&&Al(a,r,t[r]);if(Nl)for(var r of Nl(t))Kv.call(t,r)&&Al(a,r,t[r]);return a},$i=(a,t)=>Zv(a,zv(t));class Bv extends $p{constructor(t){var r;super(t),r=this,this.name="engine",this.events=new(Be()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.requestQueue={state:"IDLE",queue:[]},this.sessionRequestQueue={state:"IDLE",queue:[]},this.requestQueueDelay=F.ONE_SECOND,this.init=(0,v.Z)(function*(){r.initialized||(yield r.cleanup(),r.registerRelayerEvents(),r.registerExpirerEvents(),r.registerPairingEvents(),r.client.core.pairing.register({methods:Object.keys(Mn)}),r.initialized=!0,setTimeout(()=>{r.sessionRequestQueue.queue=r.getPendingSessionRequests(),r.processSessionRequestQueue()},(0,F.toMiliseconds)(r.requestQueueDelay)))}),this.connect=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized();const l=$i(Nr({},u),{requiredNamespaces:u.requiredNamespaces||{},optionalNamespaces:u.optionalNamespaces||{}});yield r.isValidConnect(l);const{pairingTopic:f,requiredNamespaces:g,optionalNamespaces:w,sessionProperties:m,relays:E}=l;let M,N=f,J=!1;if(N&&(J=r.client.core.pairing.pairings.get(N).active),!N||!J){const{topic:ut,uri:lt}=yield r.client.core.pairing.create();N=ut,M=lt}const U=yield r.client.core.crypto.generateKeyPair(),le=Mn.wc_sessionPropose.req.ttl||F.FIVE_MINUTES,pe=or(le),Te=Nr({requiredNamespaces:g,optionalNamespaces:w,relays:E??[{protocol:"irn"}],proposer:{publicKey:U,metadata:r.client.metadata},expiryTimestamp:pe},m&&{sessionProperties:m}),{reject:Ft,resolve:Ke,done:rt}=Jn(le,Rl);if(r.events.once(It("session_connect"),function(){var ut=(0,v.Z)(function*({error:lt,session:Mt}){if(lt)Ft(lt);else if(Mt){Mt.self.publicKey=U;const dn=$i(Nr({},Mt),{requiredNamespaces:Te.requiredNamespaces,optionalNamespaces:Te.optionalNamespaces});yield r.client.session.set(Mt.topic,dn),yield r.setExpiry(Mt.topic,Mt.expiry),N&&(yield r.client.core.pairing.updateMetadata({topic:N,metadata:Mt.peer.metadata})),Ke(dn)}});return function(lt){return ut.apply(this,arguments)}}()),!N){const{message:ut}=B("NO_MATCHING_KEY",`connect() pairing topic: ${N}`);throw new Error(ut)}const Ve=yield r.sendRequest({topic:N,method:"wc_sessionPropose",params:Te,throwOnFailedPublish:!0});return yield r.setProposal(Ve,Nr({id:Ve},Te)),{uri:M,approval:rt}});return function(u){return s.apply(this,arguments)}}(),this.pair=function(){var s=(0,v.Z)(function*(u){return yield r.isInitialized(),yield r.client.core.pairing.pair(u)});return function(u){return s.apply(this,arguments)}}(),this.approve=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidApprove(u);const{id:l,relayProtocol:f,namespaces:g,sessionProperties:w}=u,m=r.client.proposal.get(l);let{pairingTopic:E,proposer:N,requiredNamespaces:M,optionalNamespaces:J}=m;E=E||"";const U=yield r.client.core.crypto.generateKeyPair(),le=N.publicKey,pe=yield r.client.core.crypto.generateSharedKey(U,le);E&&l&&(yield r.client.core.pairing.updateMetadata({topic:E,metadata:N.metadata}),yield r.sendResult({id:l,topic:E,result:{relay:{protocol:f??"irn"},responderPublicKey:U}}),yield r.client.proposal.delete(l,Ce("USER_DISCONNECTED")),yield r.client.core.pairing.activate({topic:E}));const Te=Nr({relay:{protocol:f??"irn"},namespaces:g,pairingTopic:E,controller:{publicKey:U,metadata:r.client.metadata},expiry:or(Xs)},w&&{sessionProperties:w});yield r.client.core.relayer.subscribe(pe);const Ft=$i(Nr({},Te),{topic:pe,requiredNamespaces:M,optionalNamespaces:J,pairingTopic:E,acknowledged:!1,self:Te.controller,peer:{publicKey:N.publicKey,metadata:N.metadata},controller:U});yield r.client.session.set(pe,Ft);try{yield r.sendRequest({topic:pe,method:"wc_sessionSettle",params:Te,throwOnFailedPublish:!0})}catch(Ke){throw r.client.logger.error(Ke),r.client.session.delete(pe,Ce("USER_DISCONNECTED")),yield r.client.core.relayer.unsubscribe(pe),Ke}return yield r.setExpiry(pe,or(Xs)),{topic:pe,acknowledged:()=>new Promise(Ke=>setTimeout(()=>Ke(r.client.session.get(pe)),500))}});return function(u){return s.apply(this,arguments)}}(),this.reject=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidReject(u);const{id:l,reason:f}=u,{pairingTopic:g}=r.client.proposal.get(l);g&&(yield r.sendError(l,g,f),yield r.client.proposal.delete(l,Ce("USER_DISCONNECTED")))});return function(u){return s.apply(this,arguments)}}(),this.update=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidUpdate(u);const{topic:l,namespaces:f}=u,g=yield r.sendRequest({topic:l,method:"wc_sessionUpdate",params:{namespaces:f}}),{done:w,resolve:m,reject:E}=Jn();return r.events.once(It("session_update",g),({error:N})=>{N?E(N):m()}),yield r.client.session.update(l,{namespaces:f}),{acknowledged:w}});return function(u){return s.apply(this,arguments)}}(),this.extend=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidExtend(u);const{topic:l}=u,f=yield r.sendRequest({topic:l,method:"wc_sessionExtend",params:{}}),{done:g,resolve:w,reject:m}=Jn();return r.events.once(It("session_extend",f),({error:E})=>{E?m(E):w()}),yield r.setExpiry(l,or(Xs)),{acknowledged:g}});return function(u){return s.apply(this,arguments)}}(),this.request=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidRequest(u);const{chainId:l,request:f,topic:g,expiry:w=Mn.wc_sessionRequest.req.ttl}=u,m=(0,be.payloadId)(),{done:E,resolve:N,reject:M}=Jn(w,"Request expired. Please try again.");return r.events.once(It("session_request",m),({error:J,result:U})=>{J?M(J):N(U)}),yield Promise.all([new Promise(function(){var J=(0,v.Z)(function*(U){yield r.sendRequest({clientRpcId:m,topic:g,method:"wc_sessionRequest",params:{request:$i(Nr({},f),{expiryTimestamp:or(w)}),chainId:l},expiry:w,throwOnFailedPublish:!0}).catch(le=>M(le)),r.client.events.emit("session_request_sent",{topic:g,request:f,chainId:l,id:m}),U()});return function(U){return J.apply(this,arguments)}}()),new Promise(function(){var J=(0,v.Z)(function*(U){const le=yield function la(a,t){return Ai.apply(this,arguments)}(r.client.core.storage,Ol);(function ua(a){es.apply(this,arguments)})({id:m,topic:g,wcDeepLink:le}),U()});return function(U){return J.apply(this,arguments)}}()),E()]).then(J=>J[2])});return function(u){return s.apply(this,arguments)}}(),this.respond=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidRespond(u);const{topic:l,response:f}=u,{id:g}=f;(0,be.isJsonRpcResult)(f)?yield r.sendResult({id:g,topic:l,result:f.result,throwOnFailedPublish:!0}):(0,be.isJsonRpcError)(f)&&(yield r.sendError(g,l,f.error)),r.cleanupAfterResponse(u)});return function(u){return s.apply(this,arguments)}}(),this.ping=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidPing(u);const{topic:l}=u;if(r.client.session.keys.includes(l)){const f=yield r.sendRequest({topic:l,method:"wc_sessionPing",params:{}}),{done:g,resolve:w,reject:m}=Jn();r.events.once(It("session_ping",f),({error:E})=>{E?m(E):w()}),yield g()}else r.client.core.pairing.pairings.keys.includes(l)&&(yield r.client.core.pairing.ping({topic:l}))});return function(u){return s.apply(this,arguments)}}(),this.emit=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidEmit(u);const{topic:l,event:f,chainId:g}=u;yield r.sendRequest({topic:l,method:"wc_sessionEvent",params:{event:f,chainId:g}})});return function(u){return s.apply(this,arguments)}}(),this.disconnect=function(){var s=(0,v.Z)(function*(u){yield r.isInitialized(),yield r.isValidDisconnect(u);const{topic:l}=u;if(r.client.session.keys.includes(l))yield r.sendRequest({topic:l,method:"wc_sessionDelete",params:Ce("USER_DISCONNECTED"),throwOnFailedPublish:!0}),yield r.deleteSession({topic:l,emitEvent:!1});else{if(!r.client.core.pairing.pairings.keys.includes(l)){const{message:f}=B("MISMATCHED_TOPIC",`Session or pairing topic not found: ${l}`);throw new Error(f)}yield r.client.core.pairing.disconnect({topic:l})}});return function(u){return s.apply(this,arguments)}}(),this.find=s=>(this.isInitialized(),this.client.session.getAll().filter(u=>function ln(a,t){const{requiredNamespaces:r}=t,s=Object.keys(a.namespaces),u=Object.keys(r);let l=!0;return!!An(u,s)&&(s.forEach(f=>{const{accounts:g,methods:w,events:m}=a.namespaces[f],E=Xn(g),N=r[f];An(d(f,N),E)&&An(N.methods,w)&&An(N.events,m)||(l=!1)}),l)}(u,s))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=function(){var s=(0,v.Z)(function*(u){if(u.pairingTopic)try{const l=r.client.core.pairing.pairings.get(u.pairingTopic),f=r.client.core.pairing.pairings.getAll().filter(g=>{var w,m;return(null==(w=g.peerMetadata)?void 0:w.url)&&(null==(m=g.peerMetadata)?void 0:m.url)===u.peer.metadata.url&&g.topic&&g.topic!==l.topic});if(0===f.length)return;r.client.logger.info(`Cleaning up ${f.length} duplicate pairing(s)`),yield Promise.all(f.map(g=>r.client.core.pairing.disconnect({topic:g.topic}))),r.client.logger.info("Duplicate pairings clean up finished")}catch(l){r.client.logger.error(l)}});return function(u){return s.apply(this,arguments)}}(),this.deleteSession=function(){var s=(0,v.Z)(function*(u){const{topic:l,expirerHasDeleted:f=!1,emitEvent:g=!0,id:w=0}=u,{self:m}=r.client.session.get(l);yield r.client.core.relayer.unsubscribe(l),yield r.client.session.delete(l,Ce("USER_DISCONNECTED")),r.client.core.crypto.keychain.has(m.publicKey)&&(yield r.client.core.crypto.deleteKeyPair(m.publicKey)),r.client.core.crypto.keychain.has(l)&&(yield r.client.core.crypto.deleteSymKey(l)),f||r.client.core.expirer.del(l),r.client.core.storage.removeItem(Ol).catch(E=>r.client.logger.warn(E)),r.getPendingSessionRequests().forEach(E=>{E.topic===l&&r.deletePendingSessionRequest(E.id,Ce("USER_DISCONNECTED"))}),g&&r.client.events.emit("session_delete",{id:w,topic:l})});return function(u){return s.apply(this,arguments)}}(),this.deleteProposal=function(){var s=(0,v.Z)(function*(u,l){yield Promise.all([r.client.proposal.delete(u,Ce("USER_DISCONNECTED")),l?Promise.resolve():r.client.core.expirer.del(u)])});return function(u,l){return s.apply(this,arguments)}}(),this.deletePendingSessionRequest=function(){var s=(0,v.Z)(function*(u,l,f=!1){yield Promise.all([r.client.pendingRequest.delete(u,l),f?Promise.resolve():r.client.core.expirer.del(u)]),r.sessionRequestQueue.queue=r.sessionRequestQueue.queue.filter(g=>g.id!==u),f&&(r.sessionRequestQueue.state="IDLE",r.client.events.emit("session_request_expire",{id:u}))});return function(u,l){return s.apply(this,arguments)}}(),this.setExpiry=function(){var s=(0,v.Z)(function*(u,l){r.client.session.keys.includes(u)&&(yield r.client.session.update(u,{expiry:l})),r.client.core.expirer.set(u,l)});return function(u,l){return s.apply(this,arguments)}}(),this.setProposal=function(){var s=(0,v.Z)(function*(u,l){yield r.client.proposal.set(u,l),r.client.core.expirer.set(u,or(Mn.wc_sessionPropose.req.ttl))});return function(u,l){return s.apply(this,arguments)}}(),this.setPendingSessionRequest=function(){var s=(0,v.Z)(function*(u){const{id:l,topic:f,params:g,verifyContext:w}=u,m=g.request.expiryTimestamp||or(Mn.wc_sessionRequest.req.ttl);yield r.client.pendingRequest.set(l,{id:l,topic:f,params:g,verifyContext:w}),m&&r.client.core.expirer.set(l,m)});return function(u){return s.apply(this,arguments)}}(),this.sendRequest=function(){var s=(0,v.Z)(function*(u){const{topic:l,method:f,params:g,expiry:w,relayRpcId:m,clientRpcId:E,throwOnFailedPublish:N}=u,M=(0,be.formatJsonRpcRequest)(f,g,E);if(_t()&&qv.includes(f)){const le=xt(JSON.stringify(M));r.client.core.verify.register({attestationId:le})}const J=yield r.client.core.crypto.encode(l,M),U=Mn[f].req;return w&&(U.ttl=w),m&&(U.id=m),r.client.core.history.set(l,M),N?(U.internal=$i(Nr({},U.internal),{throwOnFailedPublish:!0}),yield r.client.core.relayer.publish(l,J,U)):r.client.core.relayer.publish(l,J,U).catch(le=>r.client.logger.error(le)),M.id});return function(u){return s.apply(this,arguments)}}(),this.sendResult=function(){var s=(0,v.Z)(function*(u){const{id:l,topic:f,result:g,throwOnFailedPublish:w}=u,m=(0,be.formatJsonRpcResult)(l,g),E=yield r.client.core.crypto.encode(f,m),N=yield r.client.core.history.get(f,l),M=Mn[N.request.method].res;w?(M.internal=$i(Nr({},M.internal),{throwOnFailedPublish:!0}),yield r.client.core.relayer.publish(f,E,M)):r.client.core.relayer.publish(f,E,M).catch(J=>r.client.logger.error(J)),yield r.client.core.history.resolve(m)});return function(u){return s.apply(this,arguments)}}(),this.sendError=function(){var s=(0,v.Z)(function*(u,l,f){const g=(0,be.formatJsonRpcError)(u,f),w=yield r.client.core.crypto.encode(l,g),m=yield r.client.core.history.get(l,u);r.client.core.relayer.publish(l,w,Mn[m.request.method].res),yield r.client.core.history.resolve(g)});return function(u,l,f){return s.apply(this,arguments)}}(),this.cleanup=(0,v.Z)(function*(){const s=[],u=[];r.client.session.getAll().forEach(l=>{let f=!1;un(l.expiry)&&(f=!0),r.client.core.crypto.keychain.has(l.topic)||(f=!0),f&&s.push(l.topic)}),r.client.proposal.getAll().forEach(l=>{un(l.expiryTimestamp)&&u.push(l.id)}),yield Promise.all([...s.map(l=>r.deleteSession({topic:l})),...u.map(l=>r.deleteProposal(l))])}),this.onRelayEventRequest=function(){var s=(0,v.Z)(function*(u){r.requestQueue.queue.push(u),yield r.processRequestsQueue()});return function(u){return s.apply(this,arguments)}}(),this.processRequestsQueue=(0,v.Z)(function*(){if("ACTIVE"!==r.requestQueue.state){for(r.client.logger.info(`Request queue starting with ${r.requestQueue.queue.length} requests`);r.requestQueue.queue.length>0;){r.requestQueue.state="ACTIVE";const s=r.requestQueue.queue.shift();if(s)try{r.processRequest(s),yield new Promise(u=>setTimeout(u,300))}catch(u){r.client.logger.warn(u)}}r.requestQueue.state="IDLE"}else r.client.logger.info("Request queue already active, skipping...")}),this.processRequest=s=>{const{topic:u,payload:l}=s,f=l.method;switch(f){case"wc_sessionPropose":return this.onSessionProposeRequest(u,l);case"wc_sessionSettle":return this.onSessionSettleRequest(u,l);case"wc_sessionUpdate":return this.onSessionUpdateRequest(u,l);case"wc_sessionExtend":return this.onSessionExtendRequest(u,l);case"wc_sessionPing":return this.onSessionPingRequest(u,l);case"wc_sessionDelete":return this.onSessionDeleteRequest(u,l);case"wc_sessionRequest":return this.onSessionRequest(u,l);case"wc_sessionEvent":return this.onSessionEventRequest(u,l);default:return this.client.logger.info(`Unsupported request method ${f}`)}},this.onRelayEventResponse=function(){var s=(0,v.Z)(function*(u){const{topic:l,payload:f}=u,g=(yield r.client.core.history.get(l,f.id)).request.method;switch(g){case"wc_sessionPropose":return r.onSessionProposeResponse(l,f);case"wc_sessionSettle":return r.onSessionSettleResponse(l,f);case"wc_sessionUpdate":return r.onSessionUpdateResponse(l,f);case"wc_sessionExtend":return r.onSessionExtendResponse(l,f);case"wc_sessionPing":return r.onSessionPingResponse(l,f);case"wc_sessionRequest":return r.onSessionRequestResponse(l,f);default:return r.client.logger.info(`Unsupported response method ${g}`)}});return function(u){return s.apply(this,arguments)}}(),this.onRelayEventUnknownPayload=s=>{const{topic:u}=s,{message:l}=B("MISSING_OR_INVALID",`Decoded payload on topic ${u} is not identifiable as a JSON-RPC request or a response.`);throw new Error(l)},this.onSessionProposeRequest=function(){var s=(0,v.Z)(function*(u,l){const{params:f,id:g}=l;try{r.isValidConnect(Nr({},l.params));const w=f.expiryTimestamp||or(Mn.wc_sessionPropose.req.ttl),m=Nr({id:g,pairingTopic:u,expiryTimestamp:w},f);yield r.setProposal(g,m);const E=xt(JSON.stringify(l)),N=yield r.getVerifyContext(E,m.proposer.metadata);r.client.events.emit("session_proposal",{id:g,params:m,verifyContext:N})}catch(w){yield r.sendError(g,u,w),r.client.logger.error(w)}});return function(u,l){return s.apply(this,arguments)}}(),this.onSessionProposeResponse=function(){var s=(0,v.Z)(function*(u,l){const{id:f}=l;if((0,be.isJsonRpcResult)(l)){const{result:g}=l;r.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:g});const w=r.client.proposal.get(f);r.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:w});const m=w.proposer.publicKey;r.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:m});const E=g.responderPublicKey;r.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:E});const N=yield r.client.core.crypto.generateSharedKey(m,E);r.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:N});const M=yield r.client.core.relayer.subscribe(N);r.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:M}),yield r.client.core.pairing.activate({topic:u})}else(0,be.isJsonRpcError)(l)&&(yield r.client.proposal.delete(f,Ce("USER_DISCONNECTED")),r.events.emit(It("session_connect"),{error:l.error}))});return function(u,l){return s.apply(this,arguments)}}(),this.onSessionSettleRequest=function(){var s=(0,v.Z)(function*(u,l){const{id:f,params:g}=l;try{r.isValidSessionSettleRequest(g);const{relay:w,controller:m,expiry:E,namespaces:N,sessionProperties:M,pairingTopic:J}=l.params,U=Nr({topic:u,relay:w,expiry:E,namespaces:N,acknowledged:!0,pairingTopic:J,requiredNamespaces:{},optionalNamespaces:{},controller:m.publicKey,self:{publicKey:"",metadata:r.client.metadata},peer:{publicKey:m.publicKey,metadata:m.metadata}},M&&{sessionProperties:M});yield r.sendResult({id:l.id,topic:u,result:!0}),r.events.emit(It("session_connect"),{session:U}),r.cleanupDuplicatePairings(U)}catch(w){yield r.sendError(f,u,w),r.client.logger.error(w)}});return function(u,l){return s.apply(this,arguments)}}(),this.onSessionSettleResponse=function(){var s=(0,v.Z)(function*(u,l){const{id:f}=l;(0,be.isJsonRpcResult)(l)?(yield r.client.session.update(u,{acknowledged:!0}),r.events.emit(It("session_approve",f),{})):(0,be.isJsonRpcError)(l)&&(yield r.client.session.delete(u,Ce("USER_DISCONNECTED")),r.events.emit(It("session_approve",f),{error:l.error}))});return function(u,l){return s.apply(this,arguments)}}(),this.onSessionUpdateRequest=function(){var s=(0,v.Z)(function*(u,l){const{params:f,id:g}=l;try{const w=`${u}_session_update`,m=Hs.get(w);if(m&&r.isRequestOutOfSync(m,g))return void r.client.logger.info(`Discarding out of sync request - ${g}`);r.isValidUpdate(Nr({topic:u},f)),yield r.client.session.update(u,{namespaces:f.namespaces}),yield r.sendResult({id:g,topic:u,result:!0}),r.client.events.emit("session_update",{id:g,topic:u,params:f}),Hs.set(w,g)}catch(w){yield r.sendError(g,u,w),r.client.logger.error(w)}});return function(u,l){return s.apply(this,arguments)}}(),this.isRequestOutOfSync=(s,u)=>parseInt(u.toString().slice(0,-3))<=parseInt(s.toString().slice(0,-3)),this.onSessionUpdateResponse=(s,u)=>{const{id:l}=u;(0,be.isJsonRpcResult)(u)?this.events.emit(It("session_update",l),{}):(0,be.isJsonRpcError)(u)&&this.events.emit(It("session_update",l),{error:u.error})},this.onSessionExtendRequest=function(){var s=(0,v.Z)(function*(u,l){const{id:f}=l;try{r.isValidExtend({topic:u}),yield r.setExpiry(u,or(Xs)),yield r.sendResult({id:f,topic:u,result:!0}),r.client.events.emit("session_extend",{id:f,topic:u})}catch(g){yield r.sendError(f,u,g),r.client.logger.error(g)}});return function(u,l){return s.apply(this,arguments)}}(),this.onSessionExtendResponse=(s,u)=>{const{id:l}=u;(0,be.isJsonRpcResult)(u)?this.events.emit(It("session_extend",l),{}):(0,be.isJsonRpcError)(u)&&this.events.emit(It("session_extend",l),{error:u.error})},this.onSessionPingRequest=function(){var s=(0,v.Z)(function*(u,l){const{id:f}=l;try{r.isValidPing({topic:u}),yield r.sendResult({id:f,topic:u,result:!0}),r.client.events.emit("session_ping",{id:f,topic:u})}catch(g){yield r.sendError(f,u,g),r.client.logger.error(g)}});return function(u,l){return s.apply(this,arguments)}}(),this.onSessionPingResponse=(s,u)=>{const{id:l}=u;setTimeout(()=>{(0,be.isJsonRpcResult)(u)?this.events.emit(It("session_ping",l),{}):(0,be.isJsonRpcError)(u)&&this.events.emit(It("session_ping",l),{error:u.error})},500)},this.onSessionDeleteRequest=function(){var s=(0,v.Z)(function*(u,l){const{id:f}=l;try{r.isValidDisconnect({topic:u,reason:l.params}),yield Promise.all([new Promise(g=>{r.client.core.relayer.once("relayer_publish",(0,v.Z)(function*(){g(yield r.deleteSession({topic:u,id:f}))}))}),r.sendResult({id:f,topic:u,result:!0}),r.cleanupPendingSentRequestsForTopic({topic:u,error:Ce("USER_DISCONNECTED")})])}catch(g){r.client.logger.error(g)}});return function(u,l){return s.apply(this,arguments)}}(),this.onSessionRequest=function(){var s=(0,v.Z)(function*(u,l){const{id:f,params:g}=l;try{r.isValidRequest(Nr({topic:u},g));const w=xt(JSON.stringify((0,be.formatJsonRpcRequest)("wc_sessionRequest",g,f))),m=r.client.session.get(u),N={id:f,topic:u,params:g,verifyContext:yield r.getVerifyContext(w,m.peer.metadata)};yield r.setPendingSessionRequest(N),r.addSessionRequestToSessionRequestQueue(N),r.processSessionRequestQueue()}catch(w){yield r.sendError(f,u,w),r.client.logger.error(w)}});return function(u,l){return s.apply(this,arguments)}}(),this.onSessionRequestResponse=(s,u)=>{const{id:l}=u;(0,be.isJsonRpcResult)(u)?this.events.emit(It("session_request",l),{result:u.result}):(0,be.isJsonRpcError)(u)&&this.events.emit(It("session_request",l),{error:u.error})},this.onSessionEventRequest=function(){var s=(0,v.Z)(function*(u,l){const{id:f,params:g}=l;try{const w=`${u}_session_event_${g.event.name}`,m=Hs.get(w);if(m&&r.isRequestOutOfSync(m,f))return void r.client.logger.info(`Discarding out of sync request - ${f}`);r.isValidEmit(Nr({topic:u},g)),r.client.events.emit("session_event",{id:f,topic:u,params:g}),Hs.set(w,f)}catch(w){yield r.sendError(f,u,w),r.client.logger.error(w)}});return function(u,l){return s.apply(this,arguments)}}(),this.addSessionRequestToSessionRequestQueue=s=>{this.sessionRequestQueue.queue.push(s)},this.cleanupAfterResponse=s=>{this.deletePendingSessionRequest(s.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state="IDLE",this.processSessionRequestQueue()},(0,F.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:s,error:u})=>{const l=this.client.core.history.pending;l.length>0&&l.filter(f=>f.topic===s&&"wc_sessionRequest"===f.request.method).forEach(f=>{this.events.emit(It("session_request",f.request.id),{error:u})})},this.processSessionRequestQueue=()=>{if("ACTIVE"===this.sessionRequestQueue.state)return void this.client.logger.info("session request queue is already active.");const s=this.sessionRequestQueue.queue[0];if(s)try{this.sessionRequestQueue.state="ACTIVE",this.client.events.emit("session_request",s)}catch(u){this.client.logger.error(u)}else this.client.logger.info("session request queue is empty.")},this.onPairingCreated=s=>{if(s.active)return;const u=this.client.proposal.getAll().find(l=>l.pairingTopic===s.topic);u&&this.onSessionProposeRequest(s.topic,(0,be.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:u.requiredNamespaces,optionalNamespaces:u.optionalNamespaces,relays:u.relays,proposer:u.proposer,sessionProperties:u.sessionProperties},u.id))},this.isValidConnect=function(){var s=(0,v.Z)(function*(u){if(!Mr(u)){const{message:E}=B("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(u)}`);throw new Error(E)}const{pairingTopic:l,requiredNamespaces:f,optionalNamespaces:g,sessionProperties:w,relays:m}=u;if(at(l)||(yield r.isValidPairingTopic(l)),!function Dd(a,t){let r=!1;return t&&!a?r=!0:a&&zt(a)&&a.length&&a.forEach(s=>{r=Ru(s)}),r}(m,!0)){const{message:E}=B("MISSING_OR_INVALID",`connect() relays: ${m}`);throw new Error(E)}!at(f)&&0!==Dt(f)&&r.validateNamespaces(f,"requiredNamespaces"),!at(g)&&0!==Dt(g)&&r.validateNamespaces(g,"optionalNamespaces"),at(w)||r.validateSessionProps(w,"sessionProperties")});return function(u){return s.apply(this,arguments)}}(),this.validateNamespaces=(s,u)=>{const l=function Td(a,t,r){let s=null;if(a&&Dt(a)){const u=Ou(a,t);u&&(s=u);const l=function Rd(a,t,r){let s=null;return Object.entries(a).forEach(([u,l])=>{if(s)return;const f=function Od(a,t,r){let s=null;return zt(t)&&t.length?t.forEach(u=>{s||Qr(u)||(s=Ce("UNSUPPORTED_CHAINS",`${r}, chain ${u} should be a string and conform to "namespace:chainId" format`))}):Qr(a)||(s=Ce("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),s}(u,d(u,l),`${t} ${r}`);f&&(s=f)}),s}(a,t,r);l&&(s=l)}else s=B("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return s}(s,"connect()",u);if(l)throw new Error(l.message)},this.isValidApprove=function(){var s=(0,v.Z)(function*(u){if(!Mr(u))throw new Error(B("MISSING_OR_INVALID",`approve() params: ${u}`).message);const{id:l,namespaces:f,relayProtocol:g,sessionProperties:w}=u;yield r.isValidProposalId(l);const m=r.client.proposal.get(l),E=Bs(f,"approve()");if(E)throw new Error(E.message);const N=xa(m.requiredNamespaces,f,"approve()");if(N)throw new Error(N.message);if(!Ge(g,!0)){const{message:M}=B("MISSING_OR_INVALID",`approve() relayProtocol: ${g}`);throw new Error(M)}at(w)||r.validateSessionProps(w,"sessionProperties")});return function(u){return s.apply(this,arguments)}}(),this.isValidReject=function(){var s=(0,v.Z)(function*(u){if(!Mr(u)){const{message:g}=B("MISSING_OR_INVALID",`reject() params: ${u}`);throw new Error(g)}const{id:l,reason:f}=u;if(yield r.isValidProposalId(l),!function Md(a){return!!(a&&"object"==typeof a&&a.code&&Jr(a.code,!1)&&a.message&&Ge(a.message,!1))}(f)){const{message:g}=B("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(f)}`);throw new Error(g)}});return function(u){return s.apply(this,arguments)}}(),this.isValidSessionSettleRequest=s=>{if(!Mr(s)){const{message:E}=B("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${s}`);throw new Error(E)}const{relay:u,controller:l,namespaces:f,expiry:g}=s;if(!Ru(u)){const{message:E}=B("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(E)}const w=function Pd(a,t){let r=null;return Ge(a?.publicKey,!1)||(r=B("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}(l,"onSessionSettleRequest()");if(w)throw new Error(w.message);const m=Bs(f,"onSessionSettleRequest()");if(m)throw new Error(m.message);if(un(g)){const{message:E}=B("EXPIRED","onSessionSettleRequest()");throw new Error(E)}},this.isValidUpdate=function(){var s=(0,v.Z)(function*(u){if(!Mr(u)){const{message:E}=B("MISSING_OR_INVALID",`update() params: ${u}`);throw new Error(E)}const{topic:l,namespaces:f}=u;yield r.isValidSessionTopic(l);const g=r.client.session.get(l),w=Bs(f,"update()");if(w)throw new Error(w.message);const m=xa(g.requiredNamespaces,f,"update()");if(m)throw new Error(m.message)});return function(u){return s.apply(this,arguments)}}(),this.isValidExtend=function(){var s=(0,v.Z)(function*(u){if(!Mr(u)){const{message:f}=B("MISSING_OR_INVALID",`extend() params: ${u}`);throw new Error(f)}const{topic:l}=u;yield r.isValidSessionTopic(l)});return function(u){return s.apply(this,arguments)}}(),this.isValidRequest=function(){var s=(0,v.Z)(function*(u){if(!Mr(u)){const{message:E}=B("MISSING_OR_INVALID",`request() params: ${u}`);throw new Error(E)}const{topic:l,request:f,chainId:g,expiry:w}=u;yield r.isValidSessionTopic(l);const{namespaces:m}=r.client.session.get(l);if(!Nu(m,g)){const{message:E}=B("MISSING_OR_INVALID",`request() chainId: ${g}`);throw new Error(E)}if(!function jd(a){return!(at(a)||!Ge(a.method,!1))}(f)){const{message:E}=B("MISSING_OR_INVALID",`request() ${JSON.stringify(f)}`);throw new Error(E)}if(!function qd(a,t,r){return!!Ge(r,!1)&&function b(a,t){const r=[];return Object.values(a).forEach(s=>{Xn(s.accounts).includes(t)&&r.push(...s.methods)}),r}(a,t).includes(r)}(m,g,f.method)){const{message:E}=B("MISSING_OR_INVALID",`request() method: ${f.method}`);throw new Error(E)}if(w&&!function kd(a,t){return Jr(a,!1)&&a<=t.max&&a>=t.min}(w,Ha)){const{message:E}=B("MISSING_OR_INVALID",`request() expiry: ${w}. Expiry must be a number (in seconds) between ${Ha.min} and ${Ha.max}`);throw new Error(E)}});return function(u){return s.apply(this,arguments)}}(),this.isValidRespond=function(){var s=(0,v.Z)(function*(u){var l;if(!Mr(u)){const{message:w}=B("MISSING_OR_INVALID",`respond() params: ${u}`);throw new Error(w)}const{topic:f,response:g}=u;try{yield r.isValidSessionTopic(f)}catch(w){throw null!=(l=u?.response)&&l.id&&r.cleanupAfterResponse(u),w}if(!function $d(a){return!(at(a)||at(a.result)&&at(a.error)||!Jr(a.id,!1)||!Ge(a.jsonrpc,!1))}(g)){const{message:w}=B("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(g)}`);throw new Error(w)}});return function(u){return s.apply(this,arguments)}}(),this.isValidPing=function(){var s=(0,v.Z)(function*(u){if(!Mr(u)){const{message:f}=B("MISSING_OR_INVALID",`ping() params: ${u}`);throw new Error(f)}const{topic:l}=u;yield r.isValidSessionOrPairingTopic(l)});return function(u){return s.apply(this,arguments)}}(),this.isValidEmit=function(){var s=(0,v.Z)(function*(u){if(!Mr(u)){const{message:m}=B("MISSING_OR_INVALID",`emit() params: ${u}`);throw new Error(m)}const{topic:l,event:f,chainId:g}=u;yield r.isValidSessionTopic(l);const{namespaces:w}=r.client.session.get(l);if(!Nu(w,g)){const{message:m}=B("MISSING_OR_INVALID",`emit() chainId: ${g}`);throw new Error(m)}if(!function Ld(a){return!(at(a)||!Ge(a.name,!1))}(f)){const{message:m}=B("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(f)}`);throw new Error(m)}if(!function Ud(a,t,r){return!!Ge(r,!1)&&function P(a,t){const r=[];return Object.values(a).forEach(s=>{Xn(s.accounts).includes(t)&&r.push(...s.events)}),r}(a,t).includes(r)}(w,g,f.name)){const{message:m}=B("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(f)}`);throw new Error(m)}});return function(u){return s.apply(this,arguments)}}(),this.isValidDisconnect=function(){var s=(0,v.Z)(function*(u){if(!Mr(u)){const{message:f}=B("MISSING_OR_INVALID",`disconnect() params: ${u}`);throw new Error(f)}const{topic:l}=u;yield r.isValidSessionOrPairingTopic(l)});return function(u){return s.apply(this,arguments)}}(),this.getVerifyContext=function(){var s=(0,v.Z)(function*(u,l){const f={verified:{verifyUrl:l.verifyUrl||ji,validation:"UNKNOWN",origin:l.url||""}};try{const g=yield r.client.core.verify.resolve({attestationId:u,verifyUrl:l.verifyUrl});g&&(f.verified.origin=g.origin,f.verified.isScam=g.isScam,f.verified.validation=g.origin===new URL(l.url).origin?"VALID":"INVALID")}catch(g){r.client.logger.info(g)}return r.client.logger.info(`Verify context: ${JSON.stringify(f)}`),f});return function(u,l){return s.apply(this,arguments)}}(),this.validateSessionProps=(s,u)=>{Object.values(s).forEach(l=>{if(!Ge(l,!1)){const{message:f}=B("MISSING_OR_INVALID",`${u} must be in Record<string, string> format. Received: ${JSON.stringify(l)}`);throw new Error(f)}})}}isInitialized(){var t=this;return(0,v.Z)(function*(){if(!t.initialized){const{message:r}=B("NOT_INITIALIZED",t.name);throw new Error(r)}yield t.client.core.relayer.confirmOnlineStateOrThrow()})()}registerRelayerEvents(){var t=this;this.client.core.relayer.on("relayer_message",function(){var r=(0,v.Z)(function*(s){const{topic:u,message:l}=s;if(t.ignoredPayloadTypes.includes(t.client.core.crypto.getPayloadType(l)))return;const f=yield t.client.core.crypto.decode(u,l);try{(0,be.isJsonRpcRequest)(f)?(t.client.core.history.set(u,f),t.onRelayEventRequest({topic:u,payload:f})):(0,be.isJsonRpcResponse)(f)?(yield t.client.core.history.resolve(f),yield t.onRelayEventResponse({topic:u,payload:f}),t.client.core.history.delete(u,f.id)):t.onRelayEventUnknownPayload({topic:u,payload:f})}catch(g){t.client.logger.error(g)}});return function(s){return r.apply(this,arguments)}}())}registerExpirerEvents(){var t=this;this.client.core.expirer.on(Yr_expired,function(){var r=(0,v.Z)(function*(s){const{topic:u,id:l}=$s(s.target);if(l&&t.client.pendingRequest.keys.includes(l))return yield t.deletePendingSessionRequest(l,B("EXPIRED"),!0);u?t.client.session.keys.includes(u)&&(yield t.deleteSession({topic:u,expirerHasDeleted:!0}),t.client.events.emit("session_expire",{topic:u})):l&&(yield t.deleteProposal(l,!0),t.client.events.emit("proposal_expire",{id:l}))});return function(s){return r.apply(this,arguments)}}())}registerPairingEvents(){this.client.core.pairing.events.on("pairing_create",t=>this.onPairingCreated(t))}isValidPairingTopic(t){if(!Ge(t,!1)){const{message:r}=B("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=B("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(un(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=B("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}isValidSessionTopic(t){var r=this;return(0,v.Z)(function*(){if(!Ge(t,!1)){const{message:s}=B("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(s)}if(!r.client.session.keys.includes(t)){const{message:s}=B("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(s)}if(un(r.client.session.get(t).expiry)){yield r.deleteSession({topic:t});const{message:s}=B("EXPIRED",`session topic: ${t}`);throw new Error(s)}if(!r.client.core.crypto.keychain.has(t)){const{message:s}=B("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw yield r.deleteSession({topic:t}),new Error(s)}})()}isValidSessionOrPairingTopic(t){var r=this;return(0,v.Z)(function*(){if(r.client.session.keys.includes(t))yield r.isValidSessionTopic(t);else{if(!r.client.core.pairing.pairings.keys.includes(t)){if(Ge(t,!1)){const{message:s}=B("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(s)}{const{message:s}=B("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(s)}}r.isValidPairingTopic(t)}})()}isValidProposalId(t){var r=this;return(0,v.Z)(function*(){if(!function Fd(a){return"number"==typeof a}(t)){const{message:s}=B("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(s)}if(!r.client.proposal.keys.includes(t)){const{message:s}=B("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(s)}if(un(r.client.proposal.get(t).expiryTimestamp)){yield r.deleteProposal(t);const{message:s}=B("EXPIRED",`proposal id: ${t}`);throw new Error(s)}})()}}class Hv extends Ys{constructor(t,r){super(t,r,"proposal",Ka),this.core=t,this.logger=r}}class Vv extends Ys{constructor(t,r){super(t,r,"session",Ka),this.core=t,this.logger=r}}class Wv extends Ys{constructor(t,r){super(t,r,"request",Ka,s=>s.id),this.core=t,this.logger=r}}class Va extends jp{constructor(t){var r;super(t),r=this,this.protocol="wc",this.version=2,this.name="client",this.events=new Ze.EventEmitter,this.on=(u,l)=>this.events.on(u,l),this.once=(u,l)=>this.events.once(u,l),this.off=(u,l)=>this.events.off(u,l),this.removeListener=(u,l)=>this.events.removeListener(u,l),this.removeAllListeners=u=>this.events.removeAllListeners(u),this.connect=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.connect(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.pair=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.pair(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.approve=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.approve(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.reject=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.reject(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.update=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.update(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.extend=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.extend(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.request=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.request(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.respond=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.respond(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.ping=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.ping(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.emit=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.emit(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.disconnect=function(){var u=(0,v.Z)(function*(l){try{return yield r.engine.disconnect(l)}catch(f){throw r.logger.error(f.message),f}});return function(l){return u.apply(this,arguments)}}(),this.find=u=>{try{return this.engine.find(u)}catch(l){throw this.logger.error(l.message),l}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(u){throw this.logger.error(u.message),u}},this.name=t?.name||"client",this.metadata=t?.metadata||function cn(){return(0,A.D)()||{name:"",description:"",url:"",icons:[""]}}();const s=typeof t?.logger<"u"&&"string"!=typeof t?.logger?t.logger:(0,Le.gw)((0,Le.jI)({level:t?.logger||"error"}));this.core=t?.core||new Fv(t),this.logger=(0,Le.Ep)(s,this.name),this.session=new Vv(this.core,this.logger),this.proposal=new Hv(this.core,this.logger),this.pendingRequest=new Wv(this.core,this.logger),this.engine=new Bv(this)}static init(t){return(0,v.Z)(function*(){const r=new Va(t);return yield r.initialize(),r})()}get context(){return(0,Le.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}initialize(){var t=this;return(0,v.Z)(function*(){t.logger.trace("Initialized");try{yield t.core.start(),yield t.session.init(),yield t.proposal.init(),yield t.pendingRequest.init(),yield t.engine.init(),t.core.verify.init({verifyUrl:t.metadata.verifyUrl}),t.logger.info("SignClient Initialization Success")}catch(r){throw t.logger.info("SignClient Initialization Failure"),t.logger.error(r.message),r}})()}}var ti=te(901);const Tl="wc@2:universal_provider:";var a,t,fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wa={exports:{}};a=Wa,t=Wa.exports,function(){var r,f="Expected a function",w="__lodash_hash_undefined__",E="__lodash_placeholder__",_i=1/0,ni=9007199254740991,Pn=4294967295,z_=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Li="[object Arguments]",ao="[object Array]",ds="[object Boolean]",ps="[object Date]",co="[object Error]",uo="[object Function]",Vl="[object GeneratorFunction]",pn="[object Map]",gs="[object Number]",Ln="[object Object]",Wl="[object Promise]",ys="[object RegExp]",gn="[object Set]",vs="[object String]",lo="[object Symbol]",_s="[object WeakMap]",ms="[object ArrayBuffer]",qi="[object DataView]",ec="[object Float32Array]",tc="[object Float64Array]",rc="[object Int8Array]",nc="[object Int16Array]",ic="[object Int32Array]",sc="[object Uint8Array]",oc="[object Uint8ClampedArray]",ac="[object Uint16Array]",cc="[object Uint32Array]",G_=/\b__p \+= '';/g,J_=/\b(__p \+=) '' \+/g,Q_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gl=/&(?:amp|lt|gt|quot|#39);/g,Jl=/[&<>"']/g,Y_=RegExp(Gl.source),X_=RegExp(Jl.source),em=/<%-([\s\S]+?)%>/g,tm=/<%([\s\S]+?)%>/g,Ql=/<%=([\s\S]+?)%>/g,rm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nm=/^\w*$/,im=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,uc=/[\\^$.*+?()[\]{}|]/g,sm=RegExp(uc.source),lc=/^\s+/,om=/\s/,am=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,cm=/\{\n\/\* \[wrapped with (.+)\] \*/,um=/,? & /,lm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fm=/[()=,{}\[\]\/\s]/,hm=/\\(\\)?/g,dm=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yl=/\w*$/,pm=/^[-+]0x[0-9a-f]+$/i,gm=/^0b[01]+$/i,ym=/^\[object .+?Constructor\]$/,vm=/^0o[0-7]+$/i,_m=/^(?:0|[1-9]\d*)$/,mm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fo=/($^)/,bm=/['\n\r\u2028\u2029\\]/g,ho="\\ud800-\\udfff",Xl="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ef="\\u2700-\\u27bf",tf="a-z\\xdf-\\xf6\\xf8-\\xff",rf="A-Z\\xc0-\\xd6\\xd8-\\xde",nf="\\ufe0e\\ufe0f",sf="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rm="["+ho+"]",of="["+sf+"]",po="["+Xl+"]",af="\\d+",Nm="["+ef+"]",cf="["+tf+"]",uf="[^"+ho+sf+af+ef+tf+rf+"]",hc="\\ud83c[\\udffb-\\udfff]",lf="[^"+ho+"]",dc="(?:\\ud83c[\\udde6-\\uddff]){2}",pc="[\\ud800-\\udbff][\\udc00-\\udfff]",Ui="["+rf+"]",hf="(?:"+cf+"|"+uf+")",Cm="(?:"+Ui+"|"+uf+")",df="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",pf="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",gf="(?:"+po+"|"+hc+")?",yf="["+nf+"]?",vf=yf+gf+"(?:\\u200d(?:"+[lf,dc,pc].join("|")+")"+yf+gf+")*",Mm="(?:"+[Nm,dc,pc].join("|")+")"+vf,jm="(?:"+[lf+po+"?",po,dc,pc,Rm].join("|")+")",$m=RegExp("['\u2019]","g"),Lm=RegExp(po,"g"),gc=RegExp(hc+"(?="+hc+")|"+jm+vf,"g"),qm=RegExp([Ui+"?"+cf+"+"+df+"(?="+[of,Ui,"$"].join("|")+")",Cm+"+"+pf+"(?="+[of,Ui+hf,"$"].join("|")+")",Ui+"?"+hf+"+"+df,Ui+"+"+pf,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",af,Mm].join("|"),"g"),Um=RegExp("[\\u200d"+ho+Xl+nf+"]"),Zm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],km=-1,wt={};wt[ec]=wt[tc]=wt[rc]=wt[nc]=wt[ic]=wt[sc]=wt[oc]=wt[ac]=wt[cc]=!0,wt[Li]=wt[ao]=wt[ms]=wt[ds]=wt[qi]=wt[ps]=wt[co]=wt[uo]=wt[pn]=wt[gs]=wt[Ln]=wt[ys]=wt[gn]=wt[vs]=wt[_s]=!1;var dt={};dt[Li]=dt[ao]=dt[ms]=dt[qi]=dt[ds]=dt[ps]=dt[ec]=dt[tc]=dt[rc]=dt[nc]=dt[ic]=dt[pn]=dt[gs]=dt[Ln]=dt[ys]=dt[gn]=dt[vs]=dt[lo]=dt[sc]=dt[oc]=dt[ac]=dt[cc]=!0,dt[co]=dt[uo]=dt[_s]=!1;var Vm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wm=parseFloat,Gm=parseInt,_f="object"==typeof fs&&fs&&fs.Object===Object&&fs,Jm="object"==typeof self&&self&&self.Object===Object&&self,br=_f||Jm||Function("return this")(),yc=t&&!t.nodeType&&t,mi=yc&&a&&!a.nodeType&&a,mf=mi&&mi.exports===yc,vc=mf&&_f.process,Xr=function(){try{return mi&&mi.require&&mi.require("util").types||vc&&vc.binding&&vc.binding("util")}catch{}}(),bf=Xr&&Xr.isArrayBuffer,wf=Xr&&Xr.isDate,xf=Xr&&Xr.isMap,Ef=Xr&&Xr.isRegExp,If=Xr&&Xr.isSet,Sf=Xr&&Xr.isTypedArray;function zr(O,q,T){switch(T.length){case 0:return O.call(q);case 1:return O.call(q,T[0]);case 2:return O.call(q,T[0],T[1]);case 3:return O.call(q,T[0],T[1],T[2])}return O.apply(q,T)}function Qm(O,q,T,ue){for(var Ee=-1,Je=null==O?0:O.length;++Ee<Je;){var cr=O[Ee];q(ue,cr,T(cr),O)}return ue}function en(O,q){for(var T=-1,ue=null==O?0:O.length;++T<ue&&!1!==q(O[T],T,O););return O}function Ym(O,q){for(var T=null==O?0:O.length;T--&&!1!==q(O[T],T,O););return O}function Pf(O,q){for(var T=-1,ue=null==O?0:O.length;++T<ue;)if(!q(O[T],T,O))return!1;return!0}function ii(O,q){for(var T=-1,ue=null==O?0:O.length,Ee=0,Je=[];++T<ue;){var cr=O[T];q(cr,T,O)&&(Je[Ee++]=cr)}return Je}function go(O,q){return!(null==O||!O.length)&&Zi(O,q,0)>-1}function _c(O,q,T){for(var ue=-1,Ee=null==O?0:O.length;++ue<Ee;)if(T(q,O[ue]))return!0;return!1}function Pt(O,q){for(var T=-1,ue=null==O?0:O.length,Ee=Array(ue);++T<ue;)Ee[T]=q(O[T],T,O);return Ee}function si(O,q){for(var T=-1,ue=q.length,Ee=O.length;++T<ue;)O[Ee+T]=q[T];return O}function mc(O,q,T,ue){var Ee=-1,Je=null==O?0:O.length;for(ue&&Je&&(T=O[++Ee]);++Ee<Je;)T=q(T,O[Ee],Ee,O);return T}function Xm(O,q,T,ue){var Ee=null==O?0:O.length;for(ue&&Ee&&(T=O[--Ee]);Ee--;)T=q(T,O[Ee],Ee,O);return T}function bc(O,q){for(var T=-1,ue=null==O?0:O.length;++T<ue;)if(q(O[T],T,O))return!0;return!1}var e0=wc("length");function Of(O,q,T){var ue;return T(O,function(Ee,Je,cr){if(q(Ee,Je,cr))return ue=Je,!1}),ue}function yo(O,q,T,ue){for(var Ee=O.length,Je=T+(ue?1:-1);ue?Je--:++Je<Ee;)if(q(O[Je],Je,O))return Je;return-1}function Zi(O,q,T){return q==q?function p0(O,q,T){for(var ue=T-1,Ee=O.length;++ue<Ee;)if(O[ue]===q)return ue;return-1}(O,q,T):yo(O,Rf,T)}function n0(O,q,T,ue){for(var Ee=T-1,Je=O.length;++Ee<Je;)if(ue(O[Ee],q))return Ee;return-1}function Rf(O){return O!=O}function Nf(O,q){var T=null==O?0:O.length;return T?Ec(O,q)/T:NaN}function wc(O){return function(q){return null==q?r:q[O]}}function xc(O){return function(q){return null==O?r:O[q]}}function Af(O,q,T,ue,Ee){return Ee(O,function(Je,cr,ft){T=ue?(ue=!1,Je):q(T,Je,cr,ft)}),T}function Ec(O,q){for(var T,ue=-1,Ee=O.length;++ue<Ee;){var Je=q(O[ue]);Je!==r&&(T=T===r?Je:T+Je)}return T}function Ic(O,q){for(var T=-1,ue=Array(O);++T<O;)ue[T]=q(T);return ue}function Cf(O){return O&&O.slice(0,Mf(O)+1).replace(lc,"")}function kr(O){return function(q){return O(q)}}function Sc(O,q){return Pt(q,function(T){return O[T]})}function bs(O,q){return O.has(q)}function Tf(O,q){for(var T=-1,ue=O.length;++T<ue&&Zi(q,O[T],0)>-1;);return T}function Df(O,q){for(var T=O.length;T--&&Zi(q,O[T],0)>-1;);return T}var a0=xc({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),c0=xc({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function u0(O){return"\\"+Vm[O]}function zi(O){return Um.test(O)}function Pc(O){var q=-1,T=Array(O.size);return O.forEach(function(ue,Ee){T[++q]=[Ee,ue]}),T}function Ff(O,q){return function(T){return O(q(T))}}function oi(O,q){for(var T=-1,ue=O.length,Ee=0,Je=[];++T<ue;){var cr=O[T];(cr===q||cr===E)&&(O[T]=E,Je[Ee++]=T)}return Je}function vo(O){var q=-1,T=Array(O.size);return O.forEach(function(ue){T[++q]=ue}),T}function ki(O){return zi(O)?function v0(O){for(var q=gc.lastIndex=0;gc.test(O);)++q;return q}(O):e0(O)}function yn(O){return zi(O)?function _0(O){return O.match(gc)||[]}(O):function t0(O){return O.split("")}(O)}function Mf(O){for(var q=O.length;q--&&om.test(O.charAt(q)););return q}var y0=xc({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ki=function O(q){var e,T=(q=null==q?br:Ki.defaults(br.Object(),q,Ki.pick(br,zm))).Array,ue=q.Date,Ee=q.Error,Je=q.Function,cr=q.Math,ft=q.Object,Oc=q.RegExp,w0=q.String,tn=q.TypeError,_o=T.prototype,Bi=ft.prototype,mo=q["__core-js_shared__"],bo=Je.prototype.toString,nt=Bi.hasOwnProperty,E0=0,jf=(e=/[^.]+$/.exec(mo&&mo.keys&&mo.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"",wo=Bi.toString,I0=bo.call(ft),S0=br._,P0=Oc("^"+bo.call(nt).replace(uc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xo=mf?q.Buffer:r,ai=q.Symbol,Eo=q.Uint8Array,$f=xo?xo.allocUnsafe:r,Io=Ff(ft.getPrototypeOf,ft),Lf=ft.create,qf=Bi.propertyIsEnumerable,So=_o.splice,Uf=ai?ai.isConcatSpreadable:r,ws=ai?ai.iterator:r,bi=ai?ai.toStringTag:r,Po=function(){try{var e=Si(ft,"defineProperty");return e({},"",{}),e}catch{}}(),O0=q.clearTimeout!==br.clearTimeout&&q.clearTimeout,R0=ue&&ue.now!==br.Date.now&&ue.now,N0=q.setTimeout!==br.setTimeout&&q.setTimeout,Oo=cr.ceil,Ro=cr.floor,Rc=ft.getOwnPropertySymbols,A0=xo?xo.isBuffer:r,Zf=q.isFinite,C0=_o.join,T0=Ff(ft.keys,ft),ur=cr.max,Sr=cr.min,D0=ue.now,F0=q.parseInt,zf=cr.random,M0=_o.reverse,Nc=Si(q,"DataView"),xs=Si(q,"Map"),Ac=Si(q,"Promise"),Hi=Si(q,"Set"),Es=Si(q,"WeakMap"),Is=Si(ft,"create"),No=Es&&new Es,Vi={},j0=Pi(Nc),$0=Pi(xs),L0=Pi(Ac),q0=Pi(Hi),U0=Pi(Es),Ao=ai?ai.prototype:r,Ss=Ao?Ao.valueOf:r,kf=Ao?Ao.toString:r;function y(e){if(kt(e)&&!Se(e)&&!(e instanceof je)){if(e instanceof rn)return e;if(nt.call(e,"__wrapped__"))return Kh(e)}return new rn(e)}var Wi=function(){function e(){}return function(n){if(!jt(n))return{};if(Lf)return Lf(n);e.prototype=n;var o=new e;return e.prototype=r,o}}();function Co(){}function rn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}function je(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pn,this.__views__=[]}function wi(e){var n=-1,o=null==e?0:e.length;for(this.clear();++n<o;){var h=e[n];this.set(h[0],h[1])}}function qn(e){var n=-1,o=null==e?0:e.length;for(this.clear();++n<o;){var h=e[n];this.set(h[0],h[1])}}function Un(e){var n=-1,o=null==e?0:e.length;for(this.clear();++n<o;){var h=e[n];this.set(h[0],h[1])}}function xi(e){var n=-1,o=null==e?0:e.length;for(this.__data__=new Un;++n<o;)this.add(e[n])}function vn(e){var n=this.__data__=new qn(e);this.size=n.size}function Kf(e,n){var o=Se(e),h=!o&&Oi(e),p=!o&&!h&&hi(e),_=!o&&!h&&!p&&Yi(e),x=o||h||p||_,I=x?Ic(e.length,w0):[],R=I.length;for(var Z in e)(n||nt.call(e,Z))&&(!x||!("length"==Z||p&&("offset"==Z||"parent"==Z)||_&&("buffer"==Z||"byteLength"==Z||"byteOffset"==Z)||Kn(Z,R)))&&I.push(Z);return I}function Bf(e){var n=e.length;return n?e[Zc(0,n-1)]:r}function h1(e,n){return Bo(Lr(e),Ei(n,0,e.length))}function d1(e){return Bo(Lr(e))}function Cc(e,n,o){(o!==r&&!_n(e[n],o)||o===r&&!(n in e))&&Zn(e,n,o)}function Ps(e,n,o){var h=e[n];(!nt.call(e,n)||!_n(h,o)||o===r&&!(n in e))&&Zn(e,n,o)}function To(e,n){for(var o=e.length;o--;)if(_n(e[o][0],n))return o;return-1}function p1(e,n,o,h){return ci(e,function(p,_,x){n(h,p,o(p),x)}),h}function Hf(e,n){return e&&Rn(n,dr(n),e)}function Zn(e,n,o){"__proto__"==n&&Po?Po(e,n,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[n]=o}function Tc(e,n){for(var o=-1,h=n.length,p=T(h),_=null==e;++o<h;)p[o]=_?r:hu(e,n[o]);return p}function Ei(e,n,o){return e==e&&(o!==r&&(e=e<=o?e:o),n!==r&&(e=e>=n?e:n)),e}function nn(e,n,o,h,p,_){var x,I=1&n,R=2&n,Z=4&n;if(o&&(x=p?o(e,h,p,_):o(e)),x!==r)return x;if(!jt(e))return e;var z=Se(e);if(z){if(x=function nb(e){var n=e.length,o=new e.constructor(n);return n&&"string"==typeof e[0]&&nt.call(e,"index")&&(o.index=e.index,o.input=e.input),o}(e),!I)return Lr(e,x)}else{var H=Pr(e),ne=H==uo||H==Vl;if(hi(e))return yh(e,I);if(H==Ln||H==Li||ne&&!p){if(x=R||ne?{}:Mh(e),!I)return R?function H1(e,n){return Rn(e,Dh(e),n)}(e,function g1(e,n){return e&&Rn(n,Ur(n),e)}(x,e)):function B1(e,n){return Rn(e,tu(e),n)}(e,Hf(x,e))}else{if(!dt[H])return p?e:{};x=function ib(e,n,o){var h=e.constructor;switch(n){case ms:return Wc(e);case ds:case ps:return new h(+e);case qi:return function Z1(e,n){var o=n?Wc(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)}(e,o);case ec:case tc:case rc:case nc:case ic:case sc:case oc:case ac:case cc:return vh(e,o);case pn:return new h;case gs:case vs:return new h(e);case ys:return function z1(e){var n=new e.constructor(e.source,Yl.exec(e));return n.lastIndex=e.lastIndex,n}(e);case gn:return new h;case lo:return function k1(e){return Ss?ft(Ss.call(e)):{}}(e)}}(e,H,I)}}_||(_=new vn);var fe=_.get(e);if(fe)return fe;_.set(e,x),ld(e)?e.forEach(function(ve){x.add(nn(ve,n,o,ve,e,_))}):cd(e)&&e.forEach(function(ve,Me){x.set(Me,nn(ve,n,o,Me,e,_))});var Ne=z?r:(Z?R?Yc:Qc:R?Ur:dr)(e);return en(Ne||e,function(ve,Me){Ne&&(ve=e[Me=ve]),Ps(x,Me,nn(ve,n,o,Me,e,_))}),x}function Vf(e,n,o){var h=o.length;if(null==e)return!h;for(e=ft(e);h--;){var p=o[h],x=e[p];if(x===r&&!(p in e)||!(0,n[p])(x))return!1}return!0}function Wf(e,n,o){if("function"!=typeof e)throw new tn(f);return Ds(function(){e.apply(r,o)},n)}function Os(e,n,o,h){var p=-1,_=go,x=!0,I=e.length,R=[],Z=n.length;if(!I)return R;o&&(n=Pt(n,kr(o))),h?(_=_c,x=!1):n.length>=200&&(_=bs,x=!1,n=new xi(n));e:for(;++p<I;){var z=e[p],H=null==o?z:o(z);if(z=h||0!==z?z:0,x&&H==H){for(var ne=Z;ne--;)if(n[ne]===H)continue e;R.push(z)}else _(n,H,h)||R.push(z)}return R}y.templateSettings={escape:em,evaluate:tm,interpolate:Ql,variable:"",imports:{_:y}},(y.prototype=Co.prototype).constructor=y,(rn.prototype=Wi(Co.prototype)).constructor=rn,(je.prototype=Wi(Co.prototype)).constructor=je,wi.prototype.clear=function K0(){this.__data__=Is?Is(null):{},this.size=0},wi.prototype.delete=function B0(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},wi.prototype.get=function H0(e){var n=this.__data__;if(Is){var o=n[e];return o===w?r:o}return nt.call(n,e)?n[e]:r},wi.prototype.has=function V0(e){var n=this.__data__;return Is?n[e]!==r:nt.call(n,e)},wi.prototype.set=function W0(e,n){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=Is&&n===r?w:n,this},qn.prototype.clear=function G0(){this.__data__=[],this.size=0},qn.prototype.delete=function J0(e){var n=this.__data__,o=To(n,e);return!(o<0||(o==n.length-1?n.pop():So.call(n,o,1),--this.size,0))},qn.prototype.get=function Q0(e){var n=this.__data__,o=To(n,e);return o<0?r:n[o][1]},qn.prototype.has=function Y0(e){return To(this.__data__,e)>-1},qn.prototype.set=function X0(e,n){var o=this.__data__,h=To(o,e);return h<0?(++this.size,o.push([e,n])):o[h][1]=n,this},Un.prototype.clear=function e1(){this.size=0,this.__data__={hash:new wi,map:new(xs||qn),string:new wi}},Un.prototype.delete=function t1(e){var n=Ko(this,e).delete(e);return this.size-=n?1:0,n},Un.prototype.get=function r1(e){return Ko(this,e).get(e)},Un.prototype.has=function n1(e){return Ko(this,e).has(e)},Un.prototype.set=function i1(e,n){var o=Ko(this,e),h=o.size;return o.set(e,n),this.size+=o.size==h?0:1,this},xi.prototype.add=xi.prototype.push=function s1(e){return this.__data__.set(e,w),this},xi.prototype.has=function o1(e){return this.__data__.has(e)},vn.prototype.clear=function a1(){this.__data__=new qn,this.size=0},vn.prototype.delete=function c1(e){var n=this.__data__,o=n.delete(e);return this.size=n.size,o},vn.prototype.get=function u1(e){return this.__data__.get(e)},vn.prototype.has=function l1(e){return this.__data__.has(e)},vn.prototype.set=function f1(e,n){var o=this.__data__;if(o instanceof qn){var h=o.__data__;if(!xs||h.length<199)return h.push([e,n]),this.size=++o.size,this;o=this.__data__=new Un(h)}return o.set(e,n),this.size=o.size,this};var ci=wh(On),Gf=wh(Fc,!0);function v1(e,n){var o=!0;return ci(e,function(h,p,_){return o=!!n(h,p,_)}),o}function Do(e,n,o){for(var h=-1,p=e.length;++h<p;){var _=e[h],x=n(_);if(null!=x&&(I===r?x==x&&!Br(x):o(x,I)))var I=x,R=_}return R}function Jf(e,n){var o=[];return ci(e,function(h,p,_){n(h,p,_)&&o.push(h)}),o}function wr(e,n,o,h,p){var _=-1,x=e.length;for(o||(o=ob),p||(p=[]);++_<x;){var I=e[_];n>0&&o(I)?n>1?wr(I,n-1,o,h,p):si(p,I):h||(p[p.length]=I)}return p}var Dc=xh(),Qf=xh(!0);function On(e,n){return e&&Dc(e,n,dr)}function Fc(e,n){return e&&Qf(e,n,dr)}function Fo(e,n){return ii(n,function(o){return Bn(e[o])})}function Ii(e,n){for(var o=0,h=(n=li(n,e)).length;null!=e&&o<h;)e=e[Nn(n[o++])];return o&&o==h?e:r}function Yf(e,n,o){var h=n(e);return Se(e)?h:si(h,o(e))}function Ar(e){return null==e?e===r?"[object Undefined]":"[object Null]":bi&&bi in ft(e)?function eb(e){var n=nt.call(e,bi),o=e[bi];try{e[bi]=r;var h=!0}catch{}var p=wo.call(e);return h&&(n?e[bi]=o:delete e[bi]),p}(e):function db(e){return wo.call(e)}(e)}function Mc(e,n){return e>n}function m1(e,n){return null!=e&&nt.call(e,n)}function b1(e,n){return null!=e&&n in ft(e)}function jc(e,n,o){for(var h=o?_c:go,p=e[0].length,_=e.length,x=_,I=T(_),R=1/0,Z=[];x--;){var z=e[x];x&&n&&(z=Pt(z,kr(n))),R=Sr(z.length,R),I[x]=!o&&(n||p>=120&&z.length>=120)?new xi(x&&z):r}z=e[0];var H=-1,ne=I[0];e:for(;++H<p&&Z.length<R;){var fe=z[H],ye=n?n(fe):fe;if(fe=o||0!==fe?fe:0,!(ne?bs(ne,ye):h(Z,ye,o))){for(x=_;--x;){var Ne=I[x];if(!(Ne?bs(Ne,ye):h(e[x],ye,o)))continue e}ne&&ne.push(ye),Z.push(fe)}}return Z}function Rs(e,n,o){var h=null==(e=qh(e,n=li(n,e)))?e:e[Nn(on(n))];return null==h?r:zr(h,e,o)}function Xf(e){return kt(e)&&Ar(e)==Li}function Ns(e,n,o,h,p){return e===n||(null==e||null==n||!kt(e)&&!kt(n)?e!=e&&n!=n:function S1(e,n,o,h,p,_){var x=Se(e),I=Se(n),R=x?ao:Pr(e),Z=I?ao:Pr(n),z=(R=R==Li?Ln:R)==Ln,H=(Z=Z==Li?Ln:Z)==Ln,ne=R==Z;if(ne&&hi(e)){if(!hi(n))return!1;x=!0,z=!1}if(ne&&!z)return _||(_=new vn),x||Yi(e)?Th(e,n,o,h,p,_):function Y1(e,n,o,h,p,_,x){switch(o){case qi:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case ms:return!(e.byteLength!=n.byteLength||!_(new Eo(e),new Eo(n)));case ds:case ps:case gs:return _n(+e,+n);case co:return e.name==n.name&&e.message==n.message;case ys:case vs:return e==n+"";case pn:var I=Pc;case gn:if(I||(I=vo),e.size!=n.size&&!(1&h))return!1;var Z=x.get(e);if(Z)return Z==n;h|=2,x.set(e,n);var z=Th(I(e),I(n),h,p,_,x);return x.delete(e),z;case lo:if(Ss)return Ss.call(e)==Ss.call(n)}return!1}(e,n,R,o,h,p,_);if(!(1&o)){var fe=z&&nt.call(e,"__wrapped__"),ye=H&&nt.call(n,"__wrapped__");if(fe||ye){var Ne=fe?e.value():e,ve=ye?n.value():n;return _||(_=new vn),p(Ne,ve,o,h,_)}}return!!ne&&(_||(_=new vn),function X1(e,n,o,h,p,_){var x=1&o,I=Qc(e),R=I.length;if(R!=Qc(n).length&&!x)return!1;for(var H=R;H--;){var ne=I[H];if(!(x?ne in n:nt.call(n,ne)))return!1}var fe=_.get(e),ye=_.get(n);if(fe&&ye)return fe==n&&ye==e;var Ne=!0;_.set(e,n),_.set(n,e);for(var ve=x;++H<R;){var Me=e[ne=I[H]],qe=n[ne];if(h)var Hr=x?h(qe,Me,ne,n,e,_):h(Me,qe,ne,e,n,_);if(!(Hr===r?Me===qe||p(Me,qe,o,h,_):Hr)){Ne=!1;break}ve||(ve="constructor"==ne)}if(Ne&&!ve){var Tr=e.constructor,Vr=n.constructor;Tr!=Vr&&"constructor"in e&&"constructor"in n&&!("function"==typeof Tr&&Tr instanceof Tr&&"function"==typeof Vr&&Vr instanceof Vr)&&(Ne=!1)}return _.delete(e),_.delete(n),Ne}(e,n,o,h,p,_))}(e,n,o,h,Ns,p))}function $c(e,n,o,h){var p=o.length,_=p,x=!h;if(null==e)return!_;for(e=ft(e);p--;){var I=o[p];if(x&&I[2]?I[1]!==e[I[0]]:!(I[0]in e))return!1}for(;++p<_;){var R=(I=o[p])[0],Z=e[R],z=I[1];if(x&&I[2]){if(Z===r&&!(R in e))return!1}else{var H=new vn;if(h)var ne=h(Z,z,R,e,n,H);if(!(ne===r?Ns(z,Z,3,h,H):ne))return!1}}return!0}function eh(e){return!(!jt(e)||function cb(e){return!!jf&&jf in e}(e))&&(Bn(e)?P0:ym).test(Pi(e))}function th(e){return"function"==typeof e?e:null==e?Zr:"object"==typeof e?Se(e)?ih(e[0],e[1]):nh(e):Ed(e)}function Lc(e){if(!Ts(e))return T0(e);var n=[];for(var o in ft(e))nt.call(e,o)&&"constructor"!=o&&n.push(o);return n}function qc(e,n){return e<n}function rh(e,n){var o=-1,h=qr(e)?T(e.length):[];return ci(e,function(p,_,x){h[++o]=n(p,_,x)}),h}function nh(e){var n=eu(e);return 1==n.length&&n[0][2]?$h(n[0][0],n[0][1]):function(o){return o===e||$c(o,e,n)}}function ih(e,n){return ru(e)&&jh(n)?$h(Nn(e),n):function(o){var h=hu(o,e);return h===r&&h===n?du(o,e):Ns(n,h,3)}}function Mo(e,n,o,h,p){e!==n&&Dc(n,function(_,x){if(p||(p=new vn),jt(_))!function C1(e,n,o,h,p,_,x){var I=iu(e,o),R=iu(n,o),Z=x.get(R);if(Z)Cc(e,o,Z);else{var z=_?_(I,R,o+"",e,n,x):r,H=z===r;if(H){var ne=Se(R),fe=!ne&&hi(R),ye=!ne&&!fe&&Yi(R);z=R,ne||fe||ye?Se(I)?z=I:Wt(I)?z=Lr(I):fe?(H=!1,z=yh(R,!0)):ye?(H=!1,z=vh(R,!0)):z=[]:Fs(R)||Oi(R)?(z=I,Oi(I)?z=dd(I):(!jt(I)||Bn(I))&&(z=Mh(R))):H=!1}H&&(x.set(R,z),p(z,R,h,_,x),x.delete(R)),Cc(e,o,z)}}(e,n,x,o,Mo,h,p);else{var I=h?h(iu(e,x),_,x+"",e,n,p):r;I===r&&(I=_),Cc(e,x,I)}},Ur)}function sh(e,n){var o=e.length;if(o)return Kn(n+=n<0?o:0,o)?e[n]:r}function oh(e,n,o){n=n.length?Pt(n,function(_){return Se(_)?function(x){return Ii(x,1===_.length?_[0]:_)}:_}):[Zr];var h=-1;return n=Pt(n,kr(ge())),function i0(O,q){var T=O.length;for(O.sort(q);T--;)O[T]=O[T].value;return O}(rh(e,function(_,x,I){return{criteria:Pt(n,function(Z){return Z(_)}),index:++h,value:_}}),function(_,x){return function K1(e,n,o){for(var h=-1,p=e.criteria,_=n.criteria,x=p.length,I=o.length;++h<x;){var R=_h(p[h],_[h]);if(R)return h>=I?R:R*("desc"==o[h]?-1:1)}return e.index-n.index}(_,x,o)})}function ah(e,n,o){for(var h=-1,p=n.length,_={};++h<p;){var x=n[h],I=Ii(e,x);o(I,x)&&As(_,li(x,e),I)}return _}function Uc(e,n,o,h){var p=h?n0:Zi,_=-1,x=n.length,I=e;for(e===n&&(n=Lr(n)),o&&(I=Pt(e,kr(o)));++_<x;)for(var R=0,Z=n[_],z=o?o(Z):Z;(R=p(I,z,R,h))>-1;)I!==e&&So.call(I,R,1),So.call(e,R,1);return e}function ch(e,n){for(var o=e?n.length:0,h=o-1;o--;){var p=n[o];if(o==h||p!==_){var _=p;Kn(p)?So.call(e,p,1):Kc(e,p)}}return e}function Zc(e,n){return e+Ro(zf()*(n-e+1))}function zc(e,n){var o="";if(!e||n<1||n>ni)return o;do{n%2&&(o+=e),(n=Ro(n/2))&&(e+=e)}while(n);return o}function Ae(e,n){return su(Lh(e,n,Zr),e+"")}function M1(e){return Bf(Xi(e))}function j1(e,n){var o=Xi(e);return Bo(o,Ei(n,0,o.length))}function As(e,n,o,h){if(!jt(e))return e;for(var p=-1,_=(n=li(n,e)).length,x=_-1,I=e;null!=I&&++p<_;){var R=Nn(n[p]),Z=o;if("__proto__"===R||"constructor"===R||"prototype"===R)return e;if(p!=x){var z=I[R];(Z=h?h(z,R,I):r)===r&&(Z=jt(z)?z:Kn(n[p+1])?[]:{})}Ps(I,R,Z),I=I[R]}return e}var uh=No?function(e,n){return No.set(e,n),e}:Zr,$1=Po?function(e,n){return Po(e,"toString",{configurable:!0,enumerable:!1,value:gu(n),writable:!0})}:Zr;function L1(e){return Bo(Xi(e))}function sn(e,n,o){var h=-1,p=e.length;n<0&&(n=-n>p?0:p+n),(o=o>p?p:o)<0&&(o+=p),p=n>o?0:o-n>>>0,n>>>=0;for(var _=T(p);++h<p;)_[h]=e[h+n];return _}function q1(e,n){var o;return ci(e,function(h,p,_){return!(o=n(h,p,_))}),!!o}function jo(e,n,o){var h=0,p=null==e?h:e.length;if("number"==typeof n&&n==n&&p<=2147483647){for(;h<p;){var _=h+p>>>1,x=e[_];null!==x&&!Br(x)&&(o?x<=n:x<n)?h=_+1:p=_}return p}return kc(e,n,Zr,o)}function kc(e,n,o,h){var p=0,_=null==e?0:e.length;if(0===_)return 0;for(var x=(n=o(n))!=n,I=null===n,R=Br(n),Z=n===r;p<_;){var z=Ro((p+_)/2),H=o(e[z]),ne=H!==r,fe=null===H,ye=H==H,Ne=Br(H);if(x)var ve=h||ye;else ve=Z?ye&&(h||ne):I?ye&&ne&&(h||!fe):R?ye&&ne&&!fe&&(h||!Ne):!fe&&!Ne&&(h?H<=n:H<n);ve?p=z+1:_=z}return Sr(_,4294967294)}function lh(e,n){for(var o=-1,h=e.length,p=0,_=[];++o<h;){var x=e[o],I=n?n(x):x;if(!o||!_n(I,R)){var R=I;_[p++]=0===x?0:x}}return _}function fh(e){return"number"==typeof e?e:Br(e)?NaN:+e}function Kr(e){if("string"==typeof e)return e;if(Se(e))return Pt(e,Kr)+"";if(Br(e))return kf?kf.call(e):"";var n=e+"";return"0"==n&&1/e==-_i?"-0":n}function ui(e,n,o){var h=-1,p=go,_=e.length,x=!0,I=[],R=I;if(o)x=!1,p=_c;else if(_>=200){var Z=n?null:J1(e);if(Z)return vo(Z);x=!1,p=bs,R=new xi}else R=n?[]:I;e:for(;++h<_;){var z=e[h],H=n?n(z):z;if(z=o||0!==z?z:0,x&&H==H){for(var ne=R.length;ne--;)if(R[ne]===H)continue e;n&&R.push(H),I.push(z)}else p(R,H,o)||(R!==I&&R.push(H),I.push(z))}return I}function Kc(e,n){return null==(e=qh(e,n=li(n,e)))||delete e[Nn(on(n))]}function hh(e,n,o,h){return As(e,n,o(Ii(e,n)),h)}function $o(e,n,o,h){for(var p=e.length,_=h?p:-1;(h?_--:++_<p)&&n(e[_],_,e););return o?sn(e,h?0:_,h?_+1:p):sn(e,h?_+1:0,h?p:_)}function dh(e,n){var o=e;return o instanceof je&&(o=o.value()),mc(n,function(h,p){return p.func.apply(p.thisArg,si([h],p.args))},o)}function Bc(e,n,o){var h=e.length;if(h<2)return h?ui(e[0]):[];for(var p=-1,_=T(h);++p<h;)for(var x=e[p],I=-1;++I<h;)I!=p&&(_[p]=Os(_[p]||x,e[I],n,o));return ui(wr(_,1),n,o)}function ph(e,n,o){for(var h=-1,p=e.length,_=n.length,x={};++h<p;)o(x,e[h],h<_?n[h]:r);return x}function Hc(e){return Wt(e)?e:[]}function Vc(e){return"function"==typeof e?e:Zr}function li(e,n){return Se(e)?e:ru(e,n)?[e]:kh(Ye(e))}var U1=Ae;function fi(e,n,o){var h=e.length;return o=o===r?h:o,!n&&o>=h?e:sn(e,n,o)}var gh=O0||function(e){return br.clearTimeout(e)};function yh(e,n){if(n)return e.slice();var o=e.length,h=$f?$f(o):new e.constructor(o);return e.copy(h),h}function Wc(e){var n=new e.constructor(e.byteLength);return new Eo(n).set(new Eo(e)),n}function vh(e,n){var o=n?Wc(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)}function _h(e,n){if(e!==n){var o=e!==r,h=null===e,p=e==e,_=Br(e),x=n!==r,I=null===n,R=n==n,Z=Br(n);if(!I&&!Z&&!_&&e>n||_&&x&&R&&!I&&!Z||h&&x&&R||!o&&R||!p)return 1;if(!h&&!_&&!Z&&e<n||Z&&o&&p&&!h&&!_||I&&o&&p||!x&&p||!R)return-1}return 0}function mh(e,n,o,h){for(var p=-1,_=e.length,x=o.length,I=-1,R=n.length,Z=ur(_-x,0),z=T(R+Z),H=!h;++I<R;)z[I]=n[I];for(;++p<x;)(H||p<_)&&(z[o[p]]=e[p]);for(;Z--;)z[I++]=e[p++];return z}function bh(e,n,o,h){for(var p=-1,_=e.length,x=-1,I=o.length,R=-1,Z=n.length,z=ur(_-I,0),H=T(z+Z),ne=!h;++p<z;)H[p]=e[p];for(var fe=p;++R<Z;)H[fe+R]=n[R];for(;++x<I;)(ne||p<_)&&(H[fe+o[x]]=e[p++]);return H}function Lr(e,n){var o=-1,h=e.length;for(n||(n=T(h));++o<h;)n[o]=e[o];return n}function Rn(e,n,o,h){var p=!o;o||(o={});for(var _=-1,x=n.length;++_<x;){var I=n[_],R=h?h(o[I],e[I],I,o,e):r;R===r&&(R=e[I]),p?Zn(o,I,R):Ps(o,I,R)}return o}function Lo(e,n){return function(o,h){var p=Se(o)?Qm:p1,_=n?n():{};return p(o,e,ge(h,2),_)}}function Gi(e){return Ae(function(n,o){var h=-1,p=o.length,_=p>1?o[p-1]:r,x=p>2?o[2]:r;for(_=e.length>3&&"function"==typeof _?(p--,_):r,x&&Cr(o[0],o[1],x)&&(_=p<3?r:_,p=1),n=ft(n);++h<p;){var I=o[h];I&&e(n,I,h,_)}return n})}function wh(e,n){return function(o,h){if(null==o)return o;if(!qr(o))return e(o,h);for(var p=o.length,_=n?p:-1,x=ft(o);(n?_--:++_<p)&&!1!==h(x[_],_,x););return o}}function xh(e){return function(n,o,h){for(var p=-1,_=ft(n),x=h(n),I=x.length;I--;){var R=x[e?I:++p];if(!1===o(_[R],R,_))break}return n}}function Eh(e){return function(n){var o=zi(n=Ye(n))?yn(n):r,h=o?o[0]:n.charAt(0),p=o?fi(o,1).join(""):n.slice(1);return h[e]()+p}}function Ji(e){return function(n){return mc(wd(bd(n).replace($m,"")),e,"")}}function Cs(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var o=Wi(e.prototype),h=e.apply(o,n);return jt(h)?h:o}}function Ih(e){return function(n,o,h){var p=ft(n);if(!qr(n)){var _=ge(o,3);n=dr(n),o=function(I){return _(p[I],I,p)}}var x=e(n,o,h);return x>-1?p[_?n[x]:x]:r}}function Sh(e){return kn(function(n){var o=n.length,h=o,p=rn.prototype.thru;for(e&&n.reverse();h--;){var _=n[h];if("function"!=typeof _)throw new tn(f);if(p&&!x&&"wrapper"==ko(_))var x=new rn([],!0)}for(h=x?h:o;++h<o;){var I=ko(_=n[h]),R="wrapper"==I?Xc(_):r;x=R&&nu(R[0])&&424==R[1]&&!R[4].length&&1==R[9]?x[ko(R[0])].apply(x,R[3]):1==_.length&&nu(_)?x[I]():x.thru(_)}return function(){var Z=arguments,z=Z[0];if(x&&1==Z.length&&Se(z))return x.plant(z).value();for(var H=0,ne=o?n[H].apply(this,Z):z;++H<o;)ne=n[H].call(this,ne);return ne}})}function qo(e,n,o,h,p,_,x,I,R,Z){var z=128&n,H=1&n,ne=2&n,fe=24&n,ye=512&n,Ne=ne?r:Cs(e);return function ve(){for(var Me=arguments.length,qe=T(Me),Hr=Me;Hr--;)qe[Hr]=arguments[Hr];if(fe)var Tr=Qi(ve),Vr=function o0(O,q){for(var T=O.length,ue=0;T--;)O[T]===q&&++ue;return ue}(qe,Tr);if(h&&(qe=mh(qe,h,p,fe)),_&&(qe=bh(qe,_,x,fe)),Me-=Vr,fe&&Me<Z){var Gt=oi(qe,Tr);return Rh(e,n,qo,ve.placeholder,o,qe,Gt,I,R,Z-Me)}var mn=H?o:this,Vn=ne?mn[e]:e;return Me=qe.length,I?qe=function pb(e,n){for(var o=e.length,h=Sr(n.length,o),p=Lr(e);h--;){var _=n[h];e[h]=Kn(_,o)?p[_]:r}return e}(qe,I):ye&&Me>1&&qe.reverse(),z&&R<Me&&(qe.length=R),this&&this!==br&&this instanceof ve&&(Vn=Ne||Cs(Vn)),Vn.apply(mn,qe)}}function Ph(e,n){return function(o,h){return function x1(e,n,o,h){return On(e,function(p,_,x){n(h,o(p),_,x)}),h}(o,e,n(h),{})}}function Uo(e,n){return function(o,h){var p;if(o===r&&h===r)return n;if(o!==r&&(p=o),h!==r){if(p===r)return h;"string"==typeof o||"string"==typeof h?(o=Kr(o),h=Kr(h)):(o=fh(o),h=fh(h)),p=e(o,h)}return p}}function Gc(e){return kn(function(n){return n=Pt(n,kr(ge())),Ae(function(o){var h=this;return e(n,function(p){return zr(p,h,o)})})})}function Zo(e,n){var o=(n=n===r?" ":Kr(n)).length;if(o<2)return o?zc(n,e):n;var h=zc(n,Oo(e/ki(n)));return zi(n)?fi(yn(h),0,e).join(""):h.slice(0,e)}function Oh(e){return function(n,o,h){return h&&"number"!=typeof h&&Cr(n,o,h)&&(o=h=r),n=Hn(n),o===r?(o=n,n=0):o=Hn(o),function F1(e,n,o,h){for(var p=-1,_=ur(Oo((n-e)/(o||1)),0),x=T(_);_--;)x[h?_:++p]=e,e+=o;return x}(n,o,h=h===r?n<o?1:-1:Hn(h),e)}}function zo(e){return function(n,o){return"string"==typeof n&&"string"==typeof o||(n=an(n),o=an(o)),e(n,o)}}function Rh(e,n,o,h,p,_,x,I,R,Z){var z=8&n;n|=z?32:64,4&(n&=~(z?64:32))||(n&=-4);var Ne=[e,n,p,z?_:r,z?x:r,z?r:_,z?r:x,I,R,Z],ve=o.apply(r,Ne);return nu(e)&&Uh(ve,Ne),ve.placeholder=h,Zh(ve,e,n)}function Jc(e){var n=cr[e];return function(o,h){if(o=an(o),(h=null==h?0:Sr(Re(h),292))&&Zf(o)){var p=(Ye(o)+"e").split("e");return+((p=(Ye(n(p[0]+"e"+(+p[1]+h)))+"e").split("e"))[0]+"e"+(+p[1]-h))}return n(o)}}var J1=Hi&&1/vo(new Hi([,-0]))[1]==_i?function(e){return new Hi(e)}:_u;function Nh(e){return function(n){var o=Pr(n);return o==pn?Pc(n):o==gn?function d0(O){var q=-1,T=Array(O.size);return O.forEach(function(ue){T[++q]=[ue,ue]}),T}(n):function s0(O,q){return Pt(q,function(T){return[T,O[T]]})}(n,e(n))}}function zn(e,n,o,h,p,_,x,I){var R=2&n;if(!R&&"function"!=typeof e)throw new tn(f);var Z=h?h.length:0;if(Z||(n&=-97,h=p=r),x=x===r?x:ur(Re(x),0),I=I===r?I:Re(I),Z-=p?p.length:0,64&n){var z=h,H=p;h=p=r}var ne=R?r:Xc(e),fe=[e,n,o,h,p,z,H,_,x,I];if(ne&&function fb(e,n){var o=e[1],h=n[1],p=o|h;if(!(p<131)&&!(128==h&&8==o||128==h&&256==o&&e[7].length<=n[8]||384==h&&n[7].length<=n[8]&&8==o))return e;1&h&&(e[2]=n[2],p|=1&o?0:4);var I=n[3];if(I){var R=e[3];e[3]=R?mh(R,I,n[4]):I,e[4]=R?oi(e[3],E):n[4]}(I=n[5])&&(e[5]=(R=e[5])?bh(R,I,n[6]):I,e[6]=R?oi(e[5],E):n[6]),(I=n[7])&&(e[7]=I),128&h&&(e[8]=null==e[8]?n[8]:Sr(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=p}(fe,ne),e=fe[0],n=fe[1],o=fe[2],h=fe[3],p=fe[4],!(I=fe[9]=fe[9]===r?R?0:e.length:ur(fe[9]-Z,0))&&24&n&&(n&=-25),n&&1!=n)ye=8==n||16==n?function W1(e,n,o){var h=Cs(e);return function p(){for(var _=arguments.length,x=T(_),I=_,R=Qi(p);I--;)x[I]=arguments[I];var Z=_<3&&x[0]!==R&&x[_-1]!==R?[]:oi(x,R);return(_-=Z.length)<o?Rh(e,n,qo,p.placeholder,r,x,Z,r,r,o-_):zr(this&&this!==br&&this instanceof p?h:e,this,x)}}(e,n,I):32!=n&&33!=n||p.length?qo.apply(r,fe):function G1(e,n,o,h){var p=1&n,_=Cs(e);return function x(){for(var I=-1,R=arguments.length,Z=-1,z=h.length,H=T(z+R),ne=this&&this!==br&&this instanceof x?_:e;++Z<z;)H[Z]=h[Z];for(;R--;)H[Z++]=arguments[++I];return zr(ne,p?o:this,H)}}(e,n,o,h);else var ye=function V1(e,n,o){var h=1&n,p=Cs(e);return function _(){return(this&&this!==br&&this instanceof _?p:e).apply(h?o:this,arguments)}}(e,n,o);return Zh((ne?uh:Uh)(ye,fe),e,n)}function Ah(e,n,o,h){return e===r||_n(e,Bi[o])&&!nt.call(h,o)?n:e}function Ch(e,n,o,h,p,_){return jt(e)&&jt(n)&&(_.set(n,e),Mo(e,n,r,Ch,_),_.delete(n)),e}function Q1(e){return Fs(e)?r:e}function Th(e,n,o,h,p,_){var x=1&o,I=e.length,R=n.length;if(I!=R&&!(x&&R>I))return!1;var Z=_.get(e),z=_.get(n);if(Z&&z)return Z==n&&z==e;var H=-1,ne=!0,fe=2&o?new xi:r;for(_.set(e,n),_.set(n,e);++H<I;){var ye=e[H],Ne=n[H];if(h)var ve=x?h(Ne,ye,H,n,e,_):h(ye,Ne,H,e,n,_);if(ve!==r){if(ve)continue;ne=!1;break}if(fe){if(!bc(n,function(Me,qe){if(!bs(fe,qe)&&(ye===Me||p(ye,Me,o,h,_)))return fe.push(qe)})){ne=!1;break}}else if(ye!==Ne&&!p(ye,Ne,o,h,_)){ne=!1;break}}return _.delete(e),_.delete(n),ne}function kn(e){return su(Lh(e,r,Vh),e+"")}function Qc(e){return Yf(e,dr,tu)}function Yc(e){return Yf(e,Ur,Dh)}var Xc=No?function(e){return No.get(e)}:_u;function ko(e){for(var n=e.name+"",o=Vi[n],h=nt.call(Vi,n)?o.length:0;h--;){var p=o[h],_=p.func;if(null==_||_==e)return p.name}return n}function Qi(e){return(nt.call(y,"placeholder")?y:e).placeholder}function ge(){var e=y.iteratee||yu;return e=e===yu?th:e,arguments.length?e(arguments[0],arguments[1]):e}function Ko(e,n){var o=e.__data__;return function ab(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}(n)?o["string"==typeof n?"string":"hash"]:o.map}function eu(e){for(var n=dr(e),o=n.length;o--;){var h=n[o],p=e[h];n[o]=[h,p,jh(p)]}return n}function Si(e,n){var o=function l0(O,q){return null==O?r:O[q]}(e,n);return eh(o)?o:r}var tu=Rc?function(e){return null==e?[]:(e=ft(e),ii(Rc(e),function(n){return qf.call(e,n)}))}:mu,Dh=Rc?function(e){for(var n=[];e;)si(n,tu(e)),e=Io(e);return n}:mu,Pr=Ar;function Fh(e,n,o){for(var h=-1,p=(n=li(n,e)).length,_=!1;++h<p;){var x=Nn(n[h]);if(!(_=null!=e&&o(e,x)))break;e=e[x]}return _||++h!=p?_:!!(p=null==e?0:e.length)&&Qo(p)&&Kn(x,p)&&(Se(e)||Oi(e))}function Mh(e){return"function"!=typeof e.constructor||Ts(e)?{}:Wi(Io(e))}function ob(e){return Se(e)||Oi(e)||!!(Uf&&e&&e[Uf])}function Kn(e,n){var o=typeof e;return!!(n=n??ni)&&("number"==o||"symbol"!=o&&_m.test(e))&&e>-1&&e%1==0&&e<n}function Cr(e,n,o){if(!jt(o))return!1;var h=typeof n;return!!("number"==h?qr(o)&&Kn(n,o.length):"string"==h&&n in o)&&_n(o[n],e)}function ru(e,n){if(Se(e))return!1;var o=typeof e;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=e&&!Br(e))||nm.test(e)||!rm.test(e)||null!=n&&e in ft(n)}function nu(e){var n=ko(e),o=y[n];if("function"!=typeof o||!(n in je.prototype))return!1;if(e===o)return!0;var h=Xc(o);return!!h&&e===h[0]}(Nc&&Pr(new Nc(new ArrayBuffer(1)))!=qi||xs&&Pr(new xs)!=pn||Ac&&Pr(Ac.resolve())!=Wl||Hi&&Pr(new Hi)!=gn||Es&&Pr(new Es)!=_s)&&(Pr=function(e){var n=Ar(e),o=n==Ln?e.constructor:r,h=o?Pi(o):"";if(h)switch(h){case j0:return qi;case $0:return pn;case L0:return Wl;case q0:return gn;case U0:return _s}return n});var ub=mo?Bn:bu;function Ts(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Bi)}function jh(e){return e==e&&!jt(e)}function $h(e,n){return function(o){return null!=o&&o[e]===n&&(n!==r||e in ft(o))}}function Lh(e,n,o){return n=ur(n===r?e.length-1:n,0),function(){for(var h=arguments,p=-1,_=ur(h.length-n,0),x=T(_);++p<_;)x[p]=h[n+p];p=-1;for(var I=T(n+1);++p<n;)I[p]=h[p];return I[n]=o(x),zr(e,this,I)}}function qh(e,n){return n.length<2?e:Ii(e,sn(n,0,-1))}function iu(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var Uh=zh(uh),Ds=N0||function(e,n){return br.setTimeout(e,n)},su=zh($1);function Zh(e,n,o){var h=n+"";return su(e,function sb(e,n){var o=n.length;if(!o)return e;var h=o-1;return n[h]=(o>1?"& ":"")+n[h],n=n.join(o>2?", ":" "),e.replace(am,"{\n/* [wrapped with "+n+"] */\n")}(h,function gb(e,n){return en(z_,function(o){var h="_."+o[0];n&o[1]&&!go(e,h)&&e.push(h)}),e.sort()}(function rb(e){var n=e.match(cm);return n?n[1].split(um):[]}(h),o)))}function zh(e){var n=0,o=0;return function(){var h=D0(),p=16-(h-o);if(o=h,p>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(r,arguments)}}function Bo(e,n){var o=-1,h=e.length,p=h-1;for(n=n===r?h:n;++o<n;){var _=Zc(o,p),x=e[_];e[_]=e[o],e[o]=x}return e.length=n,e}var kh=function lb(e){var n=Go(e,function(h){return 500===o.size&&o.clear(),h}),o=n.cache;return n}(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(im,function(o,h,p,_){n.push(p?_.replace(hm,"$1"):h||o)}),n});function Nn(e){if("string"==typeof e||Br(e))return e;var n=e+"";return"0"==n&&1/e==-_i?"-0":n}function Pi(e){if(null!=e){try{return bo.call(e)}catch{}try{return e+""}catch{}}return""}function Kh(e){if(e instanceof je)return e.clone();var n=new rn(e.__wrapped__,e.__chain__);return n.__actions__=Lr(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var mb=Ae(function(e,n){return Wt(e)?Os(e,wr(n,1,Wt,!0)):[]}),bb=Ae(function(e,n){var o=on(n);return Wt(o)&&(o=r),Wt(e)?Os(e,wr(n,1,Wt,!0),ge(o,2)):[]}),wb=Ae(function(e,n){var o=on(n);return Wt(o)&&(o=r),Wt(e)?Os(e,wr(n,1,Wt,!0),r,o):[]});function Bh(e,n,o){var h=null==e?0:e.length;if(!h)return-1;var p=null==o?0:Re(o);return p<0&&(p=ur(h+p,0)),yo(e,ge(n,3),p)}function Hh(e,n,o){var h=null==e?0:e.length;if(!h)return-1;var p=h-1;return o!==r&&(p=Re(o),p=o<0?ur(h+p,0):Sr(p,h-1)),yo(e,ge(n,3),p,!0)}function Vh(e){return null!=e&&e.length?wr(e,1):[]}function Wh(e){return e&&e.length?e[0]:r}var Tb=Ae(function(e){var n=Pt(e,Hc);return n.length&&n[0]===e[0]?jc(n):[]}),Db=Ae(function(e){var n=on(e),o=Pt(e,Hc);return n===on(o)?n=r:o.pop(),o.length&&o[0]===e[0]?jc(o,ge(n,2)):[]}),Fb=Ae(function(e){var n=on(e),o=Pt(e,Hc);return(n="function"==typeof n?n:r)&&o.pop(),o.length&&o[0]===e[0]?jc(o,r,n):[]});function on(e){var n=null==e?0:e.length;return n?e[n-1]:r}var Lb=Ae(Gh);function Gh(e,n){return e&&e.length&&n&&n.length?Uc(e,n):e}var Zb=kn(function(e,n){var o=null==e?0:e.length,h=Tc(e,n);return ch(e,Pt(n,function(p){return Kn(p,o)?+p:p}).sort(_h)),h});function ou(e){return null==e?e:M0.call(e)}var nw=Ae(function(e){return ui(wr(e,1,Wt,!0))}),iw=Ae(function(e){var n=on(e);return Wt(n)&&(n=r),ui(wr(e,1,Wt,!0),ge(n,2))}),sw=Ae(function(e){var n=on(e);return n="function"==typeof n?n:r,ui(wr(e,1,Wt,!0),r,n)});function au(e){if(!e||!e.length)return[];var n=0;return e=ii(e,function(o){if(Wt(o))return n=ur(o.length,n),!0}),Ic(n,function(o){return Pt(e,wc(o))})}function Jh(e,n){if(!e||!e.length)return[];var o=au(e);return null==n?o:Pt(o,function(h){return zr(n,r,h)})}var uw=Ae(function(e,n){return Wt(e)?Os(e,n):[]}),lw=Ae(function(e){return Bc(ii(e,Wt))}),fw=Ae(function(e){var n=on(e);return Wt(n)&&(n=r),Bc(ii(e,Wt),ge(n,2))}),hw=Ae(function(e){var n=on(e);return n="function"==typeof n?n:r,Bc(ii(e,Wt),r,n)}),dw=Ae(au),yw=Ae(function(e){var n=e.length,o=n>1?e[n-1]:r;return o="function"==typeof o?(e.pop(),o):r,Jh(e,o)});function Qh(e){var n=y(e);return n.__chain__=!0,n}function Ho(e,n){return n(e)}var _w=kn(function(e){var n=e.length,o=n?e[0]:0,h=this.__wrapped__,p=function(_){return Tc(_,e)};return!(n>1||this.__actions__.length)&&h instanceof je&&Kn(o)?((h=h.slice(o,+o+(n?1:0))).__actions__.push({func:Ho,args:[p],thisArg:r}),new rn(h,this.__chain__).thru(function(_){return n&&!_.length&&_.push(r),_})):this.thru(p)}),Pw=Lo(function(e,n,o){nt.call(e,o)?++e[o]:Zn(e,o,1)}),Nw=Ih(Bh),Aw=Ih(Hh);function Yh(e,n){return(Se(e)?en:ci)(e,ge(n,3))}function Xh(e,n){return(Se(e)?Ym:Gf)(e,ge(n,3))}var Fw=Lo(function(e,n,o){nt.call(e,o)?e[o].push(n):Zn(e,o,[n])}),jw=Ae(function(e,n,o){var h=-1,p="function"==typeof n,_=qr(e)?T(e.length):[];return ci(e,function(x){_[++h]=p?zr(n,x,o):Rs(x,n,o)}),_}),$w=Lo(function(e,n,o){Zn(e,o,n)});function Vo(e,n){return(Se(e)?Pt:rh)(e,ge(n,3))}var qw=Lo(function(e,n,o){e[o?0:1].push(n)},function(){return[[],[]]}),Ww=Ae(function(e,n){if(null==e)return[];var o=n.length;return o>1&&Cr(e,n[0],n[1])?n=[]:o>2&&Cr(n[0],n[1],n[2])&&(n=[n[0]]),oh(e,wr(n,1),[])}),Wo=R0||function(){return br.Date.now()};function ed(e,n,o){return n=o?r:n,zn(e,128,r,r,r,r,n=e&&null==n?e.length:n)}function td(e,n){var o;if("function"!=typeof n)throw new tn(f);return e=Re(e),function(){return--e>0&&(o=n.apply(this,arguments)),e<=1&&(n=r),o}}var cu=Ae(function(e,n,o){var h=1;if(o.length){var p=oi(o,Qi(cu));h|=32}return zn(e,h,n,o,p)}),rd=Ae(function(e,n,o){var h=3;if(o.length){var p=oi(o,Qi(rd));h|=32}return zn(n,h,e,o,p)});function sd(e,n,o){var h,p,_,x,I,R,Z=0,z=!1,H=!1,ne=!0;if("function"!=typeof e)throw new tn(f);function fe(Gt){var mn=h,Vn=p;return h=p=r,Z=Gt,x=e.apply(Vn,mn)}function ve(Gt){var mn=Gt-R;return R===r||mn>=n||mn<0||H&&Gt-Z>=_}function Me(){var Gt=Wo();if(ve(Gt))return qe(Gt);I=Ds(Me,function Ne(Gt){var Id=n-(Gt-R);return H?Sr(Id,_-(Gt-Z)):Id}(Gt))}function qe(Gt){return I=r,ne&&h?fe(Gt):(h=p=r,x)}function Vr(){var Gt=Wo(),mn=ve(Gt);if(h=arguments,p=this,R=Gt,mn){if(I===r)return function ye(Gt){return Z=Gt,I=Ds(Me,n),z?fe(Gt):x}(R);if(H)return gh(I),I=Ds(Me,n),fe(R)}return I===r&&(I=Ds(Me,n)),x}return n=an(n)||0,jt(o)&&(z=!!o.leading,_=(H="maxWait"in o)?ur(an(o.maxWait)||0,n):_,ne="trailing"in o?!!o.trailing:ne),Vr.cancel=function Hr(){I!==r&&gh(I),Z=0,h=R=p=I=r},Vr.flush=function Tr(){return I===r?x:qe(Wo())},Vr}var Jw=Ae(function(e,n){return Wf(e,1,n)}),Qw=Ae(function(e,n,o){return Wf(e,an(n)||0,o)});function Go(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new tn(f);var o=function(){var h=arguments,p=n?n.apply(this,h):h[0],_=o.cache;if(_.has(p))return _.get(p);var x=e.apply(this,h);return o.cache=_.set(p,x)||_,x};return o.cache=new(Go.Cache||Un),o}function Jo(e){if("function"!=typeof e)throw new tn(f);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Go.Cache=Un;var ex=U1(function(e,n){var o=(n=1==n.length&&Se(n[0])?Pt(n[0],kr(ge())):Pt(wr(n,1),kr(ge()))).length;return Ae(function(h){for(var p=-1,_=Sr(h.length,o);++p<_;)h[p]=n[p].call(this,h[p]);return zr(e,this,h)})}),uu=Ae(function(e,n){var o=oi(n,Qi(uu));return zn(e,32,r,n,o)}),od=Ae(function(e,n){var o=oi(n,Qi(od));return zn(e,64,r,n,o)}),tx=kn(function(e,n){return zn(e,256,r,r,r,n)});function _n(e,n){return e===n||e!=e&&n!=n}var dx=zo(Mc),px=zo(function(e,n){return e>=n}),Oi=Xf(function(){return arguments}())?Xf:function(e){return kt(e)&&nt.call(e,"callee")&&!qf.call(e,"callee")},Se=T.isArray,gx=bf?kr(bf):function E1(e){return kt(e)&&Ar(e)==ms};function qr(e){return null!=e&&Qo(e.length)&&!Bn(e)}function Wt(e){return kt(e)&&qr(e)}var hi=A0||bu,vx=wf?kr(wf):function I1(e){return kt(e)&&Ar(e)==ps};function lu(e){if(!kt(e))return!1;var n=Ar(e);return n==co||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!Fs(e)}function Bn(e){if(!jt(e))return!1;var n=Ar(e);return n==uo||n==Vl||"[object AsyncFunction]"==n||"[object Proxy]"==n}function ad(e){return"number"==typeof e&&e==Re(e)}function Qo(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ni}function jt(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function kt(e){return null!=e&&"object"==typeof e}var cd=xf?kr(xf):function P1(e){return kt(e)&&Pr(e)==pn};function ud(e){return"number"==typeof e||kt(e)&&Ar(e)==gs}function Fs(e){if(!kt(e)||Ar(e)!=Ln)return!1;var n=Io(e);if(null===n)return!0;var o=nt.call(n,"constructor")&&n.constructor;return"function"==typeof o&&o instanceof o&&bo.call(o)==I0}var fu=Ef?kr(Ef):function O1(e){return kt(e)&&Ar(e)==ys},ld=If?kr(If):function R1(e){return kt(e)&&Pr(e)==gn};function Yo(e){return"string"==typeof e||!Se(e)&&kt(e)&&Ar(e)==vs}function Br(e){return"symbol"==typeof e||kt(e)&&Ar(e)==lo}var Yi=Sf?kr(Sf):function N1(e){return kt(e)&&Qo(e.length)&&!!wt[Ar(e)]},Dx=zo(qc),Fx=zo(function(e,n){return e<=n});function fd(e){if(!e)return[];if(qr(e))return Yo(e)?yn(e):Lr(e);if(ws&&e[ws])return function h0(O){for(var q,T=[];!(q=O.next()).done;)T.push(q.value);return T}(e[ws]());var n=Pr(e);return(n==pn?Pc:n==gn?vo:Xi)(e)}function Hn(e){return e?(e=an(e))===_i||e===-_i?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Re(e){var n=Hn(e),o=n%1;return n==n?o?n-o:n:0}function hd(e){return e?Ei(Re(e),0,Pn):0}function an(e){if("number"==typeof e)return e;if(Br(e))return NaN;if(jt(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=jt(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=Cf(e);var o=gm.test(e);return o||vm.test(e)?Gm(e.slice(2),o?2:8):pm.test(e)?NaN:+e}function dd(e){return Rn(e,Ur(e))}function Ye(e){return null==e?"":Kr(e)}var jx=Gi(function(e,n){if(Ts(n)||qr(n))Rn(n,dr(n),e);else for(var o in n)nt.call(n,o)&&Ps(e,o,n[o])}),pd=Gi(function(e,n){Rn(n,Ur(n),e)}),Xo=Gi(function(e,n,o,h){Rn(n,Ur(n),e,h)}),$x=Gi(function(e,n,o,h){Rn(n,dr(n),e,h)}),Lx=kn(Tc),Ux=Ae(function(e,n){e=ft(e);var o=-1,h=n.length,p=h>2?n[2]:r;for(p&&Cr(n[0],n[1],p)&&(h=1);++o<h;)for(var _=n[o],x=Ur(_),I=-1,R=x.length;++I<R;){var Z=x[I],z=e[Z];(z===r||_n(z,Bi[Z])&&!nt.call(e,Z))&&(e[Z]=_[Z])}return e}),Zx=Ae(function(e){return e.push(r,Ch),zr(gd,r,e)});function hu(e,n,o){var h=null==e?r:Ii(e,n);return h===r?o:h}function du(e,n){return null!=e&&Fh(e,n,b1)}var Qx=Ph(function(e,n,o){null!=n&&"function"!=typeof n.toString&&(n=wo.call(n)),e[n]=o},gu(Zr)),Yx=Ph(function(e,n,o){null!=n&&"function"!=typeof n.toString&&(n=wo.call(n)),nt.call(e,n)?e[n].push(o):e[n]=[o]},ge),Xx=Ae(Rs);function dr(e){return qr(e)?Kf(e):Lc(e)}function Ur(e){return qr(e)?Kf(e,!0):function A1(e){if(!jt(e))return function hb(e){var n=[];if(null!=e)for(var o in ft(e))n.push(o);return n}(e);var n=Ts(e),o=[];for(var h in e)"constructor"==h&&(n||!nt.call(e,h))||o.push(h);return o}(e)}var rE=Gi(function(e,n,o){Mo(e,n,o)}),gd=Gi(function(e,n,o,h){Mo(e,n,o,h)}),nE=kn(function(e,n){var o={};if(null==e)return o;var h=!1;n=Pt(n,function(_){return _=li(_,e),h||(h=_.length>1),_}),Rn(e,Yc(e),o),h&&(o=nn(o,7,Q1));for(var p=n.length;p--;)Kc(o,n[p]);return o}),sE=kn(function(e,n){return null==e?{}:function T1(e,n){return ah(e,n,function(o,h){return du(e,h)})}(e,n)});function yd(e,n){if(null==e)return{};var o=Pt(Yc(e),function(h){return[h]});return n=ge(n),ah(e,o,function(h,p){return n(h,p[0])})}var vd=Nh(dr),_d=Nh(Ur);function Xi(e){return null==e?[]:Sc(e,dr(e))}var vE=Ji(function(e,n,o){return n=n.toLowerCase(),e+(o?md(n):n)});function md(e){return pu(Ye(e).toLowerCase())}function bd(e){return(e=Ye(e))&&e.replace(mm,a0).replace(Lm,"")}var wE=Ji(function(e,n,o){return e+(o?"-":"")+n.toLowerCase()}),xE=Ji(function(e,n,o){return e+(o?" ":"")+n.toLowerCase()}),EE=Eh("toLowerCase"),AE=Ji(function(e,n,o){return e+(o?"_":"")+n.toLowerCase()}),TE=Ji(function(e,n,o){return e+(o?" ":"")+pu(n)}),zE=Ji(function(e,n,o){return e+(o?" ":"")+n.toUpperCase()}),pu=Eh("toUpperCase");function wd(e,n,o){return e=Ye(e),(n=o?r:n)===r?function f0(O){return Zm.test(O)}(e)?function m0(O){return O.match(qm)||[]}(e):function r0(O){return O.match(lm)||[]}(e):e.match(n)||[]}var xd=Ae(function(e,n){try{return zr(e,r,n)}catch(o){return lu(o)?o:new Ee(o)}}),kE=kn(function(e,n){return en(n,function(o){o=Nn(o),Zn(e,o,cu(e[o],e))}),e});function gu(e){return function(){return e}}var VE=Sh(),WE=Sh(!0);function Zr(e){return e}function yu(e){return th("function"==typeof e?e:nn(e,1))}var QE=Ae(function(e,n){return function(o){return Rs(o,e,n)}}),YE=Ae(function(e,n){return function(o){return Rs(e,o,n)}});function vu(e,n,o){var h=dr(n),p=Fo(n,h);null==o&&(!jt(n)||!p.length&&h.length)&&(o=n,n=e,e=this,p=Fo(n,dr(n)));var _=!(jt(o)&&"chain"in o&&!o.chain),x=Bn(e);return en(p,function(I){var R=n[I];e[I]=R,x&&(e.prototype[I]=function(){var Z=this.__chain__;if(_||Z){var z=e(this.__wrapped__);return(z.__actions__=Lr(this.__actions__)).push({func:R,args:arguments,thisArg:e}),z.__chain__=Z,z}return R.apply(e,si([this.value()],arguments))})}),e}function _u(){}var tI=Gc(Pt),rI=Gc(Pf),nI=Gc(bc);function Ed(e){return ru(e)?wc(Nn(e)):function D1(e){return function(n){return Ii(n,e)}}(e)}var sI=Oh(),oI=Oh(!0);function mu(){return[]}function bu(){return!1}var dI=Uo(function(e,n){return e+n},0),pI=Jc("ceil"),gI=Uo(function(e,n){return e/n},1),yI=Jc("floor"),EI=Uo(function(e,n){return e*n},1),II=Jc("round"),SI=Uo(function(e,n){return e-n},0);return y.after=function Gw(e,n){if("function"!=typeof n)throw new tn(f);return e=Re(e),function(){if(--e<1)return n.apply(this,arguments)}},y.ary=ed,y.assign=jx,y.assignIn=pd,y.assignInWith=Xo,y.assignWith=$x,y.at=Lx,y.before=td,y.bind=cu,y.bindAll=kE,y.bindKey=rd,y.castArray=function ax(){if(!arguments.length)return[];var e=arguments[0];return Se(e)?e:[e]},y.chain=Qh,y.chunk=function yb(e,n,o){n=(o?Cr(e,n,o):n===r)?1:ur(Re(n),0);var h=null==e?0:e.length;if(!h||n<1)return[];for(var p=0,_=0,x=T(Oo(h/n));p<h;)x[_++]=sn(e,p,p+=n);return x},y.compact=function vb(e){for(var n=-1,o=null==e?0:e.length,h=0,p=[];++n<o;){var _=e[n];_&&(p[h++]=_)}return p},y.concat=function _b(){var e=arguments.length;if(!e)return[];for(var n=T(e-1),o=arguments[0],h=e;h--;)n[h-1]=arguments[h];return si(Se(o)?Lr(o):[o],wr(n,1))},y.cond=function KE(e){var n=null==e?0:e.length,o=ge();return e=n?Pt(e,function(h){if("function"!=typeof h[1])throw new tn(f);return[o(h[0]),h[1]]}):[],Ae(function(h){for(var p=-1;++p<n;){var _=e[p];if(zr(_[0],this,h))return zr(_[1],this,h)}})},y.conforms=function BE(e){return function y1(e){var n=dr(e);return function(o){return Vf(o,e,n)}}(nn(e,1))},y.constant=gu,y.countBy=Pw,y.create=function qx(e,n){var o=Wi(e);return null==n?o:Hf(o,n)},y.curry=function nd(e,n,o){var h=zn(e,8,r,r,r,r,r,n=o?r:n);return h.placeholder=nd.placeholder,h},y.curryRight=function id(e,n,o){var h=zn(e,16,r,r,r,r,r,n=o?r:n);return h.placeholder=id.placeholder,h},y.debounce=sd,y.defaults=Ux,y.defaultsDeep=Zx,y.defer=Jw,y.delay=Qw,y.difference=mb,y.differenceBy=bb,y.differenceWith=wb,y.drop=function xb(e,n,o){var h=null==e?0:e.length;return h?sn(e,(n=o||n===r?1:Re(n))<0?0:n,h):[]},y.dropRight=function Eb(e,n,o){var h=null==e?0:e.length;return h?sn(e,0,(n=h-(n=o||n===r?1:Re(n)))<0?0:n):[]},y.dropRightWhile=function Ib(e,n){return e&&e.length?$o(e,ge(n,3),!0,!0):[]},y.dropWhile=function Sb(e,n){return e&&e.length?$o(e,ge(n,3),!0):[]},y.fill=function Pb(e,n,o,h){var p=null==e?0:e.length;return p?(o&&"number"!=typeof o&&Cr(e,n,o)&&(o=0,h=p),function _1(e,n,o,h){var p=e.length;for((o=Re(o))<0&&(o=-o>p?0:p+o),(h=h===r||h>p?p:Re(h))<0&&(h+=p),h=o>h?0:hd(h);o<h;)e[o++]=n;return e}(e,n,o,h)):[]},y.filter=function Rw(e,n){return(Se(e)?ii:Jf)(e,ge(n,3))},y.flatMap=function Cw(e,n){return wr(Vo(e,n),1)},y.flatMapDeep=function Tw(e,n){return wr(Vo(e,n),_i)},y.flatMapDepth=function Dw(e,n,o){return o=o===r?1:Re(o),wr(Vo(e,n),o)},y.flatten=Vh,y.flattenDeep=function Ob(e){return null!=e&&e.length?wr(e,_i):[]},y.flattenDepth=function Rb(e,n){return null!=e&&e.length?wr(e,n=n===r?1:Re(n)):[]},y.flip=function Yw(e){return zn(e,512)},y.flow=VE,y.flowRight=WE,y.fromPairs=function Nb(e){for(var n=-1,o=null==e?0:e.length,h={};++n<o;){var p=e[n];h[p[0]]=p[1]}return h},y.functions=function Wx(e){return null==e?[]:Fo(e,dr(e))},y.functionsIn=function Gx(e){return null==e?[]:Fo(e,Ur(e))},y.groupBy=Fw,y.initial=function Cb(e){return null!=e&&e.length?sn(e,0,-1):[]},y.intersection=Tb,y.intersectionBy=Db,y.intersectionWith=Fb,y.invert=Qx,y.invertBy=Yx,y.invokeMap=jw,y.iteratee=yu,y.keyBy=$w,y.keys=dr,y.keysIn=Ur,y.map=Vo,y.mapKeys=function eE(e,n){var o={};return n=ge(n,3),On(e,function(h,p,_){Zn(o,n(h,p,_),h)}),o},y.mapValues=function tE(e,n){var o={};return n=ge(n,3),On(e,function(h,p,_){Zn(o,p,n(h,p,_))}),o},y.matches=function GE(e){return nh(nn(e,1))},y.matchesProperty=function JE(e,n){return ih(e,nn(n,1))},y.memoize=Go,y.merge=rE,y.mergeWith=gd,y.method=QE,y.methodOf=YE,y.mixin=vu,y.negate=Jo,y.nthArg=function eI(e){return e=Re(e),Ae(function(n){return sh(n,e)})},y.omit=nE,y.omitBy=function iE(e,n){return yd(e,Jo(ge(n)))},y.once=function Xw(e){return td(2,e)},y.orderBy=function Lw(e,n,o,h){return null==e?[]:(Se(n)||(n=null==n?[]:[n]),Se(o=h?r:o)||(o=null==o?[]:[o]),oh(e,n,o))},y.over=tI,y.overArgs=ex,y.overEvery=rI,y.overSome=nI,y.partial=uu,y.partialRight=od,y.partition=qw,y.pick=sE,y.pickBy=yd,y.property=Ed,y.propertyOf=function iI(e){return function(n){return null==e?r:Ii(e,n)}},y.pull=Lb,y.pullAll=Gh,y.pullAllBy=function qb(e,n,o){return e&&e.length&&n&&n.length?Uc(e,n,ge(o,2)):e},y.pullAllWith=function Ub(e,n,o){return e&&e.length&&n&&n.length?Uc(e,n,r,o):e},y.pullAt=Zb,y.range=sI,y.rangeRight=oI,y.rearg=tx,y.reject=function zw(e,n){return(Se(e)?ii:Jf)(e,Jo(ge(n,3)))},y.remove=function zb(e,n){var o=[];if(!e||!e.length)return o;var h=-1,p=[],_=e.length;for(n=ge(n,3);++h<_;){var x=e[h];n(x,h,e)&&(o.push(x),p.push(h))}return ch(e,p),o},y.rest=function rx(e,n){if("function"!=typeof e)throw new tn(f);return Ae(e,n=n===r?n:Re(n))},y.reverse=ou,y.sampleSize=function Kw(e,n,o){return n=(o?Cr(e,n,o):n===r)?1:Re(n),(Se(e)?h1:j1)(e,n)},y.set=function aE(e,n,o){return null==e?e:As(e,n,o)},y.setWith=function cE(e,n,o,h){return h="function"==typeof h?h:r,null==e?e:As(e,n,o,h)},y.shuffle=function Bw(e){return(Se(e)?d1:L1)(e)},y.slice=function kb(e,n,o){var h=null==e?0:e.length;return h?(o&&"number"!=typeof o&&Cr(e,n,o)?(n=0,o=h):(n=null==n?0:Re(n),o=o===r?h:Re(o)),sn(e,n,o)):[]},y.sortBy=Ww,y.sortedUniq=function Jb(e){return e&&e.length?lh(e):[]},y.sortedUniqBy=function Qb(e,n){return e&&e.length?lh(e,ge(n,2)):[]},y.split=function CE(e,n,o){return o&&"number"!=typeof o&&Cr(e,n,o)&&(n=o=r),(o=o===r?Pn:o>>>0)?(e=Ye(e))&&("string"==typeof n||null!=n&&!fu(n))&&!(n=Kr(n))&&zi(e)?fi(yn(e),0,o):e.split(n,o):[]},y.spread=function nx(e,n){if("function"!=typeof e)throw new tn(f);return n=null==n?0:ur(Re(n),0),Ae(function(o){var h=o[n],p=fi(o,0,n);return h&&si(p,h),zr(e,this,p)})},y.tail=function Yb(e){var n=null==e?0:e.length;return n?sn(e,1,n):[]},y.take=function Xb(e,n,o){return e&&e.length?sn(e,0,(n=o||n===r?1:Re(n))<0?0:n):[]},y.takeRight=function ew(e,n,o){var h=null==e?0:e.length;return h?sn(e,(n=h-(n=o||n===r?1:Re(n)))<0?0:n,h):[]},y.takeRightWhile=function tw(e,n){return e&&e.length?$o(e,ge(n,3),!1,!0):[]},y.takeWhile=function rw(e,n){return e&&e.length?$o(e,ge(n,3)):[]},y.tap=function vw(e,n){return n(e),e},y.throttle=function ix(e,n,o){var h=!0,p=!0;if("function"!=typeof e)throw new tn(f);return jt(o)&&(h="leading"in o?!!o.leading:h,p="trailing"in o?!!o.trailing:p),sd(e,n,{leading:h,maxWait:n,trailing:p})},y.thru=Ho,y.toArray=fd,y.toPairs=vd,y.toPairsIn=_d,y.toPath=function fI(e){return Se(e)?Pt(e,Nn):Br(e)?[e]:Lr(kh(Ye(e)))},y.toPlainObject=dd,y.transform=function uE(e,n,o){var h=Se(e),p=h||hi(e)||Yi(e);if(n=ge(n,4),null==o){var _=e&&e.constructor;o=p?h?new _:[]:jt(e)&&Bn(_)?Wi(Io(e)):{}}return(p?en:On)(e,function(x,I,R){return n(o,x,I,R)}),o},y.unary=function sx(e){return ed(e,1)},y.union=nw,y.unionBy=iw,y.unionWith=sw,y.uniq=function ow(e){return e&&e.length?ui(e):[]},y.uniqBy=function aw(e,n){return e&&e.length?ui(e,ge(n,2)):[]},y.uniqWith=function cw(e,n){return n="function"==typeof n?n:r,e&&e.length?ui(e,r,n):[]},y.unset=function lE(e,n){return null==e||Kc(e,n)},y.unzip=au,y.unzipWith=Jh,y.update=function fE(e,n,o){return null==e?e:hh(e,n,Vc(o))},y.updateWith=function hE(e,n,o,h){return h="function"==typeof h?h:r,null==e?e:hh(e,n,Vc(o),h)},y.values=Xi,y.valuesIn=function dE(e){return null==e?[]:Sc(e,Ur(e))},y.without=uw,y.words=wd,y.wrap=function ox(e,n){return uu(Vc(n),e)},y.xor=lw,y.xorBy=fw,y.xorWith=hw,y.zip=dw,y.zipObject=function pw(e,n){return ph(e||[],n||[],Ps)},y.zipObjectDeep=function gw(e,n){return ph(e||[],n||[],As)},y.zipWith=yw,y.entries=vd,y.entriesIn=_d,y.extend=pd,y.extendWith=Xo,vu(y,y),y.add=dI,y.attempt=xd,y.camelCase=vE,y.capitalize=md,y.ceil=pI,y.clamp=function pE(e,n,o){return o===r&&(o=n,n=r),o!==r&&(o=(o=an(o))==o?o:0),n!==r&&(n=(n=an(n))==n?n:0),Ei(an(e),n,o)},y.clone=function cx(e){return nn(e,4)},y.cloneDeep=function lx(e){return nn(e,5)},y.cloneDeepWith=function fx(e,n){return nn(e,5,n="function"==typeof n?n:r)},y.cloneWith=function ux(e,n){return nn(e,4,n="function"==typeof n?n:r)},y.conformsTo=function hx(e,n){return null==n||Vf(e,n,dr(n))},y.deburr=bd,y.defaultTo=function HE(e,n){return null==e||e!=e?n:e},y.divide=gI,y.endsWith=function _E(e,n,o){e=Ye(e),n=Kr(n);var h=e.length,p=o=o===r?h:Ei(Re(o),0,h);return(o-=n.length)>=0&&e.slice(o,p)==n},y.eq=_n,y.escape=function mE(e){return(e=Ye(e))&&X_.test(e)?e.replace(Jl,c0):e},y.escapeRegExp=function bE(e){return(e=Ye(e))&&sm.test(e)?e.replace(uc,"\\$&"):e},y.every=function Ow(e,n,o){var h=Se(e)?Pf:v1;return o&&Cr(e,n,o)&&(n=r),h(e,ge(n,3))},y.find=Nw,y.findIndex=Bh,y.findKey=function zx(e,n){return Of(e,ge(n,3),On)},y.findLast=Aw,y.findLastIndex=Hh,y.findLastKey=function kx(e,n){return Of(e,ge(n,3),Fc)},y.floor=yI,y.forEach=Yh,y.forEachRight=Xh,y.forIn=function Kx(e,n){return null==e?e:Dc(e,ge(n,3),Ur)},y.forInRight=function Bx(e,n){return null==e?e:Qf(e,ge(n,3),Ur)},y.forOwn=function Hx(e,n){return e&&On(e,ge(n,3))},y.forOwnRight=function Vx(e,n){return e&&Fc(e,ge(n,3))},y.get=hu,y.gt=dx,y.gte=px,y.has=function Jx(e,n){return null!=e&&Fh(e,n,m1)},y.hasIn=du,y.head=Wh,y.identity=Zr,y.includes=function Mw(e,n,o,h){e=qr(e)?e:Xi(e),o=o&&!h?Re(o):0;var p=e.length;return o<0&&(o=ur(p+o,0)),Yo(e)?o<=p&&e.indexOf(n,o)>-1:!!p&&Zi(e,n,o)>-1},y.indexOf=function Ab(e,n,o){var h=null==e?0:e.length;if(!h)return-1;var p=null==o?0:Re(o);return p<0&&(p=ur(h+p,0)),Zi(e,n,p)},y.inRange=function gE(e,n,o){return n=Hn(n),o===r?(o=n,n=0):o=Hn(o),function w1(e,n,o){return e>=Sr(n,o)&&e<ur(n,o)}(e=an(e),n,o)},y.invoke=Xx,y.isArguments=Oi,y.isArray=Se,y.isArrayBuffer=gx,y.isArrayLike=qr,y.isArrayLikeObject=Wt,y.isBoolean=function yx(e){return!0===e||!1===e||kt(e)&&Ar(e)==ds},y.isBuffer=hi,y.isDate=vx,y.isElement=function _x(e){return kt(e)&&1===e.nodeType&&!Fs(e)},y.isEmpty=function mx(e){if(null==e)return!0;if(qr(e)&&(Se(e)||"string"==typeof e||"function"==typeof e.splice||hi(e)||Yi(e)||Oi(e)))return!e.length;var n=Pr(e);if(n==pn||n==gn)return!e.size;if(Ts(e))return!Lc(e).length;for(var o in e)if(nt.call(e,o))return!1;return!0},y.isEqual=function bx(e,n){return Ns(e,n)},y.isEqualWith=function wx(e,n,o){var h=(o="function"==typeof o?o:r)?o(e,n):r;return h===r?Ns(e,n,r,o):!!h},y.isError=lu,y.isFinite=function xx(e){return"number"==typeof e&&Zf(e)},y.isFunction=Bn,y.isInteger=ad,y.isLength=Qo,y.isMap=cd,y.isMatch=function Ex(e,n){return e===n||$c(e,n,eu(n))},y.isMatchWith=function Ix(e,n,o){return o="function"==typeof o?o:r,$c(e,n,eu(n),o)},y.isNaN=function Sx(e){return ud(e)&&e!=+e},y.isNative=function Px(e){if(ub(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return eh(e)},y.isNil=function Rx(e){return null==e},y.isNull=function Ox(e){return null===e},y.isNumber=ud,y.isObject=jt,y.isObjectLike=kt,y.isPlainObject=Fs,y.isRegExp=fu,y.isSafeInteger=function Nx(e){return ad(e)&&e>=-ni&&e<=ni},y.isSet=ld,y.isString=Yo,y.isSymbol=Br,y.isTypedArray=Yi,y.isUndefined=function Ax(e){return e===r},y.isWeakMap=function Cx(e){return kt(e)&&Pr(e)==_s},y.isWeakSet=function Tx(e){return kt(e)&&"[object WeakSet]"==Ar(e)},y.join=function Mb(e,n){return null==e?"":C0.call(e,n)},y.kebabCase=wE,y.last=on,y.lastIndexOf=function jb(e,n,o){var h=null==e?0:e.length;if(!h)return-1;var p=h;return o!==r&&(p=(p=Re(o))<0?ur(h+p,0):Sr(p,h-1)),n==n?function g0(O,q,T){for(var ue=T+1;ue--;)if(O[ue]===q)return ue;return ue}(e,n,p):yo(e,Rf,p,!0)},y.lowerCase=xE,y.lowerFirst=EE,y.lt=Dx,y.lte=Fx,y.max=function vI(e){return e&&e.length?Do(e,Zr,Mc):r},y.maxBy=function _I(e,n){return e&&e.length?Do(e,ge(n,2),Mc):r},y.mean=function mI(e){return Nf(e,Zr)},y.meanBy=function bI(e,n){return Nf(e,ge(n,2))},y.min=function wI(e){return e&&e.length?Do(e,Zr,qc):r},y.minBy=function xI(e,n){return e&&e.length?Do(e,ge(n,2),qc):r},y.stubArray=mu,y.stubFalse=bu,y.stubObject=function aI(){return{}},y.stubString=function cI(){return""},y.stubTrue=function uI(){return!0},y.multiply=EI,y.nth=function $b(e,n){return e&&e.length?sh(e,Re(n)):r},y.noConflict=function XE(){return br._===this&&(br._=S0),this},y.noop=_u,y.now=Wo,y.pad=function IE(e,n,o){e=Ye(e);var h=(n=Re(n))?ki(e):0;if(!n||h>=n)return e;var p=(n-h)/2;return Zo(Ro(p),o)+e+Zo(Oo(p),o)},y.padEnd=function SE(e,n,o){e=Ye(e);var h=(n=Re(n))?ki(e):0;return n&&h<n?e+Zo(n-h,o):e},y.padStart=function PE(e,n,o){e=Ye(e);var h=(n=Re(n))?ki(e):0;return n&&h<n?Zo(n-h,o)+e:e},y.parseInt=function OE(e,n,o){return o||null==n?n=0:n&&(n=+n),F0(Ye(e).replace(lc,""),n||0)},y.random=function yE(e,n,o){if(o&&"boolean"!=typeof o&&Cr(e,n,o)&&(n=o=r),o===r&&("boolean"==typeof n?(o=n,n=r):"boolean"==typeof e&&(o=e,e=r)),e===r&&n===r?(e=0,n=1):(e=Hn(e),n===r?(n=e,e=0):n=Hn(n)),e>n){var h=e;e=n,n=h}if(o||e%1||n%1){var p=zf();return Sr(e+p*(n-e+Wm("1e-"+((p+"").length-1))),n)}return Zc(e,n)},y.reduce=function Uw(e,n,o){var h=Se(e)?mc:Af,p=arguments.length<3;return h(e,ge(n,4),o,p,ci)},y.reduceRight=function Zw(e,n,o){var h=Se(e)?Xm:Af,p=arguments.length<3;return h(e,ge(n,4),o,p,Gf)},y.repeat=function RE(e,n,o){return n=(o?Cr(e,n,o):n===r)?1:Re(n),zc(Ye(e),n)},y.replace=function NE(){var e=arguments,n=Ye(e[0]);return e.length<3?n:n.replace(e[1],e[2])},y.result=function oE(e,n,o){var h=-1,p=(n=li(n,e)).length;for(p||(p=1,e=r);++h<p;){var _=null==e?r:e[Nn(n[h])];_===r&&(h=p,_=o),e=Bn(_)?_.call(e):_}return e},y.round=II,y.runInContext=O,y.sample=function kw(e){return(Se(e)?Bf:M1)(e)},y.size=function Hw(e){if(null==e)return 0;if(qr(e))return Yo(e)?ki(e):e.length;var n=Pr(e);return n==pn||n==gn?e.size:Lc(e).length},y.snakeCase=AE,y.some=function Vw(e,n,o){var h=Se(e)?bc:q1;return o&&Cr(e,n,o)&&(n=r),h(e,ge(n,3))},y.sortedIndex=function Kb(e,n){return jo(e,n)},y.sortedIndexBy=function Bb(e,n,o){return kc(e,n,ge(o,2))},y.sortedIndexOf=function Hb(e,n){var o=null==e?0:e.length;if(o){var h=jo(e,n);if(h<o&&_n(e[h],n))return h}return-1},y.sortedLastIndex=function Vb(e,n){return jo(e,n,!0)},y.sortedLastIndexBy=function Wb(e,n,o){return kc(e,n,ge(o,2),!0)},y.sortedLastIndexOf=function Gb(e,n){if(null!=e&&e.length){var h=jo(e,n,!0)-1;if(_n(e[h],n))return h}return-1},y.startCase=TE,y.startsWith=function DE(e,n,o){return e=Ye(e),o=null==o?0:Ei(Re(o),0,e.length),n=Kr(n),e.slice(o,o+n.length)==n},y.subtract=SI,y.sum=function PI(e){return e&&e.length?Ec(e,Zr):0},y.sumBy=function OI(e,n){return e&&e.length?Ec(e,ge(n,2)):0},y.template=function FE(e,n,o){var h=y.templateSettings;o&&Cr(e,n,o)&&(n=r),e=Ye(e),n=Xo({},n,h,Ah);var I,R,p=Xo({},n.imports,h.imports,Ah),_=dr(p),x=Sc(p,_),Z=0,z=n.interpolate||fo,H="__p += '",ne=Oc((n.escape||fo).source+"|"+z.source+"|"+(z===Ql?dm:fo).source+"|"+(n.evaluate||fo).source+"|$","g"),fe="//# sourceURL="+(nt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++km+"]")+"\n";e.replace(ne,function(ve,Me,qe,Hr,Tr,Vr){return qe||(qe=Hr),H+=e.slice(Z,Vr).replace(bm,u0),Me&&(I=!0,H+="' +\n__e("+Me+") +\n'"),Tr&&(R=!0,H+="';\n"+Tr+";\n__p += '"),qe&&(H+="' +\n((__t = ("+qe+")) == null ? '' : __t) +\n'"),Z=Vr+ve.length,ve}),H+="';\n";var ye=nt.call(n,"variable")&&n.variable;if(ye){if(fm.test(ye))throw new Ee("Invalid `variable` option passed into `_.template`")}else H="with (obj) {\n"+H+"\n}\n";H=(R?H.replace(G_,""):H).replace(J_,"$1").replace(Q_,"$1;"),H="function("+(ye||"obj")+") {\n"+(ye?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(I?", __e = _.escape":"")+(R?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+H+"return __p\n}";var Ne=xd(function(){return Je(_,fe+"return "+H).apply(r,x)});if(Ne.source=H,lu(Ne))throw Ne;return Ne},y.times=function lI(e,n){if((e=Re(e))<1||e>ni)return[];var o=Pn,h=Sr(e,Pn);n=ge(n),e-=Pn;for(var p=Ic(h,n);++o<e;)n(o);return p},y.toFinite=Hn,y.toInteger=Re,y.toLength=hd,y.toLower=function ME(e){return Ye(e).toLowerCase()},y.toNumber=an,y.toSafeInteger=function Mx(e){return e?Ei(Re(e),-ni,ni):0===e?e:0},y.toString=Ye,y.toUpper=function jE(e){return Ye(e).toUpperCase()},y.trim=function $E(e,n,o){if((e=Ye(e))&&(o||n===r))return Cf(e);if(!e||!(n=Kr(n)))return e;var h=yn(e),p=yn(n);return fi(h,Tf(h,p),Df(h,p)+1).join("")},y.trimEnd=function LE(e,n,o){if((e=Ye(e))&&(o||n===r))return e.slice(0,Mf(e)+1);if(!e||!(n=Kr(n)))return e;var h=yn(e);return fi(h,0,Df(h,yn(n))+1).join("")},y.trimStart=function qE(e,n,o){if((e=Ye(e))&&(o||n===r))return e.replace(lc,"");if(!e||!(n=Kr(n)))return e;var h=yn(e);return fi(h,Tf(h,yn(n))).join("")},y.truncate=function UE(e,n){var o=30,h="...";if(jt(n)){var p="separator"in n?n.separator:p;o="length"in n?Re(n.length):o,h="omission"in n?Kr(n.omission):h}var _=(e=Ye(e)).length;if(zi(e)){var x=yn(e);_=x.length}if(o>=_)return e;var I=o-ki(h);if(I<1)return h;var R=x?fi(x,0,I).join(""):e.slice(0,I);if(p===r)return R+h;if(x&&(I+=R.length-I),fu(p)){if(e.slice(I).search(p)){var Z,z=R;for(p.global||(p=Oc(p.source,Ye(Yl.exec(p))+"g")),p.lastIndex=0;Z=p.exec(z);)var H=Z.index;R=R.slice(0,H===r?I:H)}}else if(e.indexOf(Kr(p),I)!=I){var ne=R.lastIndexOf(p);ne>-1&&(R=R.slice(0,ne))}return R+h},y.unescape=function ZE(e){return(e=Ye(e))&&Y_.test(e)?e.replace(Gl,y0):e},y.uniqueId=function hI(e){var n=++E0;return Ye(e)+n},y.upperCase=zE,y.upperFirst=pu,y.each=Yh,y.eachRight=Xh,y.first=Wh,vu(y,function(){var e={};return On(y,function(n,o){nt.call(y.prototype,o)||(e[o]=n)}),e}(),{chain:!1}),y.VERSION="4.17.21",en(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){y[e].placeholder=y}),en(["drop","take"],function(e,n){je.prototype[e]=function(o){o=o===r?1:ur(Re(o),0);var h=this.__filtered__&&!n?new je(this):this.clone();return h.__filtered__?h.__takeCount__=Sr(o,h.__takeCount__):h.__views__.push({size:Sr(o,Pn),type:e+(h.__dir__<0?"Right":"")}),h},je.prototype[e+"Right"]=function(o){return this.reverse()[e](o).reverse()}}),en(["filter","map","takeWhile"],function(e,n){var o=n+1,h=1==o||3==o;je.prototype[e]=function(p){var _=this.clone();return _.__iteratees__.push({iteratee:ge(p,3),type:o}),_.__filtered__=_.__filtered__||h,_}}),en(["head","last"],function(e,n){var o="take"+(n?"Right":"");je.prototype[e]=function(){return this[o](1).value()[0]}}),en(["initial","tail"],function(e,n){var o="drop"+(n?"":"Right");je.prototype[e]=function(){return this.__filtered__?new je(this):this[o](1)}}),je.prototype.compact=function(){return this.filter(Zr)},je.prototype.find=function(e){return this.filter(e).head()},je.prototype.findLast=function(e){return this.reverse().find(e)},je.prototype.invokeMap=Ae(function(e,n){return"function"==typeof e?new je(this):this.map(function(o){return Rs(o,e,n)})}),je.prototype.reject=function(e){return this.filter(Jo(ge(e)))},je.prototype.slice=function(e,n){e=Re(e);var o=this;return o.__filtered__&&(e>0||n<0)?new je(o):(e<0?o=o.takeRight(-e):e&&(o=o.drop(e)),n!==r&&(o=(n=Re(n))<0?o.dropRight(-n):o.take(n-e)),o)},je.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},je.prototype.toArray=function(){return this.take(Pn)},On(je.prototype,function(e,n){var o=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),p=y[h?"take"+("last"==n?"Right":""):n],_=h||/^find/.test(n);p&&(y.prototype[n]=function(){var x=this.__wrapped__,I=h?[1]:arguments,R=x instanceof je,Z=I[0],z=R||Se(x),H=function(Me){var qe=p.apply(y,si([Me],I));return h&&ne?qe[0]:qe};z&&o&&"function"==typeof Z&&1!=Z.length&&(R=z=!1);var ne=this.__chain__,ye=_&&!ne,Ne=R&&!this.__actions__.length;if(!_&&z){x=Ne?x:new je(this);var ve=e.apply(x,I);return ve.__actions__.push({func:Ho,args:[H],thisArg:r}),new rn(ve,ne)}return ye&&Ne?e.apply(this,I):(ve=this.thru(H),ye?h?ve.value()[0]:ve.value():ve)})}),en(["pop","push","shift","sort","splice","unshift"],function(e){var n=_o[e],o=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);y.prototype[e]=function(){var p=arguments;if(h&&!this.__chain__){var _=this.value();return n.apply(Se(_)?_:[],p)}return this[o](function(x){return n.apply(Se(x)?x:[],p)})}}),On(je.prototype,function(e,n){var o=y[n];if(o){var h=o.name+"";nt.call(Vi,h)||(Vi[h]=[]),Vi[h].push({name:n,func:o})}}),Vi[qo(r,2).name]=[{name:"wrapper",func:r}],je.prototype.clone=function Z0(){var e=new je(this.__wrapped__);return e.__actions__=Lr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Lr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Lr(this.__views__),e},je.prototype.reverse=function z0(){if(this.__filtered__){var e=new je(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},je.prototype.value=function k0(){var e=this.__wrapped__.value(),n=this.__dir__,o=Se(e),h=n<0,p=o?e.length:0,_=function tb(e,n,o){for(var h=-1,p=o.length;++h<p;){var _=o[h],x=_.size;switch(_.type){case"drop":e+=x;break;case"dropRight":n-=x;break;case"take":n=Sr(n,e+x);break;case"takeRight":e=ur(e,n-x)}}return{start:e,end:n}}(0,p,this.__views__),x=_.start,I=_.end,R=I-x,Z=h?I:x-1,z=this.__iteratees__,H=z.length,ne=0,fe=Sr(R,this.__takeCount__);if(!o||!h&&p==R&&fe==R)return dh(e,this.__actions__);var ye=[];e:for(;R--&&ne<fe;){for(var Ne=-1,ve=e[Z+=n];++Ne<H;){var Me=z[Ne],Hr=Me.type,Tr=(0,Me.iteratee)(ve);if(2==Hr)ve=Tr;else if(!Tr){if(1==Hr)continue e;break e}}ye[ne++]=ve}return ye},y.prototype.at=_w,y.prototype.chain=function mw(){return Qh(this)},y.prototype.commit=function bw(){return new rn(this.value(),this.__chain__)},y.prototype.next=function ww(){this.__values__===r&&(this.__values__=fd(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},y.prototype.plant=function Ew(e){for(var n,o=this;o instanceof Co;){var h=Kh(o);h.__index__=0,h.__values__=r,n?p.__wrapped__=h:n=h;var p=h;o=o.__wrapped__}return p.__wrapped__=e,n},y.prototype.reverse=function Iw(){var e=this.__wrapped__;if(e instanceof je){var n=e;return this.__actions__.length&&(n=new je(this)),(n=n.reverse()).__actions__.push({func:Ho,args:[ou],thisArg:r}),new rn(n,this.__chain__)}return this.thru(ou)},y.prototype.toJSON=y.prototype.valueOf=y.prototype.value=function Sw(){return dh(this.__wrapped__,this.__actions__)},y.prototype.first=y.prototype.head,ws&&(y.prototype[ws]=function xw(){return this}),y}();mi?((mi.exports=Ki)._=Ki,yc._=Ki):br._=Ki}.call(fs);var Xv=Object.defineProperty,e_=Object.defineProperties,t_=Object.getOwnPropertyDescriptors,Dl=Object.getOwnPropertySymbols,r_=Object.prototype.hasOwnProperty,n_=Object.prototype.propertyIsEnumerable,Fl=(a,t,r)=>t in a?Xv(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,eo=(a,t)=>{for(var r in t||(t={}))r_.call(t,r)&&Fl(a,r,t[r]);if(Dl)for(var r of Dl(t))n_.call(t,r)&&Fl(a,r,t[r]);return a},i_=(a,t)=>e_(a,t_(t));function ri(a,t,r){var s;const u=function V(a){const[t,r]=a.split($e);return{namespace:t,reference:r}}(a);return(null==(s=t.rpcMap)?void 0:s[u.reference])||`https://rpc.walletconnect.com/v1/?chainId=${u.namespace}:${u.reference}&projectId=${r}`}function vi(a){return a.includes(":")?a.split(":")[1]:a}function Ml(a){return a.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function jl(a={},t={}){const r=$l(a),s=$l(t);return Wa.exports.merge(r,s)}function $l(a){var t,r,s,u;const l={};if(!Dt(a))return l;for(const[f,g]of Object.entries(a)){const w=Qe(f)?[f]:g.chains,m=g.methods||[],E=g.events||[],N=g.rpcMap||{},M=me(f);l[M]=i_(eo(eo({},l[M]),g),{chains:Gr(w,null==(t=l[M])?void 0:t.chains),methods:Gr(m,null==(r=l[M])?void 0:r.methods),events:Gr(E,null==(s=l[M])?void 0:s.events),rpcMap:eo(eo({},N),null==(u=l[M])?void 0:u.rpcMap)})}return l}function o_(a){return a.includes(":")?a.split(":")[2]:a}function a_(a){const t={};for(const[r,s]of Object.entries(a)){const u=s.methods||[],l=s.events||[],f=s.accounts||[],g=Qe(r)?[r]:s.chains?s.chains:Ml(s.accounts);t[r]={chains:g,methods:u,events:l,accounts:f}}return t}function Ga(a){return"number"==typeof a?a:a.includes("0x")?parseInt(a,16):(a=a.includes(":")?a.split(":")[1]:a,isNaN(Number(a))?a:Number(a))}const Ll={},St=a=>Ll[a],Ja=(a,t)=>{Ll[a]=t};class c_{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit("default_chain_changed",`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t&&t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=vi(r);t[u]=this.createHttpProvider(u,null==(s=this.namespace.rpcMap)?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||ri(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Dn(new ti.Z(s,St("disableProviderPing")))}}class u_{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=St("events"),this.client=St("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}request(t){var r=this;return(0,v.Z)(function*(){switch(t.request.method){case"eth_requestAccounts":case"eth_accounts":return r.getAccounts();case"wallet_switchEthereumChain":return yield r.handleSwitchChain(t);case"eth_chainId":return parseInt(r.getDefaultChain())}return r.namespace.methods.includes(t.request.method)?yield r.client.request(t):r.getHttpProvider().request(t.request)})()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(parseInt(t),r),this.chainId=parseInt(t),this.events.emit("default_chain_changed",`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,r){const s=r||ri(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Dn(new ti.k(s,St("disableProviderPing")))}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=parseInt(vi(r));t[u]=this.createHttpProvider(u,null==(s=this.namespace.rpcMap)?void 0:s[r])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}handleSwitchChain(t){var r=this;return(0,v.Z)(function*(){var s,u;let l=t.request.params?null==(s=t.request.params[0])?void 0:s.chainId:"0x0";l=l.startsWith("0x")?l:`0x${l}`;const f=parseInt(l,16);if(r.isChainApproved(f))r.setDefaultChain(`${f}`);else{if(!r.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${f}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);yield r.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:l}]},chainId:null==(u=r.namespace.chains)?void 0:u[0]}),r.setDefaultChain(`${f}`)}return null})()}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}}class l_{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit("default_chain_changed",`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=vi(r);t[u]=this.createHttpProvider(u,null==(s=this.namespace.rpcMap)?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||ri(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Dn(new ti.Z(s,St("disableProviderPing")))}}class f_{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=vi(r);t[u]=this.createHttpProvider(u,null==(s=this.namespace.rpcMap)?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||ri(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Dn(new ti.Z(s,St("disableProviderPing")))}}class h_{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r),u=vi(r);t[u]=this.createHttpProvider(u,s)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}getCardanoRPCUrl(t){const r=this.namespace.rpcMap;if(r)return r[t]}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||this.getCardanoRPCUrl(t);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Dn(new ti.Z(s,St("disableProviderPing")))}}class d_{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit("default_chain_changed",`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=vi(r);t[u]=this.createHttpProvider(u,null==(s=this.namespace.rpcMap)?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||ri(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Dn(new ti.Z(s,St("disableProviderPing")))}}class p_{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){this.httpProviders[t]||this.setHttpProvider(t,r),this.chainId=t,this.events.emit("default_chain_changed",`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;const u=vi(r);t[u]=this.createHttpProvider(u,null==(s=this.namespace.rpcMap)?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||ri(t,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);return new Dn(new ti.Z(s,St("disableProviderPing")))}}class g_{constructor(t){this.name="near",this.namespace=t.namespace,this.events=St("events"),this.client=St("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,r){if(this.chainId=t,!this.httpProviders[t]){const s=r||ri(`${this.name}:${t}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,s)}this.events.emit("default_chain_changed",`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t&&t.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(r=>{var s;t[r]=this.createHttpProvider(r,null==(s=this.namespace.rpcMap)?void 0:s[r])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,r=this.httpProviders[t];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return r}setHttpProvider(t,r){const s=this.createHttpProvider(t,r);s&&(this.httpProviders[t]=s)}createHttpProvider(t,r){const s=r||ri(t,this.namespace);return typeof s>"u"?void 0:new Dn(new ti.Z(s,St("disableProviderPing")))}}var y_=Object.defineProperty,v_=Object.defineProperties,__=Object.getOwnPropertyDescriptors,ql=Object.getOwnPropertySymbols,m_=Object.prototype.hasOwnProperty,b_=Object.prototype.propertyIsEnumerable,Ul=(a,t,r)=>t in a?y_(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,to=(a,t)=>{for(var r in t||(t={}))m_.call(t,r)&&Ul(a,r,t[r]);if(ql)for(var r of ql(t))b_.call(t,r)&&Ul(a,r,t[r]);return a},Qa=(a,t)=>v_(a,__(t));class Ya{constructor(t){this.events=new(Be()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof t?.logger<"u"&&"string"!=typeof t?.logger?t.logger:(0,Le.gw)((0,Le.jI)({level:t?.logger||"error"})),this.disableProviderPing=t?.disableProviderPing||!1}static init(t){return(0,v.Z)(function*(){const r=new Ya(t);return yield r.initialize(),r})()}request(t,r,s){var u=this;return(0,v.Z)(function*(){const[l,f]=u.validateChain(r);if(!u.session)throw new Error("Please call connect() before request()");return yield u.getProvider(l).request({request:to({},t),chainId:`${l}:${f}`,topic:u.session.topic,expiry:s})})()}sendAsync(t,r,s,u){const l=(new Date).getTime();this.request(t,s,u).then(f=>r(null,(0,be.formatJsonRpcResult)(l,f))).catch(f=>r(f,void 0))}enable(){var t=this;return(0,v.Z)(function*(){if(!t.client)throw new Error("Sign Client not initialized");return t.session||(yield t.connect({namespaces:t.namespaces,optionalNamespaces:t.optionalNamespaces,sessionProperties:t.sessionProperties})),yield t.requestAccounts()})()}disconnect(){var t=this;return(0,v.Z)(function*(){var r;if(!t.session)throw new Error("Please call connect() before enable()");yield t.client.disconnect({topic:null==(r=t.session)?void 0:r.topic,reason:Ce("USER_DISCONNECTED")}),yield t.cleanup()})()}connect(t){var r=this;return(0,v.Z)(function*(){if(!r.client)throw new Error("Sign Client not initialized");if(r.setNamespaces(t),yield r.cleanupPendingPairings(),!t.skipPairing)return yield r.pair(t.pairingTopic)})()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}removeListener(t,r){this.events.removeListener(t,r)}off(t,r){this.events.off(t,r)}get isWalletConnect(){return!0}pair(t){var r=this;return(0,v.Z)(function*(){r.shouldAbortPairingAttempt=!1;let s=0;do{if(r.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(s>=r.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:u,approval:l}=yield r.client.connect({pairingTopic:t,requiredNamespaces:r.namespaces,optionalNamespaces:r.optionalNamespaces,sessionProperties:r.sessionProperties});u&&(r.uri=u,r.events.emit("display_uri",u)),yield l().then(f=>{r.session=f;const g=a_(f.namespaces);r.namespaces=jl(r.namespaces,g),r.persist("namespaces",r.namespaces)}).catch(f=>{if(f.message!==Rl)throw f;s++})}while(!r.session);return r.onConnect(),r.session})()}setDefaultChain(t,r){try{if(!this.session)return;const[s,u]=this.validateChain(t);this.getProvider(s).setDefaultChain(u,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}cleanupPendingPairings(t={}){var r=this;return(0,v.Z)(function*(){r.logger.info("Cleaning up inactive pairings...");const s=r.client.pairing.getAll();if(zt(s)){for(const u of s)t.deletePairings?r.client.core.expirer.set(u.topic,0):yield r.client.core.relayer.subscriber.unsubscribe(u.topic);r.logger.info(`Inactive pairings cleared: ${s.length}`)}})()}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}checkStorage(){var t=this;return(0,v.Z)(function*(){t.namespaces=yield t.getFromStore("namespaces"),t.optionalNamespaces=(yield t.getFromStore("optionalNamespaces"))||{},t.client.session.length&&(t.session=t.client.session.get(t.client.session.keys[t.client.session.keys.length-1]),t.createProviders())})()}initialize(){var t=this;return(0,v.Z)(function*(){t.logger.trace("Initialized"),yield t.createClient(),yield t.checkStorage(),t.registerEventListeners()})()}createClient(){var t=this;return(0,v.Z)(function*(){t.client=t.providerOpts.client||(yield Va.init({logger:t.providerOpts.logger||"error",relayUrl:t.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:t.providerOpts.projectId,metadata:t.providerOpts.metadata,storageOptions:t.providerOpts.storageOptions,storage:t.providerOpts.storage,name:t.providerOpts.name})),t.logger.trace("SignClient Initialized")})()}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(r=>me(r)))];Ja("client",this.client),Ja("events",this.events),Ja("disableProviderPing",this.disableProviderPing),t.forEach(r=>{if(!this.session)return;const s=function s_(a,t){const r=Object.keys(t.namespaces).filter(u=>u.includes(a));if(!r.length)return[];const s=[];return r.forEach(u=>{s.push(...t.namespaces[u].accounts)}),s}(r,this.session),u=Ml(s),l=jl(this.namespaces,this.optionalNamespaces),f=Qa(to({},l[r]),{accounts:s,chains:u});switch(r){case"eip155":this.rpcProviders[r]=new u_({namespace:f});break;case"solana":this.rpcProviders[r]=new l_({namespace:f});break;case"cosmos":this.rpcProviders[r]=new f_({namespace:f});break;case"polkadot":this.rpcProviders[r]=new c_({namespace:f});break;case"cip34":this.rpcProviders[r]=new h_({namespace:f});break;case"elrond":this.rpcProviders[r]=new d_({namespace:f});break;case"multiversx":this.rpcProviders[r]=new p_({namespace:f});break;case"near":this.rpcProviders[r]=new g_({namespace:f})}})}registerEventListeners(){var t=this;if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",r=>{this.events.emit("session_ping",r)}),this.client.on("session_event",r=>{const{params:s}=r,{event:u}=s;if("accountsChanged"===u.name){const l=u.data;l&&zt(l)&&this.events.emit("accountsChanged",l.map(o_))}else if("chainChanged"===u.name){const l=s.chainId,f=s.event.data,g=me(l),w=Ga(l)!==Ga(f)?`${g}:${Ga(f)}`:l;this.onChainChanged(w)}else this.events.emit(u.name,u.data);this.events.emit("session_event",r)}),this.client.on("session_update",({topic:r,params:s})=>{var u;const{namespaces:l}=s,f=null==(u=this.client)?void 0:u.session.get(r);this.session=Qa(to({},f),{namespaces:l}),this.onSessionUpdate(),this.events.emit("session_update",{topic:r,params:s})}),this.client.on("session_delete",function(){var r=(0,v.Z)(function*(s){yield t.cleanup(),t.events.emit("session_delete",s),t.events.emit("disconnect",Qa(to({},Ce("USER_DISCONNECTED")),{data:s.topic}))});return function(s){return r.apply(this,arguments)}}()),this.on("default_chain_changed",r=>{this.onChainChanged(r,!0)})}getProvider(t){if(!this.rpcProviders[t])throw new Error(`Provider not found: ${t}`);return this.rpcProviders[t]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var r;this.getProvider(t).updateNamespace(null==(r=this.session)?void 0:r.namespaces[t])})}setNamespaces(t){const{namespaces:r,optionalNamespaces:s,sessionProperties:u}=t;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=u,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(t){const[r,s]=t?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(f=>me(f)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const u=me(Object.keys(this.namespaces)[0]);return[u,this.rpcProviders[u].getDefaultChain()]}requestAccounts(){var t=this;return(0,v.Z)(function*(){const[r]=t.validateChain();return yield t.getProvider(r).requestAccounts()})()}onChainChanged(t,r=!1){if(!this.namespaces)return;const[s,u]=this.validateChain(t);u&&(r||this.getProvider(s).setDefaultChain(u),this.namespaces[s]?this.namespaces[s].defaultChain=u:this.namespaces[`${s}:${u}`]?this.namespaces[`${s}:${u}`].defaultChain=u:this.namespaces[`${s}:${u}`]={defaultChain:u},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}cleanup(){var t=this;return(0,v.Z)(function*(){t.session=void 0,t.namespaces=void 0,t.optionalNamespaces=void 0,t.sessionProperties=void 0,t.persist("namespaces",void 0),t.persist("optionalNamespaces",void 0),t.persist("sessionProperties",void 0),yield t.cleanupPendingPairings({deletePairings:!0})})()}persist(t,r){this.client.core.storage.setItem(`${Tl}/${t}`,r)}getFromStore(t){var r=this;return(0,v.Z)(function*(){return yield r.client.core.storage.getItem(`${Tl}/${t}`)})()}}const w_=Ya,ro=["eth_sendTransaction","personal_sign"],Zl=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],no=["chainChanged","accountsChanged"],zl=["chainChanged","accountsChanged","message","disconnect","connect"];var P_=Object.defineProperty,O_=Object.defineProperties,R_=Object.getOwnPropertyDescriptors,kl=Object.getOwnPropertySymbols,N_=Object.prototype.hasOwnProperty,A_=Object.prototype.propertyIsEnumerable,Kl=(a,t,r)=>t in a?P_(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,hs=(a,t)=>{for(var r in t||(t={}))N_.call(t,r)&&Kl(a,r,t[r]);if(kl)for(var r of kl(t))A_.call(t,r)&&Kl(a,r,t[r]);return a},Bl=(a,t)=>O_(a,R_(t));function io(a){return Number(a[0].split(":")[1])}function Xa(a){return`0x${a.toString(16)}`}class so{constructor(){this.events=new Ze.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(t,r)=>(this.events.on(t,r),this),this.once=(t,r)=>(this.events.once(t,r),this),this.removeListener=(t,r)=>(this.events.removeListener(t,r),this),this.off=(t,r)=>(this.events.off(t,r),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static init(t){return(0,v.Z)(function*(){const r=new so;return yield r.initialize(t),r})()}request(t,r){var s=this;return(0,v.Z)(function*(){return yield s.signer.request(t,s.formatChainId(s.chainId),r)})()}sendAsync(t,r,s){this.signer.sendAsync(t,r,this.formatChainId(this.chainId),s)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}enable(){var t=this;return(0,v.Z)(function*(){return t.session||(yield t.connect()),yield t.request({method:"eth_requestAccounts"})})()}connect(t){var r=this;return(0,v.Z)(function*(){if(!r.signer.client)throw new Error("Provider not initialized. Call init() first");r.loadConnectOpts(t);const{required:s,optional:u}=function C_(a){const{chains:t,optionalChains:r,methods:s,optionalMethods:u,events:l,optionalEvents:f,rpcMap:g}=a;if(!zt(t))throw new Error("Invalid chains");const w={chains:t,methods:s||ro,events:l||no,rpcMap:hs({},t.length?{[io(t)]:g[io(t)]}:{})},m=l?.filter(J=>!no.includes(J)),E=s?.filter(J=>!ro.includes(J));if(!(r||f||u||null!=m&&m.length||null!=E&&E.length))return{required:t.length?w:void 0};const M={chains:[...new Set(m?.length&&E?.length||!r?w.chains.concat(r||[]):r)],methods:[...new Set(w.methods.concat(null!=u&&u.length?u:Zl))],events:[...new Set(w.events.concat(null!=f&&f.length?f:zl))],rpcMap:g};return{required:t.length?w:void 0,optional:r.length?M:void 0}}(r.rpc);try{const l=yield new Promise(function(){var g=(0,v.Z)(function*(w,m){var E;r.rpc.showQrModal&&(null==(E=r.modal)||E.subscribeModal(N=>{!N.open&&!r.signer.session&&(r.signer.abortPairingAttempt(),m(new Error("Connection request reset. Please try again.")))})),yield r.signer.connect(Bl(hs({namespaces:hs({},s&&{[r.namespace]:s})},u&&{optionalNamespaces:{[r.namespace]:u}}),{pairingTopic:t?.pairingTopic})).then(N=>{w(N)}).catch(N=>{m(new Error(N.message))})});return function(w,m){return g.apply(this,arguments)}}());if(!l)return;const f=function j(a,t=[]){const r=[];return Object.keys(a).forEach(s=>{t.length&&!t.includes(s)||r.push(...a[s].accounts)}),r}(l.namespaces,[r.namespace]);r.setChainIds(r.rpc.chains.length?r.rpc.chains:f),r.setAccounts(f),r.events.emit("connect",{chainId:Xa(r.chainId)})}catch(l){throw r.signer.logger.error(l),l}finally{r.modal&&r.modal.closeModal()}})()}disconnect(){var t=this;return(0,v.Z)(function*(){t.session&&(yield t.signer.disconnect()),t.reset()})()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:r}=t,{event:s}=r;"accountsChanged"===s.name?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===s.name?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const r=parseInt(t);this.chainId=r,this.events.emit("chainChanged",Xa(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",Bl(hs({},Ce("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var r,s;this.rpc.showQrModal&&(null==(r=this.modal)||r.closeModal(),null==(s=this.modal)||s.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return"string"==typeof t&&t.startsWith(`${this.namespace}:`)}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const r=t.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Xa(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const r=this.parseChainId(t);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(t){const[r,s,u]=t.split(":");return{chainId:`${r}:${s}`,address:u}}setAccounts(t){this.accounts=t.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var r,s;const u=null!=(r=t?.chains)?r:[],l=null!=(s=t?.optionalChains)?s:[],f=u.concat(l);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const g=u.length?t?.methods||ro:[],w=u.length?t?.events||no:[],m=t?.optionalMethods||[],E=t?.optionalEvents||[],N=t?.rpcMap||this.buildRpcMap(f,t.projectId),M=t?.qrModalOptions||void 0;return{chains:u?.map(J=>this.formatChainId(J)),optionalChains:l.map(J=>this.formatChainId(J)),methods:g,events:w,optionalMethods:m,optionalEvents:E,rpcMap:N,showQrModal:!(null==t||!t.showQrModal),qrModalOptions:M,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,r){const s={};return t.forEach(u=>{s[u]=this.getRpcUrl(u,r)}),s}initialize(t){var r=this;return(0,v.Z)(function*(){if(r.rpc=r.getRpcConfig(t),r.chainId=io(r.rpc.chains.length?r.rpc.chains:r.rpc.optionalChains),r.signer=yield w_.init({projectId:r.rpc.projectId,metadata:r.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions}),r.registerEventListeners(),yield r.loadPersistedSession(),r.rpc.showQrModal){let s;try{const{WalletConnectModal:u}=yield te.e(301).then(te.bind(te,3301));s=u}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(s)try{r.modal=new s(hs({projectId:r.rpc.projectId},r.rpc.qrModalOptions))}catch(u){throw r.signer.logger.error(u),new Error("Could not generate WalletConnectModal Instance")}}})()}loadConnectOpts(t){if(!t)return;const{chains:r,optionalChains:s,rpcMap:u}=t;r&&zt(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=u?.[l]||this.getRpcUrl(l)})),s&&zt(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(l=>this.formatChainId(l)),s.forEach(l=>{this.rpc.rpcMap[l]=u?.[l]||this.getRpcUrl(l)}))}getRpcUrl(t,r){var s;return(null==(s=this.rpc.rpcMap)?void 0:s[t])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${t}&projectId=${r||this.rpc.projectId}`}loadPersistedSession(){var t=this;return(0,v.Z)(function*(){if(!t.session)return;const r=yield t.signer.client.core.storage.getItem(`${t.STORAGE_KEY}/chainId`),s=t.session.namespaces[`${t.namespace}:${r}`]?t.session.namespaces[`${t.namespace}:${r}`]:t.session.namespaces[t.namespace];t.setChainIds(r?[t.formatChainId(r)]:s?.accounts),t.setAccounts(s?.accounts)})()}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return"string"==typeof t||t instanceof String?[this.parseAccount(t)]:t.map(r=>this.parseAccount(r))}}const T_=so},2108:(Ot,se,te)=>{"use strict";te.d(se,{q:()=>v});class v{}},699:(Ot,se,te)=>{"use strict";te.r(se),te.d(se,{IEvents:()=>v.q});var v=te(2108)},4953:(Ot,se,te)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.HEARTBEAT_EVENTS=se.HEARTBEAT_INTERVAL=void 0;const v=te(5409);se.HEARTBEAT_INTERVAL=v.FIVE_SECONDS,se.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},5368:(Ot,se,te)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0}),te(9653).__exportStar(te(4953),se)},9754:(Ot,se,te)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.HeartBeat=void 0;const v=te(9653),Ze=te(2016),Be=te(5409),lr=te(2007),ie=te(5368);class ze extends lr.IHeartBeat{constructor(ae){super(ae),this.events=new Ze.EventEmitter,this.interval=ie.HEARTBEAT_INTERVAL,this.interval=ae?.interval||ie.HEARTBEAT_INTERVAL}static init(ae){return v.__awaiter(this,void 0,void 0,function*(){const Q=new ze(ae);return yield Q.init(),Q})}init(){return v.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(ae,Q){this.events.on(ae,Q)}once(ae,Q){this.events.once(ae,Q)}off(ae,Q){this.events.off(ae,Q)}removeListener(ae,Q){this.events.removeListener(ae,Q)}initialize(){return v.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),Be.toMiliseconds(this.interval))})}pulse(){this.events.emit(ie.HEARTBEAT_EVENTS.pulse)}}se.HeartBeat=ze},986:(Ot,se,te)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});const v=te(9653);v.__exportStar(te(9754),se),v.__exportStar(te(2007),se),v.__exportStar(te(5368),se)},7293:(Ot,se,te)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0}),se.IHeartBeat=void 0;const v=te(699);se.IHeartBeat=class Ze extends v.IEvents{constructor(lr){super()}}},2007:(Ot,se,te)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0}),te(9653).__exportStar(te(7293),se)},2768:()=>{},9557:(Ot,se,te)=>{Ot.exports=self.fetch||(self.fetch=te(8456).default||te(8456))},2650:(Ot,se,te)=>{Ot=te.nmd(Ot);var Ze="__lodash_hash_undefined__",Be=1,lr=2,ie=9007199254740991,ze="[object Arguments]",De="[object Array]",ae="[object AsyncFunction]",Q="[object Boolean]",we="[object Date]",pr="[object Error]",$t="[object Function]",Rt="[object GeneratorFunction]",xe="[object Map]",gr="[object Number]",nr="[object Null]",Kt="[object Object]",Nt="[object Promise]",Dr="[object Proxy]",xr="[object RegExp]",Er="[object Set]",it="[object String]",Pe="[object Undefined]",k="[object WeakMap]",G="[object ArrayBuffer]",W="[object DataView]",Xe=/^\[object .+?Constructor\]$/,pt=/^(?:0|[1-9]\d*)$/,Ue={};Ue["[object Float32Array]"]=Ue["[object Float64Array]"]=Ue["[object Int8Array]"]=Ue["[object Int16Array]"]=Ue["[object Int32Array]"]=Ue["[object Uint8Array]"]=Ue["[object Uint8ClampedArray]"]=Ue["[object Uint16Array]"]=Ue["[object Uint32Array]"]=!0,Ue[ze]=Ue[De]=Ue[G]=Ue[Q]=Ue[W]=Ue[we]=Ue[pr]=Ue[$t]=Ue[xe]=Ue[gr]=Ue[Kt]=Ue[xr]=Ue[Er]=Ue[it]=Ue[k]=!1;var di="object"==typeof global&&global&&global.Object===Object&&global,Ri="object"==typeof self&&self&&self.Object===Object&&self,yr=di||Ri||Function("return this")(),j=se&&!se.nodeType&&se,$=j&&Ot&&!Ot.nodeType&&Ot,C=$&&$.exports===j,d=C&&di.process,S=function(){try{return d&&d.binding&&d.binding("util")}catch{}}(),de=S&&S.isTypedArray;function gt(b,P){for(var K=-1,ce=null==b?0:b.length;++K<ce;)if(P(b[K],K,b))return!0;return!1}function Lt(b,P){return b.has(P)}function Qt(b){var P=-1,K=Array(b.size);return b.forEach(function(ce,Qe){K[++P]=[Qe,ce]}),K}function Bt(b){var P=-1,K=Array(b.size);return b.forEach(function(ce){K[++P]=ce}),K}var b,At=Array.prototype,et=Object.prototype,ct=yr["__core-js_shared__"],st=Function.prototype.toString,tt=et.hasOwnProperty,Yt=(b=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",xt=et.toString,vr=RegExp("^"+st.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=C?yr.Buffer:void 0,fr=yr.Symbol,Or=yr.Uint8Array,Fr=et.propertyIsEnumerable,Rr=At.splice,_r=fr?fr.toStringTag:void 0,Wr=Object.getOwnPropertySymbols,bn=Ht?Ht.isBuffer:void 0,Wn=function ht(b,P){return function(K){return b(P(K))}}(Object.keys,Object),wn=Qn(yr,"DataView"),xn=Qn(yr,"Map"),qt=Qn(yr,"Promise"),Ct=Qn(yr,"Set"),Tt=Qn(yr,"WeakMap"),Et=Qn(Object,"create"),ke=In(wn),Ut=In(xn),sr=In(qt),Xt=In(Ct),Vt=In(Tt),er=fr?fr.prototype:void 0,Zt=er?er.valueOf:void 0;function ot(b){var P=-1,K=null==b?0:b.length;for(this.clear();++P<K;){var ce=b[P];this.set(ce[0],ce[1])}}function cn(b){var P=-1,K=null==b?0:b.length;for(this.clear();++P<K;){var ce=b[P];this.set(ce[0],ce[1])}}function Gn(b){var P=-1,K=null==b?0:b.length;for(this.clear();++P<K;){var ce=b[P];this.set(ce[0],ce[1])}}function pi(b){var P=-1,K=null==b?0:b.length;for(this.__data__=new Gn;++P<K;)this.add(b[P])}function Cn(b){var P=this.__data__=new cn(b);this.size=P.size}function Ni(b,P){for(var K=b.length;K--;)if(Us(b[K][0],P))return K;return-1}function or(b){return null==b?void 0===b?Pe:nr:_r&&_r in Object(b)?function ha(b){var P=tt.call(b,_r),K=b[_r];try{b[_r]=void 0;var ce=!0}catch{}var Qe=xt.call(b);return ce&&(P?b[_r]=K:delete b[_r]),Qe}(b):function ya(b){return xt.call(b)}(b)}function un(b){return Yn(b)&&or(b)==ze}function It(b,P,K,ce,Qe){return b===P||(null==b||null==P||!Yn(b)&&!Yn(P)?b!=b&&P!=P:function Gr(b,P,K,ce,Qe,me){var bt=Ti(b),rr=Ti(P),ar=bt?De:En(b),B=rr?De:En(P),Ce=(ar=ar==ze?Kt:ar)==Kt,zt=(B=B==ze?Kt:B)==Kt,Dt=ar==B;if(Dt&&rs(b)){if(!rs(P))return!1;bt=!0,Ce=!1}if(Dt&&!Ce)return me||(me=new Cn),bt||ks(b)?Ai(b,P,K,ce,Qe,me):function fa(b,P,K,ce,Qe,me,bt){switch(K){case W:if(b.byteLength!=P.byteLength||b.byteOffset!=P.byteOffset)return!1;b=b.buffer,P=P.buffer;case G:return!(b.byteLength!=P.byteLength||!me(new Or(b),new Or(P)));case Q:case we:case gr:return Us(+b,+P);case pr:return b.name==P.name&&b.message==P.message;case xr:case it:return b==P+"";case xe:var rr=Qt;case Er:if(rr||(rr=Bt),b.size!=P.size&&!(ce&Be))return!1;var B=bt.get(b);if(B)return B==P;ce|=lr,bt.set(b,P);var Ce=Ai(rr(b),rr(P),ce,Qe,me,bt);return bt.delete(b),Ce;case"[object Symbol]":if(Zt)return Zt.call(b)==Zt.call(P)}return!1}(b,P,ar,K,ce,Qe,me);if(!(K&Be)){var at=Ce&&tt.call(b,"__wrapped__"),Ge=zt&&tt.call(P,"__wrapped__");if(at||Ge){var Jr=at?b.value():b,ln=Ge?P.value():P;return me||(me=new Cn),Qe(Jr,ln,K,ce,me)}}return!!Dt&&(me||(me=new Cn),function ts(b,P,K,ce,Qe,me){var bt=K&Be,rr=yi(b),ar=rr.length;if(ar!=yi(P).length&&!bt)return!1;for(var zt=ar;zt--;){var Dt=rr[zt];if(!(bt?Dt in P:tt.call(P,Dt)))return!1}var at=me.get(b);if(at&&me.get(P))return at==P;var Ge=!0;me.set(b,P),me.set(P,b);for(var Jr=bt;++zt<ar;){var ln=b[Dt=rr[zt]],Qr=P[Dt];if(ce)var Ks=bt?ce(Qr,ln,Dt,P,b,me):ce(ln,Qr,Dt,b,P,me);if(!(void 0===Ks?ln===Qr||Qe(ln,Qr,K,ce,me):Ks)){Ge=!1;break}Jr||(Jr="constructor"==Dt)}if(Ge&&!Jr){var Di=b.constructor,Fi=P.constructor;Di!=Fi&&"constructor"in b&&"constructor"in P&&!("function"==typeof Di&&Di instanceof Di&&"function"==typeof Fi&&Fi instanceof Fi)&&(Ge=!1)}return me.delete(b),me.delete(P),Ge}(b,P,K,ce,Qe,me))}(b,P,K,ce,It,Qe))}function Ai(b,P,K,ce,Qe,me){var bt=K&Be,rr=b.length,ar=P.length;if(rr!=ar&&!(bt&&ar>rr))return!1;var B=me.get(b);if(B&&me.get(P))return B==P;var Ce=-1,zt=!0,Dt=K&lr?new pi:void 0;for(me.set(b,P),me.set(P,b);++Ce<rr;){var at=b[Ce],Ge=P[Ce];if(ce)var Jr=bt?ce(Ge,at,Ce,P,b,me):ce(at,Ge,Ce,b,P,me);if(void 0!==Jr){if(Jr)continue;zt=!1;break}if(Dt){if(!gt(P,function(ln,Qr){if(!Lt(Dt,Qr)&&(at===ln||Qe(at,ln,K,ce,me)))return Dt.push(Qr)})){zt=!1;break}}else if(at!==Ge&&!Qe(at,Ge,K,ce,me)){zt=!1;break}}return me.delete(b),me.delete(P),zt}function yi(b){return function $s(b,P,K){var ce=P(b);return Ti(b)?ce:function We(b,P){for(var K=-1,ce=P.length,Qe=b.length;++K<ce;)b[Qe+K]=P[K];return b}(ce,K(b))}(b,ba,Ls)}function Ci(b,P){var K=b.__data__;return function qs(b){var P=typeof b;return"string"==P||"number"==P||"symbol"==P||"boolean"==P?"__proto__"!==b:null===b}(P)?K["string"==typeof P?"string":"hash"]:K.map}function Qn(b,P){var K=function Jt(b,P){return b?.[P]}(b,P);return function ua(b){return!(!zs(b)||function pa(b){return!!Yt&&Yt in b}(b))&&(ns(b)?vr:Xe).test(In(b))}(K)?K:void 0}ot.prototype.clear=function vt(){this.__data__=Et?Et(null):{},this.size=0},ot.prototype.delete=function _t(b){var P=this.has(b)&&delete this.__data__[b];return this.size-=P?1:0,P},ot.prototype.get=function mt(b){var P=this.__data__;if(Et){var K=P[b];return K===Ze?void 0:K}return tt.call(P,b)?P[b]:void 0},ot.prototype.has=function tr(b){var P=this.__data__;return Et?void 0!==P[b]:tt.call(P,b)},ot.prototype.set=function ea(b,P){var K=this.__data__;return this.size+=this.has(b)?0:1,K[b]=Et&&void 0===P?Ze:P,this},cn.prototype.clear=function wu(){this.__data__=[],this.size=0},cn.prototype.delete=function ta(b){var P=this.__data__,K=Ni(P,b);return!(K<0||(K==P.length-1?P.pop():Rr.call(P,K,1),--this.size,0))},cn.prototype.get=function ra(b){var P=this.__data__,K=Ni(P,b);return K<0?void 0:P[K][1]},cn.prototype.has=function na(b){return Ni(this.__data__,b)>-1},cn.prototype.set=function ia(b,P){var K=this.__data__,ce=Ni(K,b);return ce<0?(++this.size,K.push([b,P])):K[ce][1]=P,this},Gn.prototype.clear=function xu(){this.size=0,this.__data__={hash:new ot,map:new(xn||cn),string:new ot}},Gn.prototype.delete=function sa(b){var P=Ci(this,b).delete(b);return this.size-=P?1:0,P},Gn.prototype.get=function Eu(b){return Ci(this,b).get(b)},Gn.prototype.has=function An(b){return Ci(this,b).has(b)},Gn.prototype.set=function oa(b,P){var K=Ci(this,b),ce=K.size;return K.set(b,P),this.size+=K.size==ce?0:1,this},pi.prototype.add=pi.prototype.push=function Ms(b){return this.__data__.set(b,Ze),this},pi.prototype.has=function Iu(b){return this.__data__.has(b)},Cn.prototype.clear=function aa(){this.__data__=new cn,this.size=0},Cn.prototype.delete=function Su(b){var P=this.__data__,K=P.delete(b);return this.size=P.size,K},Cn.prototype.get=function Jn(b){return this.__data__.get(b)},Cn.prototype.has=function gi(b){return this.__data__.has(b)},Cn.prototype.set=function js(b,P){var K=this.__data__;if(K instanceof cn){var ce=K.__data__;if(!xn||ce.length<199)return ce.push([b,P]),this.size=++K.size,this;K=this.__data__=new Gn(ce)}return K.set(b,P),this.size=K.size,this};var Ls=Wr?function(b){return null==b?[]:(b=Object(b),function Ie(b,P){for(var K=-1,ce=null==b?0:b.length,Qe=0,me=[];++K<ce;){var bt=b[K];P(bt,K,b)&&(me[Qe++]=bt)}return me}(Wr(b),function(P){return Fr.call(b,P)}))}:function Xn(){return[]},En=or;function da(b,P){return!!(P=P??ie)&&("number"==typeof b||pt.test(b))&&b>-1&&b%1==0&&b<P}function In(b){if(null!=b){try{return st.call(b)}catch{}try{return b+""}catch{}}return""}function Us(b,P){return b===P||b!=b&&P!=P}(wn&&En(new wn(new ArrayBuffer(1)))!=W||xn&&En(new xn)!=xe||qt&&En(qt.resolve())!=Nt||Ct&&En(new Ct)!=Er||Tt&&En(new Tt)!=k)&&(En=function(b){var P=or(b),K=P==Kt?b.constructor:void 0,ce=K?In(K):"";if(ce)switch(ce){case ke:return W;case Ut:return xe;case sr:return Nt;case Xt:return Er;case Vt:return k}return P});var va=un(function(){return arguments}())?un:function(b){return Yn(b)&&tt.call(b,"callee")&&!Fr.call(b,"callee")},Ti=Array.isArray,rs=bn||function wa(){return!1};function ns(b){if(!zs(b))return!1;var P=or(b);return P==$t||P==Rt||P==ae||P==Dr}function Zs(b){return"number"==typeof b&&b>-1&&b%1==0&&b<=ie}function zs(b){var P=typeof b;return null!=b&&("object"==P||"function"==P)}function Yn(b){return null!=b&&"object"==typeof b}var ks=de?function Oe(b){return function(P){return b(P)}}(de):function es(b){return Yn(b)&&Zs(b.length)&&!!Ue[or(b)]};function ba(b){return function _a(b){return null!=b&&Zs(b.length)&&!ns(b)}(b)?function ca(b,P){var K=Ti(b),ce=!K&&va(b),Qe=!K&&!ce&&rs(b),me=!K&&!ce&&!Qe&&ks(b),bt=K||ce||Qe||me,rr=bt?function He(b,P){for(var K=-1,ce=Array(b);++K<b;)ce[K]=P(K);return ce}(b.length,String):[],ar=rr.length;for(var B in b)(P||tt.call(b,B))&&(!bt||!("length"==B||Qe&&("offset"==B||"parent"==B)||me&&("buffer"==B||"byteLength"==B||"byteOffset"==B)||da(B,ar)))&&rr.push(B);return rr}(b):function la(b){if(!function ga(b){var P=b&&b.constructor;return b===("function"==typeof P&&P.prototype||et)}(b))return Wn(b);var P=[];for(var K in Object(b))tt.call(b,K)&&"constructor"!=K&&P.push(K);return P}(b)}Ot.exports=function ma(b,P){return It(b,P)}},8456:(Ot,se,te)=>{"use strict";function v(Ze,Be){return Be=Be||{},new Promise(function(lr,ie){var ze=new XMLHttpRequest,De=[],ae=[],Q={},we=function(){return{ok:2==(ze.status/100|0),statusText:ze.statusText,status:ze.status,url:ze.responseURL,text:function(){return Promise.resolve(ze.responseText)},json:function(){return Promise.resolve(ze.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([ze.response]))},clone:we,headers:{keys:function(){return De},entries:function(){return ae},get:function($t){return Q[$t.toLowerCase()]},has:function($t){return $t.toLowerCase()in Q}}}};for(var pr in ze.open(Be.method||"get",Ze,!0),ze.onload=function(){ze.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function($t,Rt,xe){De.push(Rt=Rt.toLowerCase()),ae.push([Rt,xe]),Q[Rt]=Q[Rt]?Q[Rt]+","+xe:xe}),lr(we())},ze.onerror=ie,ze.withCredentials="include"==Be.credentials,Be.headers)ze.setRequestHeader(pr,Be.headers[pr]);ze.send(Be.body||null)})}te.r(se),te.d(se,{default:()=>v})},3569:Ot=>{"use strict";Ot.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},9653:(Ot,se,te)=>{"use strict";te.r(se),te.d(se,{__assign:()=>Be,__asyncDelegator:()=>Nt,__asyncGenerator:()=>Kt,__asyncValues:()=>Dr,__await:()=>nr,__awaiter:()=>ae,__classPrivateFieldGet:()=>ir,__classPrivateFieldSet:()=>Pe,__createBinding:()=>we,__decorate:()=>ie,__exportStar:()=>pr,__extends:()=>Ze,__generator:()=>Q,__importDefault:()=>it,__importStar:()=>Er,__makeTemplateObject:()=>xr,__metadata:()=>De,__param:()=>ze,__read:()=>Rt,__rest:()=>lr,__spread:()=>xe,__spreadArrays:()=>gr,__values:()=>$t});var v=function(k,G){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(W,F){W.__proto__=F}||function(W,F){for(var oe in F)F.hasOwnProperty(oe)&&(W[oe]=F[oe])})(k,G)};function Ze(k,G){function W(){this.constructor=k}v(k,G),k.prototype=null===G?Object.create(G):(W.prototype=G.prototype,new W)}var Be=function(){return Be=Object.assign||function(G){for(var W,F=1,oe=arguments.length;F<oe;F++)for(var A in W=arguments[F])Object.prototype.hasOwnProperty.call(W,A)&&(G[A]=W[A]);return G},Be.apply(this,arguments)};function lr(k,G){var W={};for(var F in k)Object.prototype.hasOwnProperty.call(k,F)&&G.indexOf(F)<0&&(W[F]=k[F]);if(null!=k&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(F=Object.getOwnPropertySymbols(k);oe<F.length;oe++)G.indexOf(F[oe])<0&&Object.prototype.propertyIsEnumerable.call(k,F[oe])&&(W[F[oe]]=k[F[oe]])}return W}function ie(k,G,W,F){var D,oe=arguments.length,A=oe<3?G:null===F?F=Object.getOwnPropertyDescriptor(G,W):F;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(k,G,W,F);else for(var _e=k.length-1;_e>=0;_e--)(D=k[_e])&&(A=(oe<3?D(A):oe>3?D(G,W,A):D(G,W))||A);return oe>3&&A&&Object.defineProperty(G,W,A),A}function ze(k,G){return function(W,F){G(W,F,k)}}function De(k,G){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(k,G)}function ae(k,G,W,F){return new(W||(W=Promise))(function(A,D){function _e(Y){try{V(F.next(Y))}catch(ee){D(ee)}}function $e(Y){try{V(F.throw(Y))}catch(ee){D(ee)}}function V(Y){Y.done?A(Y.value):function oe(A){return A instanceof W?A:new W(function(D){D(A)})}(Y.value).then(_e,$e)}V((F=F.apply(k,G||[])).next())})}function Q(k,G){var F,oe,A,D,W={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return D={next:_e(0),throw:_e(1),return:_e(2)},"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function _e(V){return function(Y){return function $e(V){if(F)throw new TypeError("Generator is already executing.");for(;W;)try{if(F=1,oe&&(A=2&V[0]?oe.return:V[0]?oe.throw||((A=oe.return)&&A.call(oe),0):oe.next)&&!(A=A.call(oe,V[1])).done)return A;switch(oe=0,A&&(V=[2&V[0],A.value]),V[0]){case 0:case 1:A=V;break;case 4:return W.label++,{value:V[1],done:!1};case 5:W.label++,oe=V[1],V=[0];continue;case 7:V=W.ops.pop(),W.trys.pop();continue;default:if(!(A=(A=W.trys).length>0&&A[A.length-1])&&(6===V[0]||2===V[0])){W=0;continue}if(3===V[0]&&(!A||V[1]>A[0]&&V[1]<A[3])){W.label=V[1];break}if(6===V[0]&&W.label<A[1]){W.label=A[1],A=V;break}if(A&&W.label<A[2]){W.label=A[2],W.ops.push(V);break}A[2]&&W.ops.pop(),W.trys.pop();continue}V=G.call(k,W)}catch(Y){V=[6,Y],oe=0}finally{F=A=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}([V,Y])}}}function we(k,G,W,F){void 0===F&&(F=W),k[F]=G[W]}function pr(k,G){for(var W in k)"default"!==W&&!G.hasOwnProperty(W)&&(G[W]=k[W])}function $t(k){var G="function"==typeof Symbol&&Symbol.iterator,W=G&&k[G],F=0;if(W)return W.call(k);if(k&&"number"==typeof k.length)return{next:function(){return k&&F>=k.length&&(k=void 0),{value:k&&k[F++],done:!k}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rt(k,G){var W="function"==typeof Symbol&&k[Symbol.iterator];if(!W)return k;var oe,D,F=W.call(k),A=[];try{for(;(void 0===G||G-- >0)&&!(oe=F.next()).done;)A.push(oe.value)}catch(_e){D={error:_e}}finally{try{oe&&!oe.done&&(W=F.return)&&W.call(F)}finally{if(D)throw D.error}}return A}function xe(){for(var k=[],G=0;G<arguments.length;G++)k=k.concat(Rt(arguments[G]));return k}function gr(){for(var k=0,G=0,W=arguments.length;G<W;G++)k+=arguments[G].length;var F=Array(k),oe=0;for(G=0;G<W;G++)for(var A=arguments[G],D=0,_e=A.length;D<_e;D++,oe++)F[oe]=A[D];return F}function nr(k){return this instanceof nr?(this.v=k,this):new nr(k)}function Kt(k,G,W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,F=W.apply(k,G||[]),A=[];return oe={},D("next"),D("throw"),D("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function D(re){F[re]&&(oe[re]=function(Xe){return new Promise(function(pt,Ue){A.push([re,Xe,pt,Ue])>1||_e(re,Xe)})})}function _e(re,Xe){try{!function $e(re){re.value instanceof nr?Promise.resolve(re.value.v).then(V,Y):ee(A[0][2],re)}(F[re](Xe))}catch(pt){ee(A[0][3],pt)}}function V(re){_e("next",re)}function Y(re){_e("throw",re)}function ee(re,Xe){re(Xe),A.shift(),A.length&&_e(A[0][0],A[0][1])}}function Nt(k){var G,W;return G={},F("next"),F("throw",function(oe){throw oe}),F("return"),G[Symbol.iterator]=function(){return this},G;function F(oe,A){G[oe]=k[oe]?function(D){return(W=!W)?{value:nr(k[oe](D)),done:"return"===oe}:A?A(D):D}:A}}function Dr(k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,G=k[Symbol.asyncIterator];return G?G.call(k):(k=$t(k),W={},F("next"),F("throw"),F("return"),W[Symbol.asyncIterator]=function(){return this},W);function F(A){W[A]=k[A]&&function(D){return new Promise(function(_e,$e){!function oe(A,D,_e,$e){Promise.resolve($e).then(function(V){A({value:V,done:_e})},D)}(_e,$e,(D=k[A](D)).done,D.value)})}}}function xr(k,G){return Object.defineProperty?Object.defineProperty(k,"raw",{value:G}):k.raw=G,k}function Er(k){if(k&&k.__esModule)return k;var G={};if(null!=k)for(var W in k)Object.hasOwnProperty.call(k,W)&&(G[W]=k[W]);return G.default=k,G}function it(k){return k&&k.__esModule?k:{default:k}}function ir(k,G){if(!G.has(k))throw new TypeError("attempted to get private field on non-instance");return G.get(k)}function Pe(k,G,W){if(!G.has(k))throw new TypeError("attempted to set private field on non-instance");return G.set(k,W),W}}}]);